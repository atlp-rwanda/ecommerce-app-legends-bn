{"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\index.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"2":{"start":{"line":7,"column":10},"end":{"line":7,"column":47}},"3":{"start":{"line":8,"column":12},"end":{"line":8,"column":51}},"4":{"start":{"line":9,"column":17},"end":{"line":9,"column":61}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":17},"end":{"line":11,"column":51}},"7":{"start":{"line":12,"column":15},"end":{"line":12,"column":48}},"8":{"start":{"line":13,"column":12},"end":{"line":13,"column":32}},"9":{"start":{"line":14,"column":11},"end":{"line":14,"column":13}},"10":{"start":{"line":16,"column":0},"end":{"line":20,"column":1}},"11":{"start":{"line":17,"column":2},"end":{"line":17,"column":54}},"12":{"start":{"line":19,"column":2},"end":{"line":19,"column":67}},"13":{"start":{"line":21,"column":0},"end":{"line":26,"column":3}},"14":{"start":{"line":22,"column":2},"end":{"line":22,"column":82}},"15":{"start":{"line":24,"column":16},"end":{"line":24,"column":101}},"16":{"start":{"line":25,"column":2},"end":{"line":25,"column":25}},"17":{"start":{"line":27,"column":0},"end":{"line":31,"column":3}},"18":{"start":{"line":28,"column":2},"end":{"line":30,"column":3}},"19":{"start":{"line":29,"column":4},"end":{"line":29,"column":32}},"20":{"start":{"line":32,"column":21},"end":{"line":32,"column":177}},"21":{"start":{"line":32,"column":57},"end":{"line":32,"column":108}},"22":{"start":{"line":32,"column":123},"end":{"line":32,"column":176}},"23":{"start":{"line":33,"column":0},"end":{"line":33,"column":36}},"24":{"start":{"line":34,"column":0},"end":{"line":34,"column":25}},"25":{"start":{"line":35,"column":0},"end":{"line":35,"column":34}},"26":{"start":{"line":36,"column":0},"end":{"line":36,"column":20}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":42},"end":{"line":21,"column":43}},"loc":{"start":{"line":21,"column":50},"end":{"line":23,"column":1}},"line":21},"2":{"name":"(anonymous_2)","decl":{"start":{"line":23,"column":11},"end":{"line":23,"column":12}},"loc":{"start":{"line":23,"column":19},"end":{"line":26,"column":1}},"line":23},"3":{"name":"(anonymous_3)","decl":{"start":{"line":27,"column":24},"end":{"line":27,"column":25}},"loc":{"start":{"line":27,"column":37},"end":{"line":31,"column":1}},"line":27},"4":{"name":"(anonymous_4)","decl":{"start":{"line":32,"column":51},"end":{"line":32,"column":52}},"loc":{"start":{"line":32,"column":57},"end":{"line":32,"column":108}},"line":32},"5":{"name":"(anonymous_5)","decl":{"start":{"line":32,"column":116},"end":{"line":32,"column":117}},"loc":{"start":{"line":32,"column":123},"end":{"line":32,"column":176}},"line":32}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10},"2":{"loc":{"start":{"line":16,"column":0},"end":{"line":20,"column":1}},"type":"if","locations":[{"start":{"line":16,"column":0},"end":{"line":20,"column":1}},{"start":{"line":16,"column":0},"end":{"line":20,"column":1}}],"line":16},"3":{"loc":{"start":{"line":22,"column":9},"end":{"line":22,"column":81}},"type":"binary-expr","locations":[{"start":{"line":22,"column":9},"end":{"line":22,"column":32}},{"start":{"line":22,"column":36},"end":{"line":22,"column":53}},{"start":{"line":22,"column":57},"end":{"line":22,"column":81}}],"line":22},"4":{"loc":{"start":{"line":28,"column":2},"end":{"line":30,"column":3}},"type":"if","locations":[{"start":{"line":28,"column":2},"end":{"line":30,"column":3}},{"start":{"line":28,"column":2},"end":{"line":30,"column":3}}],"line":28}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":3,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":1,"14":17,"15":16,"16":16,"17":1,"18":16,"19":15,"20":1,"21":1,"22":0,"23":1,"24":1,"25":1,"26":1},"f":{"0":3,"1":17,"2":16,"3":16,"4":1,"5":0},"b":{"0":[0,3],"1":[3,3],"2":[1,0],"3":[17,17,16],"4":[15,1]},"inputSourceMap":{"version":3,"names":["Object","defineProperty","exports","value","dbConnection","_fs","_interopRequireDefault","require","_path","_sequelize","obj","__esModule","default","basename","path","__filename","config","env","process","NODE_ENV","db","sequelize","url","Sequelize","DEV_DATABASE_URL","fs","readdirSync","__dirname","filter","file","indexOf","slice","forEach","model","join","DataTypes","name","keys","modelName","associate","authenticate","then","console","log","catch","err","module"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["index.js"],"sourcesContent":["'use strict';\r\n\r\nimport fs from 'fs';\r\nimport path from 'path';\r\nimport Sequelize from 'sequelize';\r\nconst basename = path.basename(__filename);\r\nconst config = require('../../config/config.js');\r\nconst env = process.env.NODE_ENV;\r\nconst db = {};\r\nlet sequelize;\r\nif (config[env].url) {\r\n  sequelize = new Sequelize(config[env].url);\r\n} else {\r\n  sequelize = new Sequelize(process.env.DEV_DATABASE_URL);\r\n}\r\n\r\nfs.readdirSync(__dirname)\r\n  .filter((file) => {\r\n    return (\r\n      file.indexOf('.') !== 0 && file !== basename && file.slice(-3) === '.js'\r\n    );\r\n  })\r\n  .forEach((file) => {\r\n    const model = require(path.join(__dirname, file))(\r\n      sequelize,\r\n      Sequelize.DataTypes\r\n    );\r\n    db[model.name] = model;\r\n  });\r\n\r\nObject.keys(db).forEach((modelName) => {\r\n  if (db[modelName].associate) {\r\n    db[modelName].associate(db);\r\n  }\r\n});\r\nexport const dbConnection=sequelize.authenticate().then(\r\n  ()=>console.log(env,'database connection established')\r\n).catch(err=>console.log('unable to connect to the database',err))\r\ndb.sequelize = sequelize;\r\ndb.Sequelize = Sequelize;\r\n\r\nmodule.exports = db;\r\n"],"mappings":"AAAA,YAAY;;AAACA,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,CAAAE,YAAA;AAEb,IAAAC,GAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,UAAA,GAAAH,sBAAA,CAAAC,OAAA;AAAkC,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAClC,MAAMG,QAAQ,GAAGC,aAAI,CAACD,QAAQ,CAACE,UAAU,CAAC;AAC1C,MAAMC,MAAM,GAAGT,OAAO,CAAC,wBAAwB,CAAC;AAChD,MAAMU,GAAG,GAAGC,OAAO,CAACD,GAAG,CAACE,QAAQ;AAChC,MAAMC,EAAE,GAAG,CAAC,CAAC;AACb,IAAIC,SAAS;AACb,IAAIL,MAAM,CAACC,GAAG,CAAC,CAACK,GAAG,EAAE;EACnBD,SAAS,GAAG,IAAIE,kBAAS,CAACP,MAAM,CAACC,GAAG,CAAC,CAACK,GAAG,CAAC;AAC5C,CAAC,MAAM;EACLD,SAAS,GAAG,IAAIE,kBAAS,CAACL,OAAO,CAACD,GAAG,CAACO,gBAAgB,CAAC;AACzD;AAEAC,WAAE,CAACC,WAAW,CAACC,SAAS,CAAC,CACtBC,MAAM,CAAEC,IAAI,IAAK;EAChB,OACEA,IAAI,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAID,IAAI,KAAKhB,QAAQ,IAAIgB,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK;AAE5E,CAAC,CAAC,CACDC,OAAO,CAAEH,IAAI,IAAK;EACjB,MAAMI,KAAK,GAAG1B,OAAO,CAACO,aAAI,CAACoB,IAAI,CAACP,SAAS,EAAEE,IAAI,CAAC,CAAC,CAC/CR,SAAS,EACTE,kBAAS,CAACY,SAAS,CACpB;EACDf,EAAE,CAACa,KAAK,CAACG,IAAI,CAAC,GAAGH,KAAK;AACxB,CAAC,CAAC;AAEJjC,MAAM,CAACqC,IAAI,CAACjB,EAAE,CAAC,CAACY,OAAO,CAAEM,SAAS,IAAK;EACrC,IAAIlB,EAAE,CAACkB,SAAS,CAAC,CAACC,SAAS,EAAE;IAC3BnB,EAAE,CAACkB,SAAS,CAAC,CAACC,SAAS,CAACnB,EAAE,CAAC;EAC7B;AACF,CAAC,CAAC;AACK,MAAMhB,YAAY,GAACiB,SAAS,CAACmB,YAAY,EAAE,CAACC,IAAI,CACrD,MAAIC,OAAO,CAACC,GAAG,CAAC1B,GAAG,EAAC,iCAAiC,CAAC,CACvD,CAAC2B,KAAK,CAACC,GAAG,IAAEH,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAACE,GAAG,CAAC,CAAC;AAAA3C,OAAA,CAAAE,YAAA,GAAAA,YAAA;AAClEgB,EAAE,CAACC,SAAS,GAAGA,SAAS;AACxBD,EAAE,CAACG,SAAS,GAAGA,kBAAS;AAExBuB,MAAM,CAAC5C,OAAO,GAAGkB,EAAE"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9e6931363f495abc6fed9321116029ac8c36aaf9","contentHash":"b140fd1c004f01449b5fd25503f238faed58b4941f73eeb5472c83dfd039ba43"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\config\\config.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\config\\config.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"1":{"start":{"line":4,"column":0},"end":{"line":17,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["require","config","module","exports","development","url","process","env","DEV_DATABASE_URL","dialect","test","TEST_DATABASE_URL","production","DATABASE_URL"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\config\\","sources":["config.js"],"sourcesContent":["require('dotenv').config()\r\nmodule.exports = {\r\n  development: {\r\n    url: process.env.DEV_DATABASE_URL,\r\n    dialect: 'postgres',\r\n  },\r\n  test: {\r\n    url: process.env.TEST_DATABASE_URL,\r\n    dialect: 'postgres',\r\n  },\r\n  production: {\r\n    url: process.env.DATABASE_URL,\r\n    dialect: 'postgres',\r\n  },\r\n}\r\n"],"mappings":";;AAAAA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,EAAE;AAC1BC,MAAM,CAACC,OAAO,GAAG;EACfC,WAAW,EAAE;IACXC,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACC,gBAAgB;IACjCC,OAAO,EAAE;EACX,CAAC;EACDC,IAAI,EAAE;IACJL,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACI,iBAAiB;IAClCF,OAAO,EAAE;EACX,CAAC;EACDG,UAAU,EAAE;IACVP,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACM,YAAY;IAC7BJ,OAAO,EAAE;EACX;AACF,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9c731c894894d38cd27b0deafea2958fc6c7a606","contentHash":"251a6045f92b157c60fbff0c906d44ebfaa427ec8f6a1a8bd1c3713d3b3bda0c"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\category.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\category.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":29,"column":2}},"2":{"start":{"line":15,"column":6},"end":{"line":17,"column":9}},"3":{"start":{"line":20,"column":2},"end":{"line":27,"column":5}},"4":{"start":{"line":28,"column":2},"end":{"line":28,"column":18}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":29,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":18,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Category","associate","models","hasMany","Product","foreignKey","init","name","STRING","status","modelName","tableName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["category.js"],"sourcesContent":["'use strict';\r\nconst {\r\n  Model\r\n} = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class Category extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n      this.hasMany(models.Product, { foreignKey: 'categoryId'})\r\n    }\r\n  }\r\n  Category.init({\r\n    name: DataTypes.STRING,\r\n    status: DataTypes.STRING\r\n  }, {\r\n    sequelize,\r\n    modelName: 'Category',\r\n    tableName: 'Categories'\r\n  });\r\n  return Category;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACxBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,QAAQ,SAASN,KAAK,CAAC;IAC3B;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACA,IAAI,CAACC,OAAO,CAACD,MAAM,CAACE,OAAO,EAAE;QAAEC,UAAU,EAAE;MAAY,CAAC,CAAC;IAC3D;EACF;EACAL,QAAQ,CAACM,IAAI,CAAC;IACZC,IAAI,EAAER,SAAS,CAACS,MAAM;IACtBC,MAAM,EAAEV,SAAS,CAACS;EACpB,CAAC,EAAE;IACDV,SAAS;IACTY,SAAS,EAAE,UAAU;IACrBC,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOX,QAAQ;AACjB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8175003bf2a1aefb1f88d6a4865744f6e5e5d122","contentHash":"665ede4b4f8f20850e51ff463b7b5f67c8416f7aceaefa09befb929fc897277f"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\coupon.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\coupon.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":36,"column":2}},"2":{"start":{"line":15,"column":6},"end":{"line":17,"column":9}},"3":{"start":{"line":18,"column":6},"end":{"line":20,"column":9}},"4":{"start":{"line":23,"column":2},"end":{"line":34,"column":5}},"5":{"start":{"line":35,"column":2},"end":{"line":35,"column":16}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":36,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":21,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Coupon","associate","models","belongsTo","user","foreignKey","hasMany","CouponProduct","init","code","STRING","discount_rate","INTEGER","expire_at","DATE","max_usage","usage","status","vendorId","UUID","modelName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["coupon.js"],"sourcesContent":["'use strict';\r\nconst {\r\n  Model\r\n} = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class Coupon extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n      this.belongsTo(models.user, { foreignKey: 'vendorId' })\r\n      this.hasMany(models.CouponProduct, { foreignKey: 'couponId' })\r\n    }\r\n  }\r\n  Coupon.init({\r\n    code: DataTypes.STRING,\r\n    discount_rate: DataTypes.INTEGER,\r\n    expire_at: DataTypes.DATE,\r\n    max_usage: DataTypes.INTEGER,\r\n    usage: DataTypes.INTEGER,\r\n    status: DataTypes.STRING,\r\n    vendorId: DataTypes.UUID,\r\n  }, {\r\n    sequelize,\r\n    modelName: 'Coupon',\r\n  });\r\n  return Coupon;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACxBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,MAAM,SAASN,KAAK,CAAC;IACzB;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACA,IAAI,CAACC,SAAS,CAACD,MAAM,CAACE,IAAI,EAAE;QAAEC,UAAU,EAAE;MAAW,CAAC,CAAC;MACvD,IAAI,CAACC,OAAO,CAACJ,MAAM,CAACK,aAAa,EAAE;QAAEF,UAAU,EAAE;MAAW,CAAC,CAAC;IAChE;EACF;EACAL,MAAM,CAACQ,IAAI,CAAC;IACVC,IAAI,EAAEV,SAAS,CAACW,MAAM;IACtBC,aAAa,EAAEZ,SAAS,CAACa,OAAO;IAChCC,SAAS,EAAEd,SAAS,CAACe,IAAI;IACzBC,SAAS,EAAEhB,SAAS,CAACa,OAAO;IAC5BI,KAAK,EAAEjB,SAAS,CAACa,OAAO;IACxBK,MAAM,EAAElB,SAAS,CAACW,MAAM;IACxBQ,QAAQ,EAAEnB,SAAS,CAACoB;EACtB,CAAC,EAAE;IACDrB,SAAS;IACTsB,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOpB,MAAM;AACf,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5b3977059b674c51c83b3039cc9e30541c4b524a","contentHash":"3045dc11d84970a26708d3019d7e58c9d754cd07e2be89551c57dc65d044b825"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\couponproduct.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\couponproduct.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":31,"column":2}},"2":{"start":{"line":15,"column":6},"end":{"line":17,"column":9}},"3":{"start":{"line":18,"column":6},"end":{"line":20,"column":9}},"4":{"start":{"line":23,"column":2},"end":{"line":29,"column":5}},"5":{"start":{"line":30,"column":2},"end":{"line":30,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":31,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":21,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","CouponProduct","associate","models","belongsTo","Coupon","foreignKey","ProductAttribute","init","couponId","INTEGER","prodcutAttributeId","modelName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["couponproduct.js"],"sourcesContent":["'use strict';\r\nconst {\r\n  Model\r\n} = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class CouponProduct extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n      this.belongsTo(models.Coupon, {foreignKey: 'couponId' })\r\n      this.belongsTo(models.ProductAttribute, {foreignKey: 'prodcutAttributeId' })\r\n    }\r\n  }\r\n  CouponProduct.init({\r\n    couponId: DataTypes.INTEGER,\r\n    prodcutAttributeId: DataTypes.INTEGER\r\n  }, {\r\n    sequelize,\r\n    modelName: 'CouponProduct',\r\n  });\r\n  return CouponProduct;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACxBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,aAAa,SAASN,KAAK,CAAC;IAChC;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACA,IAAI,CAACC,SAAS,CAACD,MAAM,CAACE,MAAM,EAAE;QAACC,UAAU,EAAE;MAAW,CAAC,CAAC;MACxD,IAAI,CAACF,SAAS,CAACD,MAAM,CAACI,gBAAgB,EAAE;QAACD,UAAU,EAAE;MAAqB,CAAC,CAAC;IAC9E;EACF;EACAL,aAAa,CAACO,IAAI,CAAC;IACjBC,QAAQ,EAAET,SAAS,CAACU,OAAO;IAC3BC,kBAAkB,EAAEX,SAAS,CAACU;EAChC,CAAC,EAAE;IACDX,SAAS;IACTa,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOX,aAAa;AACtB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f81a647d0b9cb4dccc0d213276deac05fdb2abf4","contentHash":"6e357a4bc20a1d2101e7ce33371c2296665711b69fac21a182866c91e223b941"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\notification.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\notification.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":28,"column":2}},"2":{"start":{"line":17,"column":2},"end":{"line":26,"column":5}},"3":{"start":{"line":27,"column":2},"end":{"line":27,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":28,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":15,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","notification","associate","models","init","subject","STRING","message","type","isRead","BOOLEAN","userId","UUID","modelName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["notification.js"],"sourcesContent":["'use strict';\r\nconst {\r\n  Model\r\n} = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class notification extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n    }\r\n  }\r\n  notification.init({\r\n    subject: DataTypes.STRING,\r\n    message: DataTypes.STRING,\r\n    type: DataTypes.STRING,\r\n    isRead: DataTypes.BOOLEAN,\r\n    userId: DataTypes.UUID\r\n  }, {\r\n    sequelize,\r\n    modelName: 'notification',\r\n  });\r\n  return notification;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACxBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,YAAY,SAASN,KAAK,CAAC;IAC/B;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;IAAA;EAEJ;EACAF,YAAY,CAACG,IAAI,CAAC;IAChBC,OAAO,EAAEL,SAAS,CAACM,MAAM;IACzBC,OAAO,EAAEP,SAAS,CAACM,MAAM;IACzBE,IAAI,EAAER,SAAS,CAACM,MAAM;IACtBG,MAAM,EAAET,SAAS,CAACU,OAAO;IACzBC,MAAM,EAAEX,SAAS,CAACY;EACpB,CAAC,EAAE;IACDb,SAAS;IACTc,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOZ,YAAY;AACrB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fc8467511cd7772dddb0946f51e5b8bcbb962738","contentHash":"d6284691a3560637782636088fe400297364f4d3fab7f94abc87b1cc7d2d3878"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\orderDetails.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\orderDetails.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":31,"column":2}},"2":{"start":{"line":14,"column":2},"end":{"line":29,"column":5}},"3":{"start":{"line":30,"column":2},"end":{"line":30,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":31,"column":1}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","OrderDetails","init","id","type","UUID","primaryKey","allowNull","defaultValue","UUIDV4","name","STRING","color","size","quantity","price","modelName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["orderDetails.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class OrderDetails extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n   \r\n  }\r\n  OrderDetails.init(\r\n    {\r\n      id: {\r\n        type: DataTypes.UUID,\r\n        primaryKey: true,\r\n        allowNull: false,\r\n        defaultValue: require('sequelize').UUIDV4,\r\n      },\r\n      name: DataTypes.STRING,\r\n      color:  DataTypes.STRING,\r\n      size:  DataTypes.STRING,\r\n      quantity:  DataTypes.STRING,\r\n      price:  DataTypes.STRING,\r\n    },\r\n    {\r\n      sequelize,\r\n      modelName: 'OrderDetails',\r\n    }\r\n  );\r\n  return OrderDetails;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,YAAY,SAASN,KAAK,CAAC;IAC/B;AACJ;AACA;AACA;AACA;EAJI;EAOFM,YAAY,CAACC,IAAI,CACf;IACEC,EAAE,EAAE;MACFC,IAAI,EAAEJ,SAAS,CAACK,IAAI;MACpBC,UAAU,EAAE,IAAI;MAChBC,SAAS,EAAE,KAAK;MAChBC,YAAY,EAAEZ,OAAO,CAAC,WAAW,CAAC,CAACa;IACrC,CAAC;IACDC,IAAI,EAAEV,SAAS,CAACW,MAAM;IACtBC,KAAK,EAAGZ,SAAS,CAACW,MAAM;IACxBE,IAAI,EAAGb,SAAS,CAACW,MAAM;IACvBG,QAAQ,EAAGd,SAAS,CAACW,MAAM;IAC3BI,KAAK,EAAGf,SAAS,CAACW;EACpB,CAAC,EACD;IACEZ,SAAS;IACTiB,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOf,YAAY;AACrB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6ae7ce8896ec413ed7eb33b2b76d653aac2cb4f0","contentHash":"57499ae679c2b147ffed3934895c1363dc85b58ecd27e2c191accb4e0af85004"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\orders.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\orders.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":38,"column":2}},"2":{"start":{"line":15,"column":6},"end":{"line":17,"column":9}},"3":{"start":{"line":20,"column":2},"end":{"line":36,"column":5}},"4":{"start":{"line":37,"column":2},"end":{"line":37,"column":15}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":38,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":18,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Order","associate","models","belongsTo","user","foreignKey","init","id","type","UUID","primaryKey","allowNull","defaultValue","UUIDV4","amount","STRING","products","ARRAY","status","location","userId","trackingNumber","modelName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["orders.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class Order extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n      this.belongsTo(models.user, { foreignKey: 'userId' });\r\n    \r\n    }\r\n  }\r\n  Order.init(\r\n    {\r\n      id: {\r\n        type: DataTypes.UUID,\r\n        primaryKey: true,\r\n        allowNull: false,\r\n        defaultValue: require('sequelize').UUIDV4,\r\n      },\r\n      amount: DataTypes.STRING,\r\n      products: DataTypes.ARRAY(DataTypes.STRING),\r\n      status:  DataTypes.STRING,\r\n      location:  DataTypes.STRING,\r\n      userId: DataTypes.UUID,\r\n      trackingNumber: DataTypes.STRING\r\n    },\r\n    {\r\n      sequelize,\r\n      modelName: 'Order',\r\n    }\r\n  );\r\n  return Order;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,KAAK,SAASN,KAAK,CAAC;IACxB;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACA,IAAI,CAACC,SAAS,CAACD,MAAM,CAACE,IAAI,EAAE;QAAEC,UAAU,EAAE;MAAS,CAAC,CAAC;IAEvD;EACF;EACAL,KAAK,CAACM,IAAI,CACR;IACEC,EAAE,EAAE;MACFC,IAAI,EAAET,SAAS,CAACU,IAAI;MACpBC,UAAU,EAAE,IAAI;MAChBC,SAAS,EAAE,KAAK;MAChBC,YAAY,EAAEjB,OAAO,CAAC,WAAW,CAAC,CAACkB;IACrC,CAAC;IACDC,MAAM,EAAEf,SAAS,CAACgB,MAAM;IACxBC,QAAQ,EAAEjB,SAAS,CAACkB,KAAK,CAAClB,SAAS,CAACgB,MAAM,CAAC;IAC3CG,MAAM,EAAGnB,SAAS,CAACgB,MAAM;IACzBI,QAAQ,EAAGpB,SAAS,CAACgB,MAAM;IAC3BK,MAAM,EAAErB,SAAS,CAACU,IAAI;IACtBY,cAAc,EAAEtB,SAAS,CAACgB;EAC5B,CAAC,EACD;IACEjB,SAAS;IACTwB,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOtB,KAAK;AACd,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1576f70b311fccf089e47b32a27bfa99e738a710","contentHash":"be15c68e8574f6e1477da3f6ff97d7d74eaa4e30b92380d23b331e7e906f4e9b"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\permission.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\permission.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":33,"column":2}},"2":{"start":{"line":14,"column":6},"end":{"line":16,"column":9}},"3":{"start":{"line":22,"column":2},"end":{"line":31,"column":5}},"4":{"start":{"line":32,"column":2},"end":{"line":32,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":33,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":19,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","permission","associate","models","belongsToMany","role","through","rolePermission","init","name","type","ARRAY","STRING","modelName","tableName","timestamps"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["permission.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class permission extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n        permission.belongsToMany(models.role, {\r\n          through: models.rolePermission,\r\n        });\r\n        \r\n      // define association here\r\n    }\r\n  }\r\n  permission.init(\r\n    {\r\n      name: { type: DataTypes.ARRAY(DataTypes.STRING)},\r\n    },\r\n    {\r\n      sequelize,\r\n      modelName: 'permission',\r\n      tableName: 'permissions',\r\n      timestamps: false,\r\n    }\r\n  );\r\n  return permission;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,UAAU,SAASN,KAAK,CAAC;IAC7B;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACrBF,UAAU,CAACG,aAAa,CAACD,MAAM,CAACE,IAAI,EAAE;QACpCC,OAAO,EAAEH,MAAM,CAACI;MAClB,CAAC,CAAC;;MAEJ;IACF;EACF;;EACAN,UAAU,CAACO,IAAI,CACb;IACEC,IAAI,EAAE;MAAEC,IAAI,EAAEV,SAAS,CAACW,KAAK,CAACX,SAAS,CAACY,MAAM;IAAC;EACjD,CAAC,EACD;IACEb,SAAS;IACTc,SAAS,EAAE,YAAY;IACvBC,SAAS,EAAE,aAAa;IACxBC,UAAU,EAAE;EACd,CAAC,CACF;EACD,OAAOd,UAAU;AACnB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"67335d550feeadc006af212d4311e026741843bd","contentHash":"ad319579a5a83f86ed49ed1c3a4a767a4623ce09fb1b7bdc8b4d6725be74ec29"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\product.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\product.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":57,"column":2}},"2":{"start":{"line":15,"column":6},"end":{"line":17,"column":9}},"3":{"start":{"line":18,"column":6},"end":{"line":20,"column":9}},"4":{"start":{"line":21,"column":6},"end":{"line":23,"column":9}},"5":{"start":{"line":24,"column":6},"end":{"line":26,"column":9}},"6":{"start":{"line":29,"column":2},"end":{"line":55,"column":5}},"7":{"start":{"line":56,"column":2},"end":{"line":56,"column":17}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":57,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":27,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","Product","associate","models","belongsTo","Category","foreignKey","user","hasMany","ProductAttribute","ProductImage","init","id","type","UUID","primaryKey","allowNull","defaultValue","UUIDV4","name","STRING","slug","description","TEXT","model","image","keyword","status","ENUM","categoryId","INTEGER","userId","expiredAt","DATE","avgRating","cloudinaryId","modelName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["product.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class Product extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n      this.belongsTo(models.Category, { foreignKey: 'categoryId' });\r\n      this.belongsTo(models.user, { foreignKey: 'userId' });\r\n      this.hasMany(models.ProductAttribute, { foreignKey: 'productId' });\r\n      this.hasMany(models.ProductImage, { foreignKey: 'productId' });\r\n    }\r\n  }\r\n  Product.init(\r\n    {\r\n      id: {\r\n        type: DataTypes.UUID,\r\n        primaryKey: true,\r\n        allowNull: false,\r\n        defaultValue: require('sequelize').UUIDV4,\r\n      },\r\n      name: DataTypes.STRING,\r\n      slug: DataTypes.STRING,\r\n      description: DataTypes.TEXT,\r\n      model: DataTypes.STRING,\r\n      image: DataTypes.STRING,\r\n      keyword: DataTypes.STRING,\r\n      status: DataTypes.ENUM('AVAILABLE', 'UNAVAILABLE'),\r\n      categoryId: DataTypes.INTEGER,\r\n      userId: DataTypes.UUID,\r\n      expiredAt: DataTypes.DATE,\r\n      avgRating: {\r\n        type: DataTypes.INTEGER,\r\n        defaultValue: 0,\r\n        allowNull: false\r\n      },\r\n      cloudinaryId: DataTypes.STRING\r\n    },\r\n    {\r\n      sequelize,\r\n      modelName: 'Product',\r\n    }\r\n  );\r\n  return Product;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,OAAO,SAASN,KAAK,CAAC;IAC1B;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACA,IAAI,CAACC,SAAS,CAACD,MAAM,CAACE,QAAQ,EAAE;QAAEC,UAAU,EAAE;MAAa,CAAC,CAAC;MAC7D,IAAI,CAACF,SAAS,CAACD,MAAM,CAACI,IAAI,EAAE;QAAED,UAAU,EAAE;MAAS,CAAC,CAAC;MACrD,IAAI,CAACE,OAAO,CAACL,MAAM,CAACM,gBAAgB,EAAE;QAAEH,UAAU,EAAE;MAAY,CAAC,CAAC;MAClE,IAAI,CAACE,OAAO,CAACL,MAAM,CAACO,YAAY,EAAE;QAAEJ,UAAU,EAAE;MAAY,CAAC,CAAC;IAChE;EACF;EACAL,OAAO,CAACU,IAAI,CACV;IACEC,EAAE,EAAE;MACFC,IAAI,EAAEb,SAAS,CAACc,IAAI;MACpBC,UAAU,EAAE,IAAI;MAChBC,SAAS,EAAE,KAAK;MAChBC,YAAY,EAAErB,OAAO,CAAC,WAAW,CAAC,CAACsB;IACrC,CAAC;IACDC,IAAI,EAAEnB,SAAS,CAACoB,MAAM;IACtBC,IAAI,EAAErB,SAAS,CAACoB,MAAM;IACtBE,WAAW,EAAEtB,SAAS,CAACuB,IAAI;IAC3BC,KAAK,EAAExB,SAAS,CAACoB,MAAM;IACvBK,KAAK,EAAEzB,SAAS,CAACoB,MAAM;IACvBM,OAAO,EAAE1B,SAAS,CAACoB,MAAM;IACzBO,MAAM,EAAE3B,SAAS,CAAC4B,IAAI,CAAC,WAAW,EAAE,aAAa,CAAC;IAClDC,UAAU,EAAE7B,SAAS,CAAC8B,OAAO;IAC7BC,MAAM,EAAE/B,SAAS,CAACc,IAAI;IACtBkB,SAAS,EAAEhC,SAAS,CAACiC,IAAI;IACzBC,SAAS,EAAE;MACTrB,IAAI,EAAEb,SAAS,CAAC8B,OAAO;MACvBb,YAAY,EAAE,CAAC;MACfD,SAAS,EAAE;IACb,CAAC;IACDmB,YAAY,EAAEnC,SAAS,CAACoB;EAC1B,CAAC,EACD;IACErB,SAAS;IACTqC,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOnC,OAAO;AAChB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"df485e5a5bf8d4c8c5c1fd029052b0ab636e5341","contentHash":"ee59d369ac842a16f7934223a4166de30760d6721c75fede1fdd1dccd17092ae"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\productattribute.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\productattribute.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":36,"column":2}},"2":{"start":{"line":15,"column":6},"end":{"line":17,"column":9}},"3":{"start":{"line":18,"column":6},"end":{"line":20,"column":9}},"4":{"start":{"line":23,"column":2},"end":{"line":34,"column":5}},"5":{"start":{"line":35,"column":2},"end":{"line":35,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":36,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":21,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","ProductAttribute","associate","models","belongsTo","Product","foreignKey","hasMany","shoppingCarts","init","price","INTEGER","size","STRING","color","productId","UUID","attrImage","quantity","cloudinaryId","modelName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["productattribute.js"],"sourcesContent":["'use strict';\r\nconst {\r\n  Model\r\n} = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class ProductAttribute extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n      this.belongsTo(models.Product, { foreignKey : 'productId' })\r\n      this.hasMany(models.shoppingCarts, { foreignKey : 'product' })\r\n    }\r\n  }\r\n  ProductAttribute.init({\r\n    price: DataTypes.INTEGER,\r\n    size: DataTypes.STRING,\r\n    color: DataTypes.STRING,\r\n    productId: DataTypes.UUID,\r\n    attrImage: DataTypes.STRING,\r\n    quantity: DataTypes.INTEGER,\r\n    cloudinaryId: DataTypes.STRING\r\n  }, {\r\n    sequelize,\r\n    modelName: 'ProductAttribute',\r\n  });\r\n  return ProductAttribute;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACxBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,gBAAgB,SAASN,KAAK,CAAC;IACnC;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACA,IAAI,CAACC,SAAS,CAACD,MAAM,CAACE,OAAO,EAAE;QAAEC,UAAU,EAAG;MAAY,CAAC,CAAC;MAC5D,IAAI,CAACC,OAAO,CAACJ,MAAM,CAACK,aAAa,EAAE;QAAEF,UAAU,EAAG;MAAU,CAAC,CAAC;IAChE;EACF;EACAL,gBAAgB,CAACQ,IAAI,CAAC;IACpBC,KAAK,EAAEV,SAAS,CAACW,OAAO;IACxBC,IAAI,EAAEZ,SAAS,CAACa,MAAM;IACtBC,KAAK,EAAEd,SAAS,CAACa,MAAM;IACvBE,SAAS,EAAEf,SAAS,CAACgB,IAAI;IACzBC,SAAS,EAAEjB,SAAS,CAACa,MAAM;IAC3BK,QAAQ,EAAElB,SAAS,CAACW,OAAO;IAC3BQ,YAAY,EAAEnB,SAAS,CAACa;EAC1B,CAAC,EAAE;IACDd,SAAS;IACTqB,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOnB,gBAAgB;AACzB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"78f52c1c3edd46522a82943ad69433b2ae1c237e","contentHash":"207481044556c07641073e6548d163c60f0ea50e005b9666a3b4e37c5e1ca5d7"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\productimage.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\productimage.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":30,"column":2}},"2":{"start":{"line":15,"column":6},"end":{"line":17,"column":9}},"3":{"start":{"line":20,"column":2},"end":{"line":28,"column":5}},"4":{"start":{"line":29,"column":2},"end":{"line":29,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":30,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":18,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","ProductImage","associate","models","belongsTo","Product","foreignKey","init","prodImage","STRING","productId","UUID","status","cloudinaryId","modelName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["productimage.js"],"sourcesContent":["'use strict';\r\nconst {\r\n  Model\r\n} = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class ProductImage extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n      this.belongsTo(models.Product, {foreignKey: 'productId'})\r\n    }\r\n  }\r\n  ProductImage.init({\r\n    prodImage: DataTypes.STRING,\r\n    productId:  DataTypes.UUID,\r\n    status: DataTypes.STRING,\r\n    cloudinaryId: DataTypes.STRING\r\n  }, {\r\n    sequelize,\r\n    modelName: 'ProductImage',\r\n  });\r\n  return ProductImage;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACxBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,YAAY,SAASN,KAAK,CAAC;IAC/B;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACA,IAAI,CAACC,SAAS,CAACD,MAAM,CAACE,OAAO,EAAE;QAACC,UAAU,EAAE;MAAW,CAAC,CAAC;IAC3D;EACF;EACAL,YAAY,CAACM,IAAI,CAAC;IAChBC,SAAS,EAAER,SAAS,CAACS,MAAM;IAC3BC,SAAS,EAAGV,SAAS,CAACW,IAAI;IAC1BC,MAAM,EAAEZ,SAAS,CAACS,MAAM;IACxBI,YAAY,EAAEb,SAAS,CAACS;EAC1B,CAAC,EAAE;IACDV,SAAS;IACTe,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOb,YAAY;AACrB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f7f52ec7b129c76753e578c673798d487d855f38","contentHash":"225314f22be31f3953cb6d4eeda7422e65fa46c117ed6f92f21987d5d2666f63"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\productrating.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\productrating.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":27,"column":2}},"2":{"start":{"line":17,"column":2},"end":{"line":25,"column":5}},"3":{"start":{"line":26,"column":2},"end":{"line":26,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":27,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":15,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","ProductRating","associate","models","init","rating","INTEGER","comment","TEXT","productId","UUID","userId","modelName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["productrating.js"],"sourcesContent":["'use strict';\r\nconst {\r\n  Model\r\n} = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class ProductRating extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n    }\r\n  }\r\n  ProductRating.init({\r\n    rating: DataTypes.INTEGER,\r\n    comment: DataTypes.TEXT,\r\n    productId: DataTypes.UUID,\r\n    userId: DataTypes.UUID\r\n  }, {\r\n    sequelize,\r\n    modelName: 'ProductRating',\r\n  });\r\n  return ProductRating;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACxBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,aAAa,SAASN,KAAK,CAAC;IAChC;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;IAAA;EAEJ;EACAF,aAAa,CAACG,IAAI,CAAC;IACjBC,MAAM,EAAEL,SAAS,CAACM,OAAO;IACzBC,OAAO,EAAEP,SAAS,CAACQ,IAAI;IACvBC,SAAS,EAAET,SAAS,CAACU,IAAI;IACzBC,MAAM,EAAEX,SAAS,CAACU;EACpB,CAAC,EAAE;IACDX,SAAS;IACTa,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOX,aAAa;AACtB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"12036ae1e43f5a394df7e7bc99cf75120aa1438e","contentHash":"aae2e22f5796b5a7b9a924210ed48f7859b76a9be1f16481c0f38a3487b1b123"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\role.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\role.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":35,"column":2}},"2":{"start":{"line":15,"column":6},"end":{"line":17,"column":9}},"3":{"start":{"line":18,"column":6},"end":{"line":20,"column":9}},"4":{"start":{"line":23,"column":2},"end":{"line":33,"column":5}},"5":{"start":{"line":34,"column":2},"end":{"line":34,"column":14}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":35,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":21,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","role","associate","models","hasMany","user","foreignKey","belongsToMany","permission","through","rolePermission","init","name","allowNull","type","STRING","modelName","tableName","timestamps"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["role.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class role extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n      role.hasMany(models.user, { foreignKey: 'roleId'});\r\n          role.belongsToMany(models.permission, {\r\n            through: models.rolePermission,\r\n          });\r\n    }\r\n  }\r\n  role.init(\r\n    {\r\n      name: { allowNull: false, type: DataTypes.STRING },\r\n    },\r\n    {\r\n      sequelize,\r\n      modelName: 'role',\r\n      tableName: 'roles',\r\n      timestamps: false,\r\n    }\r\n  );\r\n  return role;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,IAAI,SAASN,KAAK,CAAC;IACvB;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACAF,IAAI,CAACG,OAAO,CAACD,MAAM,CAACE,IAAI,EAAE;QAAEC,UAAU,EAAE;MAAQ,CAAC,CAAC;MAC9CL,IAAI,CAACM,aAAa,CAACJ,MAAM,CAACK,UAAU,EAAE;QACpCC,OAAO,EAAEN,MAAM,CAACO;MAClB,CAAC,CAAC;IACR;EACF;EACAT,IAAI,CAACU,IAAI,CACP;IACEC,IAAI,EAAE;MAAEC,SAAS,EAAE,KAAK;MAAEC,IAAI,EAAEd,SAAS,CAACe;IAAO;EACnD,CAAC,EACD;IACEhB,SAAS;IACTiB,SAAS,EAAE,MAAM;IACjBC,SAAS,EAAE,OAAO;IAClBC,UAAU,EAAE;EACd,CAAC,CACF;EACD,OAAOjB,IAAI;AACb,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b30acbbcce7cdc933d7e8a315ad4911e8a0a7258","contentHash":"8bca6f40263e8cac0c8ffa85e2f68c46c93f2b49458eeea185319a7cf788c318"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\rolepermission.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\rolepermission.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":13},"end":{"line":6,"column":30}},"2":{"start":{"line":7,"column":0},"end":{"line":25,"column":2}},"3":{"start":{"line":18,"column":2},"end":{"line":23,"column":5}},"4":{"start":{"line":24,"column":2},"end":{"line":24,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":18}},"loc":{"start":{"line":7,"column":43},"end":{"line":25,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":29},"end":{"line":16,"column":5}},"line":14}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","role","module","exports","sequelize","DataTypes","rolePermission","associate","models","init","modelName","tableName","timestamps"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["rolepermission.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nconst role = require('./role');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class rolePermission extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n\r\n    }\r\n  }\r\n  rolePermission.init(\r\n    {\r\n      \r\n    },\r\n    {\r\n      sequelize,\r\n      modelName: 'rolePermission',\r\n      tableName: 'rolePermissions',\r\n      timestamps: false,\r\n    }\r\n  );\r\n  return rolePermission;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtC,MAAMC,IAAI,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAC9BE,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,cAAc,SAASP,KAAK,CAAC;IACjC;AACJ;AACA;AACA;AACA;IACI,OAAOQ,SAASA,CAACC,MAAM,EAAE;MACvB;IAAA;EAGJ;EACAF,cAAc,CAACG,IAAI,CACjB,CAEA,CAAC,EACD;IACEL,SAAS;IACTM,SAAS,EAAE,gBAAgB;IAC3BC,SAAS,EAAE,iBAAiB;IAC5BC,UAAU,EAAE;EACd,CAAC,CACF;EACD,OAAON,cAAc;AACvB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"876c11d744059959107fccec27423d96f93942f7","contentHash":"4f154b37390a21f8de142b9dd623e9357264b633e98e5fa461e9958024207cf9"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\shoppingcarts.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\shoppingcarts.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":34,"column":2}},"2":{"start":{"line":15,"column":6},"end":{"line":17,"column":9}},"3":{"start":{"line":18,"column":6},"end":{"line":20,"column":9}},"4":{"start":{"line":23,"column":2},"end":{"line":32,"column":5}},"5":{"start":{"line":33,"column":2},"end":{"line":33,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":34,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":21,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","shoppingCarts","associate","models","belongsTo","user","foreignKey","ProductAttribute","init","buyer","UUID","product","INTEGER","quantity","totalpricePerProduct","cartStatus","modelName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["shoppingcarts.js"],"sourcesContent":["'use strict';\r\nconst {\r\n  Model\r\n} = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class shoppingCarts extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n      this.belongsTo(models.user, { foreignKey: 'buyer' });\r\n      this.belongsTo(models.ProductAttribute, { foreignKey: 'product' });\r\n    }\r\n  }\r\n  shoppingCarts.init({\r\n    buyer: DataTypes.UUID,\r\n    product: DataTypes.INTEGER,\r\n    quantity: DataTypes.INTEGER,\r\n    totalpricePerProduct:DataTypes.INTEGER,\r\n    cartStatus:DataTypes.INTEGER\r\n  }, {\r\n    sequelize,\r\n    modelName: 'shoppingCarts',\r\n  });\r\n  return shoppingCarts;\r\n};"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EACJA;AACF,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACxBC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,aAAa,SAASN,KAAK,CAAC;IAChC;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACA,IAAI,CAACC,SAAS,CAACD,MAAM,CAACE,IAAI,EAAE;QAAEC,UAAU,EAAE;MAAQ,CAAC,CAAC;MACpD,IAAI,CAACF,SAAS,CAACD,MAAM,CAACI,gBAAgB,EAAE;QAAED,UAAU,EAAE;MAAU,CAAC,CAAC;IACpE;EACF;EACAL,aAAa,CAACO,IAAI,CAAC;IACjBC,KAAK,EAAET,SAAS,CAACU,IAAI;IACrBC,OAAO,EAAEX,SAAS,CAACY,OAAO;IAC1BC,QAAQ,EAAEb,SAAS,CAACY,OAAO;IAC3BE,oBAAoB,EAACd,SAAS,CAACY,OAAO;IACtCG,UAAU,EAACf,SAAS,CAACY;EACvB,CAAC,EAAE;IACDb,SAAS;IACTiB,SAAS,EAAE;EACb,CAAC,CAAC;EACF,OAAOf,aAAa;AACtB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e94533713c1ee0971254a4376ef92a35e62ce604","contentHash":"69c114d3d1fb8b26f748b1790b732d9e5822e9e17680af640df97d874f15dfa1"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\user.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\user.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":84,"column":2}},"2":{"start":{"line":15,"column":6},"end":{"line":17,"column":9}},"3":{"start":{"line":20,"column":2},"end":{"line":82,"column":5}},"4":{"start":{"line":83,"column":2},"end":{"line":83,"column":14}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":84,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":18,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","user","associate","models","belongsTo","role","foreignKey","init","id","type","UUID","primaryKey","allowNull","defaultValue","UUIDV4","firstname","STRING","validate","isAlpha","lastname","email","unique","isEmail","password","lastPasswordUpdate","DATE","NOW","phone","adress","dateofbirth","gender","status","roleId","INTEGER","modelName","tableName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["user.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class user extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n      user.belongsTo(models.role, { foreignKey: 'roleId' });\r\n    }\r\n  }\r\n  user.init(\r\n    {\r\n      id: {\r\n        type: DataTypes.UUID,\r\n        primaryKey: true,\r\n        allowNull: false,\r\n        defaultValue: require('sequelize').UUIDV4,\r\n      },\r\n      firstname: {\r\n        type: DataTypes.STRING,\r\n        allowNull: false,\r\n        validate: {\r\n          isAlpha: true,\r\n        },\r\n      },\r\n      lastname: {\r\n        type: DataTypes.STRING,\r\n        allowNull: false,\r\n        validate: {\r\n          isAlpha: true,\r\n        },\r\n      },\r\n      email: {\r\n        type: DataTypes.STRING,\r\n        allowNull: false,\r\n        unique: true,\r\n        validate: {\r\n          isEmail: true,\r\n        },\r\n      },\r\n      password: {\r\n        type: DataTypes.STRING,\r\n      },\r\n      lastPasswordUpdate: {\r\n        type: DataTypes.DATE,\r\n        defaultValue: DataTypes.NOW,\r\n      },\r\n      phone: {\r\n        type: DataTypes.STRING,\r\n        allowNull: false,\r\n      },\r\n      adress: {\r\n        type: DataTypes.STRING,\r\n      },\r\n      dateofbirth: {\r\n         type: DataTypes.STRING,\r\n      },\r\n      gender: {\r\n         type: DataTypes.STRING,\r\n      },\r\n      status: {\r\n        type: DataTypes.STRING,\r\n        allowNull: false,\r\n        defaultValue: 'active',\r\n      },\r\n      roleId: {\r\n        type: DataTypes.INTEGER,\r\n        allowNull: false,\r\n      },\r\n    },\r\n    {\r\n      sequelize,\r\n      modelName: 'user',\r\n      tableName: 'users',\r\n    }\r\n  );\r\n\r\n  return user;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,IAAI,SAASN,KAAK,CAAC;IACvB;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;MACAF,IAAI,CAACG,SAAS,CAACD,MAAM,CAACE,IAAI,EAAE;QAAEC,UAAU,EAAE;MAAS,CAAC,CAAC;IACvD;EACF;EACAL,IAAI,CAACM,IAAI,CACP;IACEC,EAAE,EAAE;MACFC,IAAI,EAAET,SAAS,CAACU,IAAI;MACpBC,UAAU,EAAE,IAAI;MAChBC,SAAS,EAAE,KAAK;MAChBC,YAAY,EAAEjB,OAAO,CAAC,WAAW,CAAC,CAACkB;IACrC,CAAC;IACDC,SAAS,EAAE;MACTN,IAAI,EAAET,SAAS,CAACgB,MAAM;MACtBJ,SAAS,EAAE,KAAK;MAChBK,QAAQ,EAAE;QACRC,OAAO,EAAE;MACX;IACF,CAAC;IACDC,QAAQ,EAAE;MACRV,IAAI,EAAET,SAAS,CAACgB,MAAM;MACtBJ,SAAS,EAAE,KAAK;MAChBK,QAAQ,EAAE;QACRC,OAAO,EAAE;MACX;IACF,CAAC;IACDE,KAAK,EAAE;MACLX,IAAI,EAAET,SAAS,CAACgB,MAAM;MACtBJ,SAAS,EAAE,KAAK;MAChBS,MAAM,EAAE,IAAI;MACZJ,QAAQ,EAAE;QACRK,OAAO,EAAE;MACX;IACF,CAAC;IACDC,QAAQ,EAAE;MACRd,IAAI,EAAET,SAAS,CAACgB;IAClB,CAAC;IACDQ,kBAAkB,EAAE;MAClBf,IAAI,EAAET,SAAS,CAACyB,IAAI;MACpBZ,YAAY,EAAEb,SAAS,CAAC0B;IAC1B,CAAC;IACDC,KAAK,EAAE;MACLlB,IAAI,EAAET,SAAS,CAACgB,MAAM;MACtBJ,SAAS,EAAE;IACb,CAAC;IACDgB,MAAM,EAAE;MACNnB,IAAI,EAAET,SAAS,CAACgB;IAClB,CAAC;IACDa,WAAW,EAAE;MACVpB,IAAI,EAAET,SAAS,CAACgB;IACnB,CAAC;IACDc,MAAM,EAAE;MACLrB,IAAI,EAAET,SAAS,CAACgB;IACnB,CAAC;IACDe,MAAM,EAAE;MACNtB,IAAI,EAAET,SAAS,CAACgB,MAAM;MACtBJ,SAAS,EAAE,KAAK;MAChBC,YAAY,EAAE;IAChB,CAAC;IACDmB,MAAM,EAAE;MACNvB,IAAI,EAAET,SAAS,CAACiC,OAAO;MACvBrB,SAAS,EAAE;IACb;EACF,CAAC,EACD;IACEb,SAAS;IACTmC,SAAS,EAAE,MAAM;IACjBC,SAAS,EAAE;EACb,CAAC,CACF;EAED,OAAOlC,IAAI;AACb,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ef1d7ff5300e2e608d0f905031b18f42d5fa4e8d","contentHash":"00b2aaabc5a8fddcbd2244fb435ea410be4c1d1af54b68c5f78f4a9abdfb2928"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\wishlist.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\wishlist.js","statementMap":{"0":{"start":{"line":5,"column":4},"end":{"line":5,"column":24}},"1":{"start":{"line":6,"column":0},"end":{"line":25,"column":2}},"2":{"start":{"line":17,"column":2},"end":{"line":23,"column":5}},"3":{"start":{"line":24,"column":2},"end":{"line":24,"column":18}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":18}},"loc":{"start":{"line":6,"column":43},"end":{"line":25,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":29},"end":{"line":15,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"names":["Model","require","module","exports","sequelize","DataTypes","wishlist","associate","models","init","userId","STRING","productId","ARRAY","modelName"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\database\\models\\","sources":["wishlist.js"],"sourcesContent":["'use strict';\r\nconst { Model } = require('sequelize');\r\nmodule.exports = (sequelize, DataTypes) => {\r\n  class wishlist extends Model {\r\n    /**\r\n     * Helper method for defining associations.\r\n     * This method is not a part of Sequelize lifecycle.\r\n     * The `models/index` file will call this method automatically.\r\n     */\r\n    static associate(models) {\r\n      // define association here\r\n    }\r\n  }\r\n  wishlist.init(\r\n    {\r\n      userId: DataTypes.STRING,\r\n      productId: DataTypes.ARRAY(DataTypes.STRING),\r\n    },\r\n    {\r\n      sequelize,\r\n      modelName: 'wishlist',\r\n    }\r\n  );\r\n  return wishlist;\r\n};\r\n"],"mappings":"AAAA,YAAY;;AACZ,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtCC,MAAM,CAACC,OAAO,GAAG,CAACC,SAAS,EAAEC,SAAS,KAAK;EACzC,MAAMC,QAAQ,SAASN,KAAK,CAAC;IAC3B;AACJ;AACA;AACA;AACA;IACI,OAAOO,SAASA,CAACC,MAAM,EAAE;MACvB;IAAA;EAEJ;EACAF,QAAQ,CAACG,IAAI,CACX;IACEC,MAAM,EAAEL,SAAS,CAACM,MAAM;IACxBC,SAAS,EAAEP,SAAS,CAACQ,KAAK,CAACR,SAAS,CAACM,MAAM;EAC7C,CAAC,EACD;IACEP,SAAS;IACTU,SAAS,EAAE;EACb,CAAC,CACF;EACD,OAAOR,QAAQ;AACjB,CAAC"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e2d3c4f7be5d4482ae474a1257727d8057b73af3","contentHash":"f978049f7ab369db4155f86647fadbef41a2faab536e402a7a12173421a1b308"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\index.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"3":{"start":{"line":8,"column":12},"end":{"line":8,"column":60}},"4":{"start":{"line":9,"column":19},"end":{"line":9,"column":80}},"5":{"start":{"line":10,"column":18},"end":{"line":10,"column":78}},"6":{"start":{"line":11,"column":20},"end":{"line":11,"column":89}},"7":{"start":{"line":12,"column":20},"end":{"line":12,"column":82}},"8":{"start":{"line":13,"column":16},"end":{"line":13,"column":77}},"9":{"start":{"line":14,"column":22},"end":{"line":14,"column":89}},"10":{"start":{"line":15,"column":16},"end":{"line":15,"column":77}},"11":{"start":{"line":16,"column":13},"end":{"line":16,"column":78}},"12":{"start":{"line":17,"column":20},"end":{"line":17,"column":83}},"13":{"start":{"line":18,"column":13},"end":{"line":18,"column":60}},"14":{"start":{"line":19,"column":15},"end":{"line":19,"column":57}},"15":{"start":{"line":20,"column":24},"end":{"line":20,"column":77}},"16":{"start":{"line":21,"column":29},"end":{"line":21,"column":87}},"17":{"start":{"line":22,"column":14},"end":{"line":22,"column":72}},"18":{"start":{"line":23,"column":26},"end":{"line":23,"column":101}},"19":{"start":{"line":24,"column":14},"end":{"line":24,"column":34}},"20":{"start":{"line":25,"column":12},"end":{"line":25,"column":51}},"21":{"start":{"line":26,"column":12},"end":{"line":26,"column":51}},"22":{"start":{"line":27,"column":39},"end":{"line":27,"column":93}},"23":{"start":{"line":28,"column":0},"end":{"line":38,"column":3}},"24":{"start":{"line":39,"column":12},"end":{"line":39,"column":35}},"25":{"start":{"line":40,"column":0},"end":{"line":40,"column":30}},"26":{"start":{"line":41,"column":0},"end":{"line":41,"column":33}},"27":{"start":{"line":42,"column":0},"end":{"line":42,"column":65}},"28":{"start":{"line":45,"column":0},"end":{"line":45,"column":28}},"29":{"start":{"line":46,"column":0},"end":{"line":46,"column":24}},"30":{"start":{"line":47,"column":0},"end":{"line":47,"column":37}},"31":{"start":{"line":48,"column":0},"end":{"line":48,"column":30}},"32":{"start":{"line":49,"column":0},"end":{"line":49,"column":31}},"33":{"start":{"line":50,"column":0},"end":{"line":50,"column":40}},"34":{"start":{"line":51,"column":0},"end":{"line":51,"column":47}},"35":{"start":{"line":52,"column":0},"end":{"line":52,"column":50}},"36":{"start":{"line":53,"column":0},"end":{"line":53,"column":33}},"37":{"start":{"line":54,"column":0},"end":{"line":54,"column":31}},"38":{"start":{"line":55,"column":0},"end":{"line":55,"column":27}},"39":{"start":{"line":56,"column":0},"end":{"line":56,"column":44}},"40":{"start":{"line":57,"column":0},"end":{"line":61,"column":3}},"41":{"start":{"line":58,"column":2},"end":{"line":60,"column":5}},"42":{"start":{"line":62,"column":13},"end":{"line":62,"column":37}},"43":{"start":{"line":63,"column":15},"end":{"line":63,"column":46}},"44":{"start":{"line":64,"column":11},"end":{"line":66,"column":2}},"45":{"start":{"line":67,"column":0},"end":{"line":72,"column":3}},"46":{"start":{"line":68,"column":2},"end":{"line":68,"column":40}},"47":{"start":{"line":69,"column":2},"end":{"line":71,"column":5}},"48":{"start":{"line":70,"column":4},"end":{"line":70,"column":34}},"49":{"start":{"line":73,"column":0},"end":{"line":73,"column":29}},"50":{"start":{"line":74,"column":0},"end":{"line":79,"column":3}},"51":{"start":{"line":77,"column":2},"end":{"line":77,"column":27}},"52":{"start":{"line":78,"column":2},"end":{"line":78,"column":75}},"53":{"start":{"line":78,"column":28},"end":{"line":78,"column":73}},"54":{"start":{"line":80,"column":15},"end":{"line":80,"column":18}},"55":{"start":{"line":81,"column":0},"end":{"line":81,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":27,"column":9},"end":{"line":27,"column":31}},"loc":{"start":{"line":27,"column":37},"end":{"line":27,"column":95}},"line":27},"1":{"name":"(anonymous_1)","decl":{"start":{"line":57,"column":13},"end":{"line":57,"column":14}},"loc":{"start":{"line":57,"column":27},"end":{"line":61,"column":1}},"line":57},"2":{"name":"(anonymous_2)","decl":{"start":{"line":67,"column":20},"end":{"line":67,"column":21}},"loc":{"start":{"line":67,"column":30},"end":{"line":72,"column":1}},"line":67},"3":{"name":"(anonymous_3)","decl":{"start":{"line":69,"column":28},"end":{"line":69,"column":29}},"loc":{"start":{"line":69,"column":36},"end":{"line":71,"column":3}},"line":69},"4":{"name":"(anonymous_4)","decl":{"start":{"line":76,"column":8},"end":{"line":76,"column":9}},"loc":{"start":{"line":76,"column":20},"end":{"line":79,"column":1}},"line":76},"5":{"name":"(anonymous_5)","decl":{"start":{"line":78,"column":22},"end":{"line":78,"column":23}},"loc":{"start":{"line":78,"column":28},"end":{"line":78,"column":73}},"line":78}},"branchMap":{"0":{"loc":{"start":{"line":27,"column":46},"end":{"line":27,"column":92}},"type":"cond-expr","locations":[{"start":{"line":27,"column":70},"end":{"line":27,"column":73}},{"start":{"line":27,"column":76},"end":{"line":27,"column":92}}],"line":27},"1":{"loc":{"start":{"line":27,"column":46},"end":{"line":27,"column":67}},"type":"binary-expr","locations":[{"start":{"line":27,"column":46},"end":{"line":27,"column":49}},{"start":{"line":27,"column":53},"end":{"line":27,"column":67}}],"line":27},"2":{"loc":{"start":{"line":62,"column":13},"end":{"line":62,"column":37}},"type":"binary-expr","locations":[{"start":{"line":62,"column":13},"end":{"line":62,"column":29}},{"start":{"line":62,"column":33},"end":{"line":62,"column":37}}],"line":62}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":19,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":0,"47":0,"48":0,"49":1,"50":1,"51":0,"52":0,"53":0,"54":1,"55":1},"f":{"0":19,"1":1,"2":0,"3":0,"4":0,"5":0},"b":{"0":[13,6],"1":[19,19],"2":[1,1]},"inputSourceMap":{"version":3,"names":["_express","_interopRequireDefault","require","_root","_adminRoutes","_userRoutes","_google_oauth","_vendorRoutes","_category","_productsRoutes","_wishlist","_buyer","_couponRoutes","_index","_i18next","_i18nextFsBackend","_i18nextHttpMiddleware","_index2","_shoppingCartRoutes","_socket","_http","_cors","obj","__esModule","default","i18next","use","Backend","middleware","LanguageDetector","init","fallbackLng","backend","loadPath","interpolation","escapeValue","prefix","suffix","app","express","cors","json","handle","rootRouter","docs","CartRoutes","adminRouter","vendorRouter","userAuthRoutes","categoryRoutes","couponRoutes","productRoutes","google_auth","wishlistRoutes","buyerRoutes","all","req","res","status","error","t","PORT","process","env","server","http","createServer","io","Server","on","socket","console","log","data","emit","db","dbConnection","sequelize","sync","force","then","listen","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\","sources":["index.js"],"sourcesContent":["import express from 'express';\r\nimport rootRouter from './routes/root';\r\nimport adminRouter from './routes/users/adminRoutes';\r\nimport userAuthRoutes from './routes/users/userRoutes';\r\nimport google_auth from './routes/users/google_oauth.routes'\r\nimport vendorRouter from './routes/users/vendorRoutes';\r\nimport categoryRoutes from './routes/products/category'\r\nimport productRoutes from './routes/products/productsRoutes'\r\nimport wishlistRoutes from './routes/products/wishlist';\r\nimport buyerRoutes from './routes/products/buyer.routes'\r\nimport couponRoutes from './routes/coupon/couponRoutes';\r\nimport docs from './docs/index';\r\nimport i18next from 'i18next';\r\nimport Backend from 'i18next-fs-backend';\r\nimport middleware from 'i18next-http-middleware';\r\nimport db from './database/models/index';\r\nimport CartRoutes from './routes/shoppingCart/shoppingCartRoutes';\r\nimport { Server } from \"socket.io\";\r\nimport http from \"http\";\r\nimport cors from \"cors\";\r\n\r\ni18next\r\n  .use(Backend)\r\n  .use(middleware.LanguageDetector)\r\n  .init({\r\n    fallbackLng: 'en',\r\n    backend: {\r\n      loadPath: './src/locales/{{lng}}/translation.json',\r\n    },\r\n    interpolation: {\r\n      escapeValue: false,\r\n      prefix: '{{',\r\n      suffix: '}}'\r\n    }\r\n  });\r\nconst app = express();\r\napp.use(cors());\r\napp.use(express.json());\r\napp.use(middleware.handle(i18next));\r\n\r\n// routes\r\napp.use('/', rootRouter);\r\napp.use(docs);\r\napp.use(CartRoutes);\r\napp.use(adminRouter);\r\napp.use(vendorRouter);\r\napp.use('/api/v1', userAuthRoutes);\r\napp.use('/api/v1/category', categoryRoutes);\r\napp.use('/api/v1/coupons', couponRoutes);\r\napp.use(productRoutes);\r\napp.use(google_auth)\r\napp.use(wishlistRoutes)\r\napp.use('/api/v1/products',buyerRoutes)\r\n\r\n\r\napp.all('*', (req, res) => {\r\n  res.status(404).json({ error: req.t('404_error') });\r\n});\r\n\r\nconst PORT = process.env.PORT || 4000;\r\nconst server = http.createServer(app);\r\n\r\nconst io = new Server(server, {\r\n  cors: true\r\n});\r\nio.on(\"connection\", (socket) => {\r\n  console.log(\"A client has connected\");\r\n  socket.on(\"notification\", (data) => {\r\n    io.emit(\"notification\", data);\r\n  });\r\n});\r\n\r\ndb.dbConnection;\r\ndb.sequelize.sync({ force: false }).then(async () => {\r\n  console.log('DB synced');\r\n  server.listen(PORT, () => console.log(`Server running on port ${PORT}`));\r\n});\r\n\r\nexport default app;\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"81e8f4a58e553256034a26c7171830d572a9fba1","contentHash":"3b6fb06771dd67ab58d8a50477a0719c017336f399ee33066e01ac6c50fe09c5"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\root.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\root.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"3":{"start":{"line":8,"column":22},"end":{"line":8,"column":86}},"4":{"start":{"line":9,"column":39},"end":{"line":9,"column":93}},"5":{"start":{"line":10,"column":15},"end":{"line":10,"column":40}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":46}},"7":{"start":{"line":12,"column":15},"end":{"line":12,"column":21}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":31}},"loc":{"start":{"line":9,"column":37},"end":{"line":9,"column":95}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":92}},"type":"cond-expr","locations":[{"start":{"line":9,"column":70},"end":{"line":9,"column":73}},{"start":{"line":9,"column":76},"end":{"line":9,"column":92}}],"line":9},"1":{"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":67}},"type":"binary-expr","locations":[{"start":{"line":9,"column":46},"end":{"line":9,"column":49}},{"start":{"line":9,"column":53},"end":{"line":9,"column":67}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":1,"6":1,"7":1,"8":1},"f":{"0":2},"b":{"0":[1,1],"1":[2,2]},"inputSourceMap":{"version":3,"names":["_express","_interopRequireDefault","require","_rootController","obj","__esModule","default","router","express","Router","get","rootController","root","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\","sources":["root.js"],"sourcesContent":["import express from 'express';\r\nimport rootController from '../controllers/rootController';\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get('/', rootController.root);\r\n\r\nexport default router;\r\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,eAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA2D,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE3D,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/BF,MAAM,CAACG,GAAG,CAAC,GAAG,EAAEC,uBAAc,CAACC,IAAI,CAAC;AAAC,IAAAC,QAAA,GAEtBN,MAAM;AAAAO,OAAA,CAAAR,OAAA,GAAAO,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8cd1276b3e4947b68386db97340992ee13738661","contentHash":"f45c7076f574ad7a964d9662bb598a1788ecc538a1866f9c46d1f30c329a8178"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\rootController.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\rootController.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":11,"column":1}},"3":{"start":{"line":8,"column":22},"end":{"line":10,"column":4}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":27}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":8},"end":{"line":8,"column":9}},"loc":{"start":{"line":8,"column":22},"end":{"line":10,"column":4}},"line":8}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"names":["root","req","res","status","json","message","t","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\","sources":["rootController.js"],"sourcesContent":["export default {\r\n  root: (req, res) => res.status(200).json({ message: req.t('hello_message') }),\r\n};\r\n"],"mappings":";;;;;;eAAe;EACbA,IAAI,EAAEA,CAACC,GAAG,EAAEC,GAAG,KAAKA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEC,OAAO,EAAEJ,GAAG,CAACK,CAAC,CAAC,eAAe;EAAE,CAAC;AAC9E,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8cc1a358d434ec8b0e54954b6e52cceaaca92fb8","contentHash":"b5db5e8823782ed5caa5ce826c49190df81e1b9156b43757ba58d78684d35a94"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\users\\adminRoutes.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\users\\adminRoutes.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"3":{"start":{"line":8,"column":24},"end":{"line":8,"column":74}},"4":{"start":{"line":9,"column":12},"end":{"line":9,"column":44}},"5":{"start":{"line":10,"column":24},"end":{"line":10,"column":75}},"6":{"start":{"line":11,"column":19},"end":{"line":11,"column":64}},"7":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"8":{"start":{"line":13,"column":15},"end":{"line":13,"column":40}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":60}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":63}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":109}},"12":{"start":{"line":17,"column":0},"end":{"line":17,"column":115}},"13":{"start":{"line":18,"column":0},"end":{"line":18,"column":63}},"14":{"start":{"line":19,"column":0},"end":{"line":19,"column":116}},"15":{"start":{"line":20,"column":0},"end":{"line":20,"column":113}},"16":{"start":{"line":21,"column":0},"end":{"line":21,"column":111}},"17":{"start":{"line":22,"column":15},"end":{"line":22,"column":21}},"18":{"start":{"line":23,"column":0},"end":{"line":23,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"names":["_express","_interopRequireDefault","require","_loginControllers","_auth","_adminControllers","_user_status","obj","__esModule","default","router","express","Router","post","login","verifyOTP","get","auth","isUserEnabled","getAllUsers","getSingleUser","createAdmin","delete","deleteUsers","put","disableUser","enableUser","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\users\\","sources":["adminRoutes.js"],"sourcesContent":["import express from 'express';\r\nimport { login, verifyOTP } from '../../controllers/Auth/loginControllers';\r\nimport { auth } from '../../middleware/auth';\r\nimport { isUserEnabled } from '../../middleware/auth';\r\nimport {\r\n  getAllUsers,\r\n  createAdmin,\r\n  deleteUsers,\r\n  getSingleUser,\r\n} from '../../controllers/users/adminControllers';\r\nimport { disableUser, enableUser } from '../../controllers/Auth/user_status';\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post('/api/v1/users/login', login);\r\nrouter.post('/api/vendor/verify', verifyOTP);\r\nrouter.get('/api/admin/users', auth('admin'), isUserEnabled, getAllUsers);\r\nrouter.get('/api/admin/users/:id', auth('admin'), isUserEnabled, getSingleUser);\r\nrouter.post('/api/admin/users', createAdmin);\r\nrouter.delete(\r\n  '/api/admin/users/:id',\r\n  auth('admin'),\r\n  isUserEnabled,\r\n  deleteUsers\r\n);\r\nrouter.put(\r\n  '/api/v1/users/:id/disable',\r\n  auth('admin'),\r\n  isUserEnabled,\r\n  disableUser\r\n);\r\nrouter.put(\r\n  '/api/v1/users/:id/enable',\r\n  auth('admin'),\r\n  isUserEnabled,\r\n  enableUser\r\n);\r\n\r\nexport default router;\r\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,iBAAA,GAAAD,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AAEA,IAAAG,iBAAA,GAAAH,OAAA;AAMA,IAAAI,YAAA,GAAAJ,OAAA;AAA6E,SAAAD,uBAAAM,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE7E,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/BF,MAAM,CAACG,IAAI,CAAC,qBAAqB,EAAEC,uBAAK,CAAC;AACzCJ,MAAM,CAACG,IAAI,CAAC,oBAAoB,EAAEE,2BAAS,CAAC;AAC5CL,MAAM,CAACM,GAAG,CAAC,kBAAkB,EAAE,IAAAC,UAAI,EAAC,OAAO,CAAC,EAAEC,mBAAa,EAAEC,6BAAW,CAAC;AACzET,MAAM,CAACM,GAAG,CAAC,sBAAsB,EAAE,IAAAC,UAAI,EAAC,OAAO,CAAC,EAAEC,mBAAa,EAAEE,+BAAa,CAAC;AAC/EV,MAAM,CAACG,IAAI,CAAC,kBAAkB,EAAEQ,6BAAW,CAAC;AAC5CX,MAAM,CAACY,MAAM,CACX,sBAAsB,EACtB,IAAAL,UAAI,EAAC,OAAO,CAAC,EACbC,mBAAa,EACbK,6BAAW,CACZ;AACDb,MAAM,CAACc,GAAG,CACR,2BAA2B,EAC3B,IAAAP,UAAI,EAAC,OAAO,CAAC,EACbC,mBAAa,EACbO,wBAAW,CACZ;AACDf,MAAM,CAACc,GAAG,CACR,0BAA0B,EAC1B,IAAAP,UAAI,EAAC,OAAO,CAAC,EACbC,mBAAa,EACbQ,uBAAU,CACX;AAAC,IAAAC,QAAA,GAEajB,MAAM;AAAAkB,OAAA,CAAAnB,OAAA,GAAAkB,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6b2a9729ce3983c7ed0d9501c153a864a05d5f6c","contentHash":"93a2d93a3886f6266303b00205a0ff143bd2ab483eb18bff054aad652ae8eb91"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\loginControllers.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\loginControllers.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":43}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":17},"end":{"line":8,"column":61}},"4":{"start":{"line":9,"column":20},"end":{"line":9,"column":67}},"5":{"start":{"line":10,"column":14},"end":{"line":10,"column":55}},"6":{"start":{"line":11,"column":14},"end":{"line":11,"column":55}},"7":{"start":{"line":12,"column":22},"end":{"line":12,"column":59}},"8":{"start":{"line":13,"column":30},"end":{"line":13,"column":75}},"9":{"start":{"line":14,"column":17},"end":{"line":14,"column":73}},"10":{"start":{"line":15,"column":27},"end":{"line":15,"column":81}},"11":{"start":{"line":16,"column":21},"end":{"line":16,"column":57}},"12":{"start":{"line":17,"column":39},"end":{"line":17,"column":93}},"13":{"start":{"line":18,"column":0},"end":{"line":18,"column":25}},"14":{"start":{"line":19,"column":14},"end":{"line":151,"column":2}},"15":{"start":{"line":20,"column":17},"end":{"line":20,"column":37}},"16":{"start":{"line":24,"column":6},"end":{"line":24,"column":14}},"17":{"start":{"line":25,"column":16},"end":{"line":25,"column":68}},"18":{"start":{"line":26,"column":2},"end":{"line":150,"column":3}},"19":{"start":{"line":27,"column":17},"end":{"line":31,"column":6}},"20":{"start":{"line":32,"column":4},"end":{"line":37,"column":5}},"21":{"start":{"line":33,"column":6},"end":{"line":36,"column":9}},"22":{"start":{"line":38,"column":22},"end":{"line":38,"column":33}},"23":{"start":{"line":39,"column":4},"end":{"line":44,"column":5}},"24":{"start":{"line":40,"column":6},"end":{"line":43,"column":9}},"25":{"start":{"line":48,"column":8},"end":{"line":48,"column":12}},"26":{"start":{"line":49,"column":29},"end":{"line":49,"column":96}},"27":{"start":{"line":50,"column":17},"end":{"line":54,"column":6}},"28":{"start":{"line":55,"column":4},"end":{"line":55,"column":30}},"29":{"start":{"line":56,"column":4},"end":{"line":61,"column":5}},"30":{"start":{"line":57,"column":6},"end":{"line":60,"column":9}},"31":{"start":{"line":62,"column":18},"end":{"line":66,"column":6}},"32":{"start":{"line":67,"column":4},"end":{"line":67,"column":27}},"33":{"start":{"line":68,"column":4},"end":{"line":149,"column":5}},"34":{"start":{"line":70,"column":29},"end":{"line":79,"column":9}},"35":{"start":{"line":80,"column":8},"end":{"line":80,"column":52}},"36":{"start":{"line":81,"column":8},"end":{"line":86,"column":11}},"37":{"start":{"line":87,"column":8},"end":{"line":87,"column":14}},"38":{"start":{"line":90,"column":23},"end":{"line":92,"column":10}},"39":{"start":{"line":94,"column":25},"end":{"line":99,"column":10}},"40":{"start":{"line":101,"column":21},"end":{"line":101,"column":54}},"41":{"start":{"line":102,"column":28},"end":{"line":102,"column":70}},"42":{"start":{"line":103,"column":28},"end":{"line":124,"column":9}},"43":{"start":{"line":126,"column":8},"end":{"line":126,"column":51}},"44":{"start":{"line":128,"column":29},"end":{"line":128,"column":72}},"45":{"start":{"line":129,"column":8},"end":{"line":129,"column":114}},"46":{"start":{"line":130,"column":8},"end":{"line":140,"column":9}},"47":{"start":{"line":131,"column":10},"end":{"line":135,"column":13}},"48":{"start":{"line":137,"column":10},"end":{"line":139,"column":13}},"49":{"start":{"line":141,"column":8},"end":{"line":141,"column":14}},"50":{"start":{"line":143,"column":8},"end":{"line":148,"column":11}},"51":{"start":{"line":153,"column":0},"end":{"line":153,"column":22}},"52":{"start":{"line":154,"column":18},"end":{"line":209,"column":2}},"53":{"start":{"line":157,"column":6},"end":{"line":157,"column":14}},"54":{"start":{"line":159,"column":2},"end":{"line":208,"column":3}},"55":{"start":{"line":160,"column":24},"end":{"line":160,"column":60}},"56":{"start":{"line":161,"column":20},"end":{"line":161,"column":72}},"57":{"start":{"line":162,"column":24},"end":{"line":162,"column":44}},"58":{"start":{"line":164,"column":4},"end":{"line":164,"column":66}},"59":{"start":{"line":166,"column":25},"end":{"line":166,"column":77}},"60":{"start":{"line":167,"column":26},"end":{"line":167,"column":49}},"61":{"start":{"line":168,"column":20},"end":{"line":168,"column":91}},"62":{"start":{"line":169,"column":4},"end":{"line":203,"column":5}},"63":{"start":{"line":170,"column":6},"end":{"line":198,"column":7}},"64":{"start":{"line":171,"column":8},"end":{"line":173,"column":11}},"65":{"start":{"line":175,"column":8},"end":{"line":175,"column":19}},"66":{"start":{"line":176,"column":8},"end":{"line":176,"column":71}},"67":{"start":{"line":177,"column":21},"end":{"line":181,"column":10}},"68":{"start":{"line":182,"column":21},"end":{"line":186,"column":10}},"69":{"start":{"line":187,"column":22},"end":{"line":191,"column":10}},"70":{"start":{"line":192,"column":8},"end":{"line":197,"column":11}},"71":{"start":{"line":200,"column":6},"end":{"line":202,"column":9}},"72":{"start":{"line":205,"column":4},"end":{"line":207,"column":7}},"73":{"start":{"line":210,"column":0},"end":{"line":210,"column":30}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":31}},"loc":{"start":{"line":17,"column":37},"end":{"line":17,"column":95}},"line":17},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":56},"end":{"line":19,"column":57}},"loc":{"start":{"line":19,"column":76},"end":{"line":151,"column":1}},"line":19},"2":{"name":"(anonymous_2)","decl":{"start":{"line":154,"column":60},"end":{"line":154,"column":61}},"loc":{"start":{"line":154,"column":80},"end":{"line":209,"column":1}},"line":154}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":46},"end":{"line":17,"column":92}},"type":"cond-expr","locations":[{"start":{"line":17,"column":70},"end":{"line":17,"column":73}},{"start":{"line":17,"column":76},"end":{"line":17,"column":92}}],"line":17},"1":{"loc":{"start":{"line":17,"column":46},"end":{"line":17,"column":67}},"type":"binary-expr","locations":[{"start":{"line":17,"column":46},"end":{"line":17,"column":49}},{"start":{"line":17,"column":53},"end":{"line":17,"column":67}}],"line":17},"2":{"loc":{"start":{"line":26,"column":2},"end":{"line":150,"column":3}},"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":150,"column":3}},{"start":{"line":26,"column":2},"end":{"line":150,"column":3}}],"line":26},"3":{"loc":{"start":{"line":32,"column":4},"end":{"line":37,"column":5}},"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":37,"column":5}},{"start":{"line":32,"column":4},"end":{"line":37,"column":5}}],"line":32},"4":{"loc":{"start":{"line":39,"column":4},"end":{"line":44,"column":5}},"type":"if","locations":[{"start":{"line":39,"column":4},"end":{"line":44,"column":5}},{"start":{"line":39,"column":4},"end":{"line":44,"column":5}}],"line":39},"5":{"loc":{"start":{"line":56,"column":4},"end":{"line":61,"column":5}},"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":61,"column":5}},{"start":{"line":56,"column":4},"end":{"line":61,"column":5}}],"line":56},"6":{"loc":{"start":{"line":68,"column":4},"end":{"line":149,"column":5}},"type":"switch","locations":[{"start":{"line":69,"column":6},"end":{"line":87,"column":14}},{"start":{"line":88,"column":6},"end":{"line":141,"column":14}},{"start":{"line":142,"column":6},"end":{"line":148,"column":11}}],"line":68},"7":{"loc":{"start":{"line":130,"column":8},"end":{"line":140,"column":9}},"type":"if","locations":[{"start":{"line":130,"column":8},"end":{"line":140,"column":9}},{"start":{"line":130,"column":8},"end":{"line":140,"column":9}}],"line":130},"8":{"loc":{"start":{"line":159,"column":2},"end":{"line":208,"column":3}},"type":"if","locations":[{"start":{"line":159,"column":2},"end":{"line":208,"column":3}},{"start":{"line":159,"column":2},"end":{"line":208,"column":3}}],"line":159},"9":{"loc":{"start":{"line":164,"column":4},"end":{"line":164,"column":65}},"type":"cond-expr","locations":[{"start":{"line":164,"column":23},"end":{"line":164,"column":50}},{"start":{"line":164,"column":53},"end":{"line":164,"column":65}}],"line":164},"10":{"loc":{"start":{"line":169,"column":4},"end":{"line":203,"column":5}},"type":"if","locations":[{"start":{"line":169,"column":4},"end":{"line":203,"column":5}},{"start":{"line":169,"column":4},"end":{"line":203,"column":5}}],"line":169},"11":{"loc":{"start":{"line":170,"column":6},"end":{"line":198,"column":7}},"type":"if","locations":[{"start":{"line":170,"column":6},"end":{"line":198,"column":7}},{"start":{"line":170,"column":6},"end":{"line":198,"column":7}}],"line":170}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":6,"13":1,"14":1,"15":5,"16":5,"17":5,"18":5,"19":5,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":1,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":1},"f":{"0":6,"1":5,"2":0},"b":{"0":[1,5],"1":[6,6],"2":[5,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_speakeasy","_jsonwebtoken","_bcrypt","_dotenv","_verifyPassword","_handlingTryCatchBlocks","_sendEmail","_handlingEmptyFields","_handleCookies","obj","__esModule","default","dotenv","config","login","asyncWrapper","req","res","nodenv","process","env","NODE_ENV","email","password","body","error","checkEmptyFields","user","db","findOne","where","status","json","t","message","is_active","firstname","lastname","verifyedPassword","comparePassword","role","id","roleId","name","token","signToken","emailContent","subject","APP_NAME","html","sendEmail","data","secret","speakeasy","generateSecret","length","OTPtoken","totp","base32","encoding","time","Math","floor","Date","now","step","salt","Bcrypt","genSalt","hashedToken","hash","mailOptions","encodedToken","Buffer","from","toString","handleCookies","exports","verifyOTP","verificationCode","headers","cookie","Cookiearray","trim","split","cookies","getCookieInfo","onloginToken","TimeUsed","timeUsed","decodedToken","incomingToken","isMatch","saveOTPusage","onloggingUserid"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\","sources":["loginControllers.js"],"sourcesContent":["import db from '../../database/models';\r\nimport speakeasy from 'speakeasy';\r\nimport JWT from 'jsonwebtoken';\r\nimport Bcrypt from 'bcrypt';\r\nimport dotenv from 'dotenv';\r\nimport { comparePassword, signToken } from '../../utils/verifyPassword';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport sendEmail from '../../utils/sendEmail';\r\nimport { checkEmptyFields } from '../../utils/validations/handlingEmptyFields';\r\nimport {\r\n  handleCookies,\r\n  getCookieInfo,\r\n  saveOTPuser,\r\n  saveOTPusage,\r\n} from '../../utils/handleCookies';\r\ndotenv.config();\r\nexport const login = asyncWrapper(async (req, res) => {\r\n  const nodenv = process.env.NODE_ENV;\r\n  const { email, password } = req.body;\r\n  const error = checkEmptyFields(req.body);\r\n  if (!error) {\r\n    const user = await db.user.findOne({\r\n      where: { email },\r\n    });\r\n    if (!user) {\r\n      return res.status(404).json({\r\n        status: req.t('fail'),\r\n        message: req.t('wrong_email'),\r\n      });\r\n    }\r\n    const is_active = user.status;\r\n    if (is_active === 'inactive') {\r\n      return res.status(401).json({\r\n        status: req.t('fail'),\r\n        message: req.t('user_disabled'),\r\n      });\r\n    }\r\n    const { firstname, lastname } = user;\r\n    const verifyedPassword = await comparePassword(password, user.password);\r\n    const role = await db.role.findOne({ where: { id: user.roleId } });\r\n    req.body.role = role.name;\r\n    if (!verifyedPassword) {\r\n      return res.status(404).json({\r\n        status: req.t('fail'),\r\n        message: req.t('wrong_password'),\r\n      });\r\n    }\r\n    const token = await signToken({\r\n      id: user.id,\r\n      role: role.name,\r\n      email: user.email,\r\n    });\r\n    req.body.token = token;\r\n    switch (role.name) {\r\n      case 'buyer':\r\n        const emailContent = {\r\n          email: email,\r\n          subject: ` Welcome to ${process.env.APP_NAME}`,\r\n          html: `<p> Thank you ${firstname} for logging into our app us keep enjoying our services </p>\r\n        <br>\r\n        <p> Welcome ${firstname} ${lastname}.</p>\r\n        <br>\r\n        <p>you are recieving this email because your subscribed to our app</p>\r\n        `,\r\n        };\r\n        await sendEmail(emailContent);\r\n        res.status(200).json({\r\n          status: req.t('success'),\r\n          data:user,\r\n          token,\r\n          role: role.name,\r\n        });\r\n        break;\r\n      case 'vendor':\r\n        //create two factor secrete\r\n        const secret = await speakeasy.generateSecret({ length: 15 });\r\n        //generate token\r\n        const OTPtoken = await speakeasy.totp({\r\n          secret: secret.base32,\r\n          encoding: 'base32',\r\n          time: Math.floor(Date.now() / 1000 / 90),\r\n          step: 90,\r\n        });\r\n        //create object to save 2fa token and corresponding\r\n        const salt = await Bcrypt.genSalt(10);\r\n        const hashedToken = await Bcrypt.hash(OTPtoken, salt);\r\n        const mailOptions = {\r\n          email: email,\r\n          subject: 'verification code',\r\n          html: `<table style=\"border-collapse:collapse;border-spacing:0;width:100%;min-width:100%\" width=\"100%\" height=\"auto\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#F0F0F0\">\r\n          <tbody><tr>\r\n          <td style=\"padding-top:54px;padding-bottom:42px\" align=\"center\">\r\n          <h2 style=\"color:#0090c6;font-size: xx-large;\">E-commerce ATLP-Legends project</h2>\r\n          </td>\r\n          </tr>\r\n          </tbody></table>\r\n          <p class=\"m_73160151937089879size-16\" style=\"Margin-top:0;Margin-bottom:0;font-size:16px;line-height:24px\" lang=\"x-size-16\"><strong><span style=\"color:#000000\">Congratulations for comming back our estemmed vendors! </span></strong></p><p style=\"Margin-top:20px;Margin-bottom:0\"><span style=\"color:#000000\">You are in safe hands.</span></p>\r\n          <p style=\"Margin-top:10px;Margin-bottom:0\"><span style=\"color:#000000\">Here at our ecommerce we have extensive experience in connecting customers to businesses.</span></p>\r\n          <p style=\"Margin-top:20px;Margin-bottom:20px\"><span style=\"color:#000000\">Thank you for sign in the system, kindly find your verification code below </span></p>\r\n          \r\n          <p style=\"Margin-top:0px;Margin-bottom:10px\"><span style=\"color:#000000\">log into your account with these credentials</span></p>\r\n          <div style=\"margin:0%;background:#fcfcfc;padding:1% 2%\">\r\n          <p><h4>Your verification code is: ${OTPtoken}</h6></p>\r\n          </div> \r\n          <h3>Best regards,</h3>\r\n          <h5><i>E-commerce ATLP-Legends project team</i></h5>    \r\n          `,\r\n        };\r\n        //mailer sender implemantation\r\n        await sendEmail(mailOptions);\r\n        //creating mail options object\r\n        const encodedToken = Buffer.from(hashedToken).toString('base64');\r\n        await handleCookies(\r\n          5,\r\n          'onloginToken',\r\n          encodedToken,\r\n          'onloggingUserid',\r\n          user.id,\r\n          res\r\n        );\r\n        if (nodenv === 'test') {\r\n          res.status(200).json({\r\n            user,\r\n            token,\r\n            role: role.name,\r\n          });\r\n        } else {\r\n          res.status(200).json({ message: req.t('code_sent') });\r\n        }\r\n        break;\r\n      default:\r\n        res.status(200).json({\r\n          status: req.t('success'),\r\n          data:user,\r\n          token,\r\n          role: role.name,\r\n        });\r\n    }\r\n  }\r\n});\r\n//verifiy vendor's verification codes grant access token to him\r\nexport const verifyOTP = asyncWrapper(async (req, res) => {\r\n  const { verificationCode } = req.body;\r\n  // checking existance of cookies\r\n  if (req.headers.cookie) {\r\n    const Cookiearray = req.headers.cookie.trim().split(';');\r\n    const cookies = await getCookieInfo(Cookiearray);\r\n    const hashedToken = cookies.onloginToken;\r\n    let TimeUsed;\r\n    cookies.timeUsed ? (TimeUsed = cookies.timeUsed) : (TimeUsed = 0);\r\n    //compare incomming token with created\r\n    const decodedToken = Buffer.from(hashedToken, 'base64').toString('utf-8');\r\n    const incomingToken = verificationCode.trim();\r\n    const isMatch = await comparePassword(incomingToken, decodedToken);\r\n    if (isMatch) {\r\n      if (TimeUsed > 0) {\r\n        res.status(401).json({ message: req.t('code_have_been_login_used') });\r\n      } else {\r\n        TimeUsed++;\r\n        saveOTPusage(4, 'timeUsed', TimeUsed, res);\r\n        const user = await db.user.findOne({\r\n          where: { id: cookies.onloggingUserid },\r\n        });\r\n        const role = await db.role.findOne({ where: { id: user.roleId } });\r\n        const token = await signToken({\r\n          id: user.id,\r\n          role: role.name,\r\n          email: user.email,\r\n        });\r\n        res\r\n          .status(200)\r\n          .json({ message: req.t('verified'), user, token, role: role.name });\r\n      }\r\n    } else {\r\n      res.status(500).json({ message: req.t('not_validated') });\r\n    }\r\n  } else {\r\n    res.status(403).json({ message: req.t('login') });\r\n  }\r\n});\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"43d364d3b61b9ec1fd9521948db32dd1585ac313","contentHash":"0316abafe3f4d4a8e5cd38768fe5b3800c5299e906d044553c4717fc7a15b0ac"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\verifyPassword.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\verifyPassword.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":74}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":55}},"3":{"start":{"line":8,"column":20},"end":{"line":8,"column":67}},"4":{"start":{"line":9,"column":14},"end":{"line":9,"column":55}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":25}},"7":{"start":{"line":12,"column":24},"end":{"line":15,"column":1}},"8":{"start":{"line":13,"column":17},"end":{"line":13,"column":72}},"9":{"start":{"line":14,"column":2},"end":{"line":14,"column":16}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":42}},"11":{"start":{"line":17,"column":18},"end":{"line":28,"column":1}},"12":{"start":{"line":18,"column":16},"end":{"line":18,"column":42}},"13":{"start":{"line":19,"column":2},"end":{"line":21,"column":3}},"14":{"start":{"line":20,"column":4},"end":{"line":20,"column":42}},"15":{"start":{"line":22,"column":17},"end":{"line":26,"column":4}},"16":{"start":{"line":27,"column":2},"end":{"line":27,"column":16}},"17":{"start":{"line":29,"column":0},"end":{"line":29,"column":30}},"18":{"start":{"line":30,"column":19},"end":{"line":39,"column":1}},"19":{"start":{"line":31,"column":2},"end":{"line":38,"column":3}},"20":{"start":{"line":32,"column":19},"end":{"line":34,"column":6}},"21":{"start":{"line":35,"column":4},"end":{"line":35,"column":18}},"22":{"start":{"line":37,"column":4},"end":{"line":37,"column":17}},"23":{"start":{"line":40,"column":0},"end":{"line":40,"column":32}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":24},"end":{"line":12,"column":25}},"loc":{"start":{"line":12,"column":60},"end":{"line":15,"column":1}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":18},"end":{"line":17,"column":19}},"loc":{"start":{"line":17,"column":32},"end":{"line":28,"column":1}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":30,"column":19},"end":{"line":30,"column":20}},"loc":{"start":{"line":30,"column":34},"end":{"line":39,"column":1}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10},"2":{"loc":{"start":{"line":19,"column":2},"end":{"line":21,"column":3}},"type":"if","locations":[{"start":{"line":19,"column":2},"end":{"line":21,"column":3}},{"start":{"line":19,"column":2},"end":{"line":21,"column":3}}],"line":19}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":3,"6":1,"7":1,"8":0,"9":0,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":1,"19":35,"20":35,"21":0,"22":35,"23":1},"f":{"0":3,"1":0,"2":0,"3":35},"b":{"0":[0,3],"1":[3,3],"2":[0,0]},"inputSourceMap":{"version":3,"names":["_bcrypt","_interopRequireDefault","require","_jsonwebtoken","_dotenv","obj","__esModule","default","dotenv","config","comparePassword","password","hashedPassword","result","bcrypt","compare","exports","signToken","user","expires","process","env","JWT_EXPIRES_IN","reason","PASS_EXPIRES_IN","jwt","sign","JWT_SECRET","expiresIn","checkToken","token","verify","error"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\","sources":["verifyPassword.js"],"sourcesContent":["import bcrypt from 'bcrypt';\r\nimport jwt from 'jsonwebtoken';\r\nimport dotenv from 'dotenv';\r\ndotenv.config();\r\nexport const comparePassword = async (password, hashedPassword) => {\r\n  const result = await bcrypt.compare(password, hashedPassword);\r\n  return result;\r\n};\r\nexport const signToken = async (user) => {\r\n  let expires = process.env.JWT_EXPIRES_IN;\r\n  if(user.reason === 'reset'){\r\n    expires = process.env.PASS_EXPIRES_IN;\r\n  }\r\n  const result = await jwt.sign({ user }, process.env.JWT_SECRET, {\r\n    expiresIn: expires,\r\n  });\r\n  return result;\r\n};\r\n\r\nexport const checkToken = async (token) => {\r\n try {\r\n   const result = await jwt.verify(token, process.env.JWT_SECRET, {\r\n     expiresIn: process.env.JWT_EXPIRES_IN,\r\n   });\r\n   return result;\r\n } catch (error) {\r\n    return false;\r\n }\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,aAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAC5BG,eAAM,CAACC,MAAM,EAAE;AACR,MAAMC,eAAe,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,cAAc,KAAK;EACjE,MAAMC,MAAM,GAAG,MAAMC,eAAM,CAACC,OAAO,CAACJ,QAAQ,EAAEC,cAAc,CAAC;EAC7D,OAAOC,MAAM;AACf,CAAC;AAACG,OAAA,CAAAN,eAAA,GAAAA,eAAA;AACK,MAAMO,SAAS,GAAG,MAAOC,IAAI,IAAK;EACvC,IAAIC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,cAAc;EACxC,IAAGJ,IAAI,CAACK,MAAM,KAAK,OAAO,EAAC;IACzBJ,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACG,eAAe;EACvC;EACA,MAAMX,MAAM,GAAG,MAAMY,qBAAG,CAACC,IAAI,CAAC;IAAER;EAAK,CAAC,EAAEE,OAAO,CAACC,GAAG,CAACM,UAAU,EAAE;IAC9DC,SAAS,EAAET;EACb,CAAC,CAAC;EACF,OAAON,MAAM;AACf,CAAC;AAACG,OAAA,CAAAC,SAAA,GAAAA,SAAA;AAEK,MAAMY,UAAU,GAAG,MAAOC,KAAK,IAAK;EAC1C,IAAI;IACF,MAAMjB,MAAM,GAAG,MAAMY,qBAAG,CAACM,MAAM,CAACD,KAAK,EAAEV,OAAO,CAACC,GAAG,CAACM,UAAU,EAAE;MAC7DC,SAAS,EAAER,OAAO,CAACC,GAAG,CAACC;IACzB,CAAC,CAAC;IACF,OAAOT,MAAM;EACf,CAAC,CAAC,OAAOmB,KAAK,EAAE;IACb,OAAO,KAAK;EACf;AACD,CAAC;AAAChB,OAAA,CAAAa,UAAA,GAAAA,UAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fb22e9e9214266ae2c1d40b9dc97d0634438fec1","contentHash":"32a8389c9145387a8fb4f8fdba02207fa51e30313b44b84ec43f9c606abfdb94"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\handlingTryCatchBlocks.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\handlingTryCatchBlocks.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"2":{"start":{"line":8,"column":21},"end":{"line":20,"column":1}},"3":{"start":{"line":9,"column":2},"end":{"line":19,"column":4}},"4":{"start":{"line":10,"column":4},"end":{"line":18,"column":5}},"5":{"start":{"line":11,"column":6},"end":{"line":11,"column":31}},"6":{"start":{"line":13,"column":6},"end":{"line":13,"column":23}},"7":{"start":{"line":14,"column":6},"end":{"line":17,"column":9}},"8":{"start":{"line":21,"column":0},"end":{"line":21,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":21},"end":{"line":8,"column":22}},"loc":{"start":{"line":8,"column":27},"end":{"line":20,"column":1}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":10}},"loc":{"start":{"line":9,"column":35},"end":{"line":19,"column":3}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":17},"end":{"line":16,"column":65}},"type":"cond-expr","locations":[{"start":{"line":16,"column":30},"end":{"line":16,"column":51}},{"start":{"line":16,"column":54},"end":{"line":16,"column":65}}],"line":16}},"s":{"0":1,"1":1,"2":1,"3":45,"4":14,"5":14,"6":14,"7":14,"8":1},"f":{"0":45,"1":14},"b":{"0":[0,14]},"inputSourceMap":{"version":3,"names":["asyncWrapper","fn","req","res","next","err","console","log","status","json","t","message","errors","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\","sources":["handlingTryCatchBlocks.js"],"sourcesContent":["//handling try catch block function\r\nexport const asyncWrapper = (fn) => {\r\n  return async (req, res, next) => {\r\n    try {\r\n      await fn(req, res, next);\r\n    } catch (err) {\r\n      console.log(err)\r\n      res.status(500).json({\r\n        status: req.t('fail'),\r\n        message: err.errors ? err.errors[0].message : err.message,\r\n      });\r\n    }\r\n  };\r\n};\r\n"],"mappings":";;;;;;AAAA;AACO,MAAMA,YAAY,GAAIC,EAAE,IAAK;EAClC,OAAO,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;IAC/B,IAAI;MACF,MAAMH,EAAE,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,CAAC;IAC1B,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChBF,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QACnBD,MAAM,EAAEN,GAAG,CAACQ,CAAC,CAAC,MAAM,CAAC;QACrBC,OAAO,EAAEN,GAAG,CAACO,MAAM,GAAGP,GAAG,CAACO,MAAM,CAAC,CAAC,CAAC,CAACD,OAAO,GAAGN,GAAG,CAACM;MACpD,CAAC,CAAC;IACJ;EACF,CAAC;AACH,CAAC;AAACE,OAAA,CAAAb,YAAA,GAAAA,YAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"427a087a7b04fb49757ff21176c977874e92a28d","contentHash":"e8035b40212b2dde926ff94a55493b2d490d23718a63aa4dd76fd1dfc64c8ccc"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\sendEmail.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\sendEmail.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":18},"end":{"line":7,"column":63}},"3":{"start":{"line":8,"column":14},"end":{"line":8,"column":55}},"4":{"start":{"line":9,"column":39},"end":{"line":9,"column":93}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":25}},"6":{"start":{"line":11,"column":18},"end":{"line":42,"column":1}},"7":{"start":{"line":12,"column":22},"end":{"line":18,"column":4}},"8":{"start":{"line":19,"column":18},"end":{"line":26,"column":3}},"9":{"start":{"line":27,"column":2},"end":{"line":41,"column":5}},"10":{"start":{"line":28,"column":4},"end":{"line":40,"column":5}},"11":{"start":{"line":29,"column":6},"end":{"line":29,"column":25}},"12":{"start":{"line":31,"column":6},"end":{"line":39,"column":7}},"13":{"start":{"line":32,"column":8},"end":{"line":36,"column":11}},"14":{"start":{"line":38,"column":8},"end":{"line":38,"column":52}},"15":{"start":{"line":43,"column":15},"end":{"line":43,"column":24}},"16":{"start":{"line":44,"column":0},"end":{"line":44,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":31}},"loc":{"start":{"line":9,"column":37},"end":{"line":9,"column":95}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":18},"end":{"line":11,"column":19}},"loc":{"start":{"line":11,"column":48},"end":{"line":42,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":27,"column":32},"end":{"line":27,"column":33}},"loc":{"start":{"line":27,"column":55},"end":{"line":41,"column":3}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":92}},"type":"cond-expr","locations":[{"start":{"line":9,"column":70},"end":{"line":9,"column":73}},{"start":{"line":9,"column":76},"end":{"line":9,"column":92}}],"line":9},"1":{"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":67}},"type":"binary-expr","locations":[{"start":{"line":9,"column":46},"end":{"line":9,"column":49}},{"start":{"line":9,"column":53},"end":{"line":9,"column":67}}],"line":9},"2":{"loc":{"start":{"line":28,"column":4},"end":{"line":40,"column":5}},"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":40,"column":5}},{"start":{"line":28,"column":4},"end":{"line":40,"column":5}}],"line":28},"3":{"loc":{"start":{"line":31,"column":6},"end":{"line":39,"column":7}},"type":"if","locations":[{"start":{"line":31,"column":6},"end":{"line":39,"column":7}},{"start":{"line":31,"column":6},"end":{"line":39,"column":7}}],"line":31},"4":{"loc":{"start":{"line":31,"column":10},"end":{"line":31,"column":20}},"type":"binary-expr","locations":[{"start":{"line":31,"column":10},"end":{"line":31,"column":13}},{"start":{"line":31,"column":17},"end":{"line":31,"column":20}}],"line":31}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":1},"f":{"0":2,"1":0,"2":0},"b":{"0":[0,2],"1":[2,2],"2":[0,0],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"names":["_nodemailer","_interopRequireDefault","require","_dotenv","obj","__esModule","default","dotenv","config","sendEmail","reciever","req","res","transporter","nodemailer","createTransport","service","auth","user","process","env","GMAIL_USER","pass","GMAIL_PASS","options","from","to","email","subject","text","html","secure","sendMail","error","info","console","log","send","status","t","Emailsent","response","token","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\","sources":["sendEmail.js"],"sourcesContent":["import nodemailer from 'nodemailer'\r\nimport dotenv from 'dotenv'\r\ndotenv.config()\r\n\r\n const sendEmail = async(reciever,req, res) =>{\r\n    const transporter = nodemailer.createTransport({\r\n  service: 'gmail',\r\n  auth: {\r\n    user: process.env.GMAIL_USER,\r\n    pass: process.env.GMAIL_PASS,\r\n  },\r\n});\r\n\r\nconst options = {\r\n    from: process.env.GMAIL_USER,\r\n    to: reciever.email,\r\n    subject:reciever.subject,\r\n    text: reciever.text,\r\n    html: reciever.html,\r\n    secure: true\r\n}\r\n\r\n  transporter.sendMail(options, async(error, info) => {\r\n      if (error) {\r\n          console.log(error);\r\n      } else {\r\nif (res && req){\r\n        res.send({status: req.t('success'),Emailsent: info.response, token: reciever.token});\r\n}else{\r\n        console.log('Email sent: ' + info.response);\r\n}\r\n        \r\n      }\r\n  });\r\n  \r\n}\r\n\r\nexport default sendEmail"],"mappings":";;;;;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA2B,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAC3BG,eAAM,CAACC,MAAM,EAAE;AAEd,MAAMC,SAAS,GAAG,MAAAA,CAAMC,QAAQ,EAACC,GAAG,EAAEC,GAAG,KAAI;EAC1C,MAAMC,WAAW,GAAGC,mBAAU,CAACC,eAAe,CAAC;IACjDC,OAAO,EAAE,OAAO;IAChBC,IAAI,EAAE;MACJC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU;MAC5BC,IAAI,EAAEH,OAAO,CAACC,GAAG,CAACG;IACpB;EACF,CAAC,CAAC;EAEF,MAAMC,OAAO,GAAG;IACZC,IAAI,EAAEN,OAAO,CAACC,GAAG,CAACC,UAAU;IAC5BK,EAAE,EAAEhB,QAAQ,CAACiB,KAAK;IAClBC,OAAO,EAAClB,QAAQ,CAACkB,OAAO;IACxBC,IAAI,EAAEnB,QAAQ,CAACmB,IAAI;IACnBC,IAAI,EAAEpB,QAAQ,CAACoB,IAAI;IACnBC,MAAM,EAAE;EACZ,CAAC;EAEClB,WAAW,CAACmB,QAAQ,CAACR,OAAO,EAAE,OAAMS,KAAK,EAAEC,IAAI,KAAK;IAChD,IAAID,KAAK,EAAE;MACPE,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC;IACtB,CAAC,MAAM;MACb,IAAIrB,GAAG,IAAID,GAAG,EAAC;QACPC,GAAG,CAACyB,IAAI,CAAC;UAACC,MAAM,EAAE3B,GAAG,CAAC4B,CAAC,CAAC,SAAS,CAAC;UAACC,SAAS,EAAEN,IAAI,CAACO,QAAQ;UAAEC,KAAK,EAAEhC,QAAQ,CAACgC;QAAK,CAAC,CAAC;MAC5F,CAAC,MAAI;QACGP,OAAO,CAACC,GAAG,CAAC,cAAc,GAAGF,IAAI,CAACO,QAAQ,CAAC;MACnD;IAEM;EACJ,CAAC,CAAC;AAEJ,CAAC;AAAA,IAAAE,QAAA,GAEclC,SAAS;AAAAmC,OAAA,CAAAtC,OAAA,GAAAqC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"de3d1d33364e9feb5f482e720aa0514c6b4747a6","contentHash":"a2c982ac161083a5124faa85f92bcc81eb78d72642d815d55b554f73f6a7ef77"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\validations\\handlingEmptyFields.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\validations\\handlingEmptyFields.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":34}},"2":{"start":{"line":7,"column":25},"end":{"line":16,"column":1}},"3":{"start":{"line":8,"column":2},"end":{"line":14,"column":3}},"4":{"start":{"line":9,"column":4},"end":{"line":13,"column":5}},"5":{"start":{"line":10,"column":6},"end":{"line":12,"column":9}},"6":{"start":{"line":15,"column":2},"end":{"line":15,"column":14}},"7":{"start":{"line":17,"column":0},"end":{"line":17,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":25},"end":{"line":7,"column":26}},"loc":{"start":{"line":7,"column":45},"end":{"line":16,"column":1}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":4},"end":{"line":13,"column":5}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":13,"column":5}},{"start":{"line":9,"column":4},"end":{"line":13,"column":5}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":7,"4":12,"5":0,"6":7,"7":1},"f":{"0":7},"b":{"0":[0,12]},"inputSourceMap":{"version":3,"names":["checkEmptyFields","req","res","next","field","body","status","json","message","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\validations\\","sources":["handlingEmptyFields.js"],"sourcesContent":["export const checkEmptyFields = (req, res, next) => {\r\n  for (let field in req.body) {\r\n    if (req.body[field] === '') {\r\n     return res.status(409).json({ message: `Please fill the ${field} field` });\r\n    }\r\n  }\r\n  return next;\r\n};\r\n"],"mappings":";;;;;;AAAO,MAAMA,gBAAgB,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAClD,KAAK,IAAIC,KAAK,IAAIH,GAAG,CAACI,IAAI,EAAE;IAC1B,IAAIJ,GAAG,CAACI,IAAI,CAACD,KAAK,CAAC,KAAK,EAAE,EAAE;MAC3B,OAAOF,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAG,mBAAkBJ,KAAM;MAAQ,CAAC,CAAC;IAC3E;EACF;EACA,OAAOD,IAAI;AACb,CAAC;AAACM,OAAA,CAAAT,gBAAA,GAAAA,gBAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"95ba62908eab4aef1f90fc0cd0f155dd620fb34c","contentHash":"e09fa12e81247f02115da4cd676b9d91755d9ca4be8a5588eeaa9700519af094"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\handleCookies.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\handleCookies.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":78}},"2":{"start":{"line":7,"column":22},"end":{"line":23,"column":1}},"3":{"start":{"line":9,"column":18},"end":{"line":9,"column":28}},"4":{"start":{"line":10,"column":2},"end":{"line":10,"column":54}},"5":{"start":{"line":11,"column":2},"end":{"line":16,"column":5}},"6":{"start":{"line":17,"column":2},"end":{"line":22,"column":5}},"7":{"start":{"line":24,"column":0},"end":{"line":24,"column":38}},"8":{"start":{"line":25,"column":22},"end":{"line":36,"column":1}},"9":{"start":{"line":26,"column":14},"end":{"line":26,"column":16}},"10":{"start":{"line":28,"column":2},"end":{"line":33,"column":3}},"11":{"start":{"line":28,"column":15},"end":{"line":28,"column":16}},"12":{"start":{"line":29,"column":18},"end":{"line":29,"column":43}},"13":{"start":{"line":30,"column":16},"end":{"line":30,"column":31}},"14":{"start":{"line":31,"column":18},"end":{"line":31,"column":52}},"15":{"start":{"line":32,"column":4},"end":{"line":32,"column":21}},"16":{"start":{"line":34,"column":24},"end":{"line":34,"column":27}},"17":{"start":{"line":35,"column":2},"end":{"line":35,"column":23}},"18":{"start":{"line":37,"column":0},"end":{"line":37,"column":38}},"19":{"start":{"line":38,"column":21},"end":{"line":48,"column":1}},"20":{"start":{"line":40,"column":18},"end":{"line":40,"column":28}},"21":{"start":{"line":41,"column":2},"end":{"line":41,"column":52}},"22":{"start":{"line":42,"column":2},"end":{"line":47,"column":5}},"23":{"start":{"line":49,"column":0},"end":{"line":49,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":22},"end":{"line":7,"column":23}},"loc":{"start":{"line":7,"column":92},"end":{"line":23,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":25,"column":22},"end":{"line":25,"column":23}},"loc":{"start":{"line":25,"column":37},"end":{"line":36,"column":1}},"line":25},"2":{"name":"(anonymous_2)","decl":{"start":{"line":38,"column":21},"end":{"line":38,"column":22}},"loc":{"start":{"line":38,"column":55},"end":{"line":48,"column":1}},"line":38}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":1,"20":0,"21":0,"22":0,"23":1},"f":{"0":0,"1":0,"2":0},"b":{},"inputSourceMap":{"version":3,"names":["handleCookies","duration","cookieVaribale","cookieValue","idBasedVariables","id","res","expires","Date","setMinutes","getMinutes","cookie","httpOnly","sameSite","secure","exports","getCookieInfo","Cookiearray","obj","i","length","parts","split","key","trim","value","replace","cookieObjects","saveOTPusage","expire","Varibale","Value"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\","sources":["handleCookies.js"],"sourcesContent":["export const handleCookies=(duration,cookieVaribale,cookieValue,idBasedVariables,id,res)=>{\r\n    //cookie expiration time\r\n    const expires = new Date();\r\n    expires.setMinutes(expires.getMinutes() + duration);\r\n     res.cookie(cookieVaribale, cookieValue, {\r\n      httpOnly: false,\r\n      sameSite: 'none',\r\n      secure: true,\r\n      expires: expires,\r\n    });\r\n     res.cookie(idBasedVariables,id, {\r\n      httpOnly: false,\r\n      sameSite: 'none',\r\n      secure: true,\r\n      expires: expires,\r\n    });\r\n}\r\nexport const getCookieInfo=(Cookiearray)=>{\r\n    const obj = {};\r\n    //get saved token from local storage\r\n    for (let i = 0; i < Cookiearray.length; i++) {\r\n      const parts = Cookiearray[i].split('=');\r\n      const key = parts[0].trim(); // Trim the key\r\n      const value = parts[1].trim().replace(/=/g, ':');\r\n      obj[key] = value;\r\n    }\r\n    const cookieObjects = obj;\r\n    return cookieObjects;\r\n}\r\nexport const saveOTPusage=(expire,Varibale,Value,res)=>{\r\n  //cookie expiration time\r\n  const expires = new Date();\r\n  expires.setMinutes(expires.getMinutes() + expire);\r\n   res.cookie(Varibale,Value, {\r\n    httpOnly: false,\r\n    sameSite: 'none',\r\n    secure: true,\r\n    expires: expires,\r\n  });\r\n}"],"mappings":";;;;;;AAAO,MAAMA,aAAa,GAACA,CAACC,QAAQ,EAACC,cAAc,EAACC,WAAW,EAACC,gBAAgB,EAACC,EAAE,EAACC,GAAG,KAAG;EACtF;EACA,MAAMC,OAAO,GAAG,IAAIC,IAAI,EAAE;EAC1BD,OAAO,CAACE,UAAU,CAACF,OAAO,CAACG,UAAU,EAAE,GAAGT,QAAQ,CAAC;EAClDK,GAAG,CAACK,MAAM,CAACT,cAAc,EAAEC,WAAW,EAAE;IACvCS,QAAQ,EAAE,KAAK;IACfC,QAAQ,EAAE,MAAM;IAChBC,MAAM,EAAE,IAAI;IACZP,OAAO,EAAEA;EACX,CAAC,CAAC;EACDD,GAAG,CAACK,MAAM,CAACP,gBAAgB,EAACC,EAAE,EAAE;IAC/BO,QAAQ,EAAE,KAAK;IACfC,QAAQ,EAAE,MAAM;IAChBC,MAAM,EAAE,IAAI;IACZP,OAAO,EAAEA;EACX,CAAC,CAAC;AACN,CAAC;AAAAQ,OAAA,CAAAf,aAAA,GAAAA,aAAA;AACM,MAAMgB,aAAa,GAAEC,WAAW,IAAG;EACtC,MAAMC,GAAG,GAAG,CAAC,CAAC;EACd;EACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,WAAW,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;IAC3C,MAAME,KAAK,GAAGJ,WAAW,CAACE,CAAC,CAAC,CAACG,KAAK,CAAC,GAAG,CAAC;IACvC,MAAMC,GAAG,GAAGF,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,EAAE,CAAC,CAAC;IAC7B,MAAMC,KAAK,GAAGJ,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,EAAE,CAACE,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;IAChDR,GAAG,CAACK,GAAG,CAAC,GAAGE,KAAK;EAClB;EACA,MAAME,aAAa,GAAGT,GAAG;EACzB,OAAOS,aAAa;AACxB,CAAC;AAAAZ,OAAA,CAAAC,aAAA,GAAAA,aAAA;AACM,MAAMY,YAAY,GAACA,CAACC,MAAM,EAACC,QAAQ,EAACC,KAAK,EAACzB,GAAG,KAAG;EACrD;EACA,MAAMC,OAAO,GAAG,IAAIC,IAAI,EAAE;EAC1BD,OAAO,CAACE,UAAU,CAACF,OAAO,CAACG,UAAU,EAAE,GAAGmB,MAAM,CAAC;EAChDvB,GAAG,CAACK,MAAM,CAACmB,QAAQ,EAACC,KAAK,EAAE;IAC1BnB,QAAQ,EAAE,KAAK;IACfC,QAAQ,EAAE,MAAM;IAChBC,MAAM,EAAE,IAAI;IACZP,OAAO,EAAEA;EACX,CAAC,CAAC;AACJ,CAAC;AAAAQ,OAAA,CAAAa,YAAA,GAAAA,YAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9a5d9e0244793f18e588e7b7d93e5b844d056c0b","contentHash":"4493480bd1d622678bcd72a94e3e747001f57e53532e48a8f203547e78a72da9"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\middleware\\auth.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\middleware\\auth.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":64}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":55}},"3":{"start":{"line":8,"column":22},"end":{"line":8,"column":56}},"4":{"start":{"line":9,"column":14},"end":{"line":9,"column":67}},"5":{"start":{"line":10,"column":20},"end":{"line":10,"column":67}},"6":{"start":{"line":11,"column":39},"end":{"line":11,"column":93}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":25}},"8":{"start":{"line":13,"column":13},"end":{"line":41,"column":1}},"9":{"start":{"line":14,"column":2},"end":{"line":40,"column":4}},"10":{"start":{"line":15,"column":25},"end":{"line":15,"column":50}},"11":{"start":{"line":16,"column":4},"end":{"line":19,"column":7}},"12":{"start":{"line":16,"column":23},"end":{"line":19,"column":7}},"13":{"start":{"line":20,"column":19},"end":{"line":20,"column":42}},"14":{"start":{"line":21,"column":18},"end":{"line":21,"column":27}},"15":{"start":{"line":22,"column":19},"end":{"line":22,"column":63}},"16":{"start":{"line":23,"column":4},"end":{"line":26,"column":7}},"17":{"start":{"line":23,"column":17},"end":{"line":26,"column":7}},"18":{"start":{"line":27,"column":17},"end":{"line":27,"column":34}},"19":{"start":{"line":28,"column":4},"end":{"line":28,"column":28}},"20":{"start":{"line":29,"column":4},"end":{"line":39,"column":5}},"21":{"start":{"line":29,"column":26},"end":{"line":29,"column":40}},"22":{"start":{"line":29,"column":45},"end":{"line":39,"column":5}},"23":{"start":{"line":29,"column":69},"end":{"line":29,"column":83}},"24":{"start":{"line":30,"column":6},"end":{"line":37,"column":7}},"25":{"start":{"line":31,"column":8},"end":{"line":36,"column":9}},"26":{"start":{"line":32,"column":10},"end":{"line":35,"column":13}},"27":{"start":{"line":38,"column":6},"end":{"line":38,"column":13}},"28":{"start":{"line":42,"column":0},"end":{"line":42,"column":20}},"29":{"start":{"line":43,"column":16},"end":{"line":60,"column":1}},"30":{"start":{"line":44,"column":2},"end":{"line":59,"column":3}},"31":{"start":{"line":45,"column":18},"end":{"line":45,"column":34}},"32":{"start":{"line":46,"column":19},"end":{"line":46,"column":63}},"33":{"start":{"line":47,"column":4},"end":{"line":54,"column":5}},"34":{"start":{"line":48,"column":6},"end":{"line":50,"column":9}},"35":{"start":{"line":52,"column":6},"end":{"line":52,"column":24}},"36":{"start":{"line":53,"column":6},"end":{"line":53,"column":13}},"37":{"start":{"line":56,"column":4},"end":{"line":58,"column":7}},"38":{"start":{"line":61,"column":0},"end":{"line":61,"column":26}},"39":{"start":{"line":62,"column":22},"end":{"line":83,"column":1}},"40":{"start":{"line":63,"column":17},"end":{"line":63,"column":35}},"41":{"start":{"line":64,"column":21},"end":{"line":64,"column":46}},"42":{"start":{"line":65,"column":16},"end":{"line":65,"column":40}},"43":{"start":{"line":66,"column":23},"end":{"line":66,"column":82}},"44":{"start":{"line":67,"column":17},"end":{"line":67,"column":37}},"45":{"start":{"line":68,"column":15},"end":{"line":72,"column":4}},"46":{"start":{"line":73,"column":2},"end":{"line":81,"column":3}},"47":{"start":{"line":74,"column":23},"end":{"line":74,"column":35}},"48":{"start":{"line":75,"column":4},"end":{"line":80,"column":5}},"49":{"start":{"line":76,"column":6},"end":{"line":79,"column":9}},"50":{"start":{"line":82,"column":2},"end":{"line":82,"column":9}},"51":{"start":{"line":84,"column":0},"end":{"line":84,"column":38}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":37},"end":{"line":11,"column":95}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":13},"end":{"line":13,"column":14}},"loc":{"start":{"line":13,"column":20},"end":{"line":41,"column":1}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":10}},"loc":{"start":{"line":14,"column":35},"end":{"line":40,"column":3}},"line":14},"3":{"name":"(anonymous_3)","decl":{"start":{"line":43,"column":16},"end":{"line":43,"column":17}},"loc":{"start":{"line":43,"column":42},"end":{"line":60,"column":1}},"line":43},"4":{"name":"(anonymous_4)","decl":{"start":{"line":62,"column":22},"end":{"line":62,"column":23}},"loc":{"start":{"line":62,"column":48},"end":{"line":83,"column":1}},"line":62}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":92}},"type":"cond-expr","locations":[{"start":{"line":11,"column":70},"end":{"line":11,"column":73}},{"start":{"line":11,"column":76},"end":{"line":11,"column":92}}],"line":11},"1":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":67}},"type":"binary-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":49}},{"start":{"line":11,"column":53},"end":{"line":11,"column":67}}],"line":11},"2":{"loc":{"start":{"line":16,"column":4},"end":{"line":19,"column":7}},"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":19,"column":7}},{"start":{"line":16,"column":4},"end":{"line":19,"column":7}}],"line":16},"3":{"loc":{"start":{"line":23,"column":4},"end":{"line":26,"column":7}},"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":26,"column":7}},{"start":{"line":23,"column":4},"end":{"line":26,"column":7}}],"line":23},"4":{"loc":{"start":{"line":29,"column":4},"end":{"line":39,"column":5}},"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":39,"column":5}},{"start":{"line":29,"column":4},"end":{"line":39,"column":5}}],"line":29},"5":{"loc":{"start":{"line":29,"column":45},"end":{"line":39,"column":5}},"type":"if","locations":[{"start":{"line":29,"column":45},"end":{"line":39,"column":5}},{"start":{"line":29,"column":45},"end":{"line":39,"column":5}}],"line":29},"6":{"loc":{"start":{"line":30,"column":6},"end":{"line":37,"column":7}},"type":"if","locations":[{"start":{"line":30,"column":6},"end":{"line":37,"column":7}},{"start":{"line":30,"column":6},"end":{"line":37,"column":7}}],"line":30},"7":{"loc":{"start":{"line":31,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":36,"column":9}},{"start":{"line":31,"column":8},"end":{"line":36,"column":9}}],"line":31},"8":{"loc":{"start":{"line":47,"column":4},"end":{"line":54,"column":5}},"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":54,"column":5}},{"start":{"line":47,"column":4},"end":{"line":54,"column":5}}],"line":47},"9":{"loc":{"start":{"line":73,"column":2},"end":{"line":81,"column":3}},"type":"if","locations":[{"start":{"line":73,"column":2},"end":{"line":81,"column":3}},{"start":{"line":73,"column":2},"end":{"line":81,"column":3}}],"line":73},"10":{"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":55}},"type":"binary-expr","locations":[{"start":{"line":73,"column":6},"end":{"line":73,"column":29}},{"start":{"line":73,"column":33},"end":{"line":73,"column":55}}],"line":73},"11":{"loc":{"start":{"line":75,"column":4},"end":{"line":80,"column":5}},"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":80,"column":5}},{"start":{"line":75,"column":4},"end":{"line":80,"column":5}}],"line":75},"12":{"loc":{"start":{"line":75,"column":8},"end":{"line":75,"column":47}},"type":"binary-expr","locations":[{"start":{"line":75,"column":8},"end":{"line":75,"column":19}},{"start":{"line":75,"column":23},"end":{"line":75,"column":47}}],"line":75}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":3,"7":1,"8":1,"9":34,"10":36,"11":36,"12":2,"13":34,"14":34,"15":34,"16":34,"17":34,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":0,"36":0,"37":0,"38":1,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1},"f":{"0":3,"1":34,"2":36,"3":1,"4":0},"b":{"0":[0,3],"1":[3,3],"2":[2,34],"3":[34,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"inputSourceMap":{"version":3,"names":["_dotenv","_interopRequireDefault","require","_verifyPassword","_models","_jsonwebtoken","obj","__esModule","default","dotenv","config","auth","arg","req","res","next","bearerHeader","headers","authorization","status","json","t","message","bearer","split","token","result","checkToken","role","user","includes","exports","authent","params","error","isUserEnabled","nodenv","process","env","NODENV","authHeader","decodedToken","JWT","verify","JWT_SECRET","userId","id","db","findOne","where","userStatus"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\middleware\\","sources":["auth.js"],"sourcesContent":["import dotenv from 'dotenv';\r\nimport { checkToken } from '../utils/verifyPassword';\r\nimport db from '../database/models';\r\nimport JWT from 'jsonwebtoken'\r\ndotenv.config();\r\n\r\nexport const auth = (arg) => {\r\n  return async (req, res, next) => {\r\n    const bearerHeader = req.headers.authorization;\r\n    if (!bearerHeader)\r\n      return res.status(403).json({\r\n        status: req.t('fail'),\r\n        message: req.t('unauthorized'),\r\n      });\r\n    const bearer = bearerHeader.split(' ');\r\n    const token = bearer[1];\r\n    const result = await checkToken(token);\r\n    if (!result)\r\n      return res.status(401).json({\r\n        status: req.t('fail'),\r\n        message: req.t('unauthorized'),\r\n      })\r\n    const role = result?.user.role;\r\n    req.user = result?.user;\r\n    if (role === 'admin') return next();\r\n    else if(arg.includes(role)) return next();\r\n    else {\r\n      if (role !== arg) {\r\n        if(arg !== 'all'){\r\n        return res.status(401).json({\r\n          status: req.t('fail'),\r\n          message: req.t('wrong_credentials'),\r\n        });\r\n      }\r\n      }\r\n      next();\r\n    }\r\n  };\r\n};\r\nexport const authent = async (req, res, next) => {\r\n    \r\n    try {\r\n      const token = req.params.token;\r\n      const result = await checkToken(token);\r\n      if(!result.user){\r\n        res.json({\r\n          message: req.t('auth_message')\r\n      })\r\n      }else{\r\n        req.user= result\r\n        next()\r\n      }\r\n          \r\n  } catch (error) {\r\n      res.json({\r\n          message: req.t('auth_message')\r\n      })\r\n  }\r\n};\r\n\r\nexport const isUserEnabled= async(req, res, next) => {\r\n  const nodenv =process.env.NODENV;\r\n  const authHeader = req.headers.authorization;\r\n  const token = authHeader.split(' ')[1];\r\n  const decodedToken = JWT.verify(token, process.env.JWT_SECRET);\r\n  const userId = decodedToken.user.id;\r\n  const user = await db.user.findOne({ where: { id: userId } });\r\n  if(nodenv=='development'||nodenv=='production'){\r\n  const userStatus = user?.status;\r\n  if(!userStatus ||userStatus == \"inactive\"){\r\n    return res.status(401).json({\r\n      status: req.t('fail'),\r\n      message: req.t('user_disabled'),\r\n    });\r\n  }\r\n}\r\nnext();\r\n}\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"023cb1848035ff79cfffbd78df63ec263aca8adb","contentHash":"96dd602ef82b8308f630c98126847916ca0399420ebc0d9a37432e81beebce7e"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\users\\adminControllers.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\users\\adminControllers.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":97}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":20},"end":{"line":8,"column":55}},"4":{"start":{"line":9,"column":30},"end":{"line":9,"column":75}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":54},"end":{"line":11,"column":73}},"7":{"start":{"line":11,"column":75},"end":{"line":11,"column":326}},"8":{"start":{"line":11,"column":125},"end":{"line":11,"column":161}},"9":{"start":{"line":11,"column":163},"end":{"line":11,"column":324}},"10":{"start":{"line":11,"column":224},"end":{"line":11,"column":287}},"11":{"start":{"line":11,"column":327},"end":{"line":11,"column":339}},"12":{"start":{"line":12,"column":33},"end":{"line":12,"column":489}},"13":{"start":{"line":12,"column":46},"end":{"line":12,"column":47}},"14":{"start":{"line":12,"column":91},"end":{"line":12,"column":131}},"15":{"start":{"line":12,"column":133},"end":{"line":12,"column":487}},"16":{"start":{"line":12,"column":194},"end":{"line":12,"column":236}},"17":{"start":{"line":12,"column":402},"end":{"line":12,"column":483}},"18":{"start":{"line":12,"column":490},"end":{"line":12,"column":504}},"19":{"start":{"line":13,"column":44},"end":{"line":13,"column":70}},"20":{"start":{"line":13,"column":71},"end":{"line":13,"column":222}},"21":{"start":{"line":13,"column":89},"end":{"line":13,"column":193}},"22":{"start":{"line":13,"column":203},"end":{"line":13,"column":220}},"23":{"start":{"line":13,"column":223},"end":{"line":13,"column":234}},"24":{"start":{"line":14,"column":41},"end":{"line":14,"column":68}},"25":{"start":{"line":14,"column":70},"end":{"line":14,"column":121}},"26":{"start":{"line":15,"column":37},"end":{"line":15,"column":99}},"27":{"start":{"line":15,"column":86},"end":{"line":15,"column":99}},"28":{"start":{"line":15,"column":111},"end":{"line":15,"column":136}},"29":{"start":{"line":15,"column":138},"end":{"line":15,"column":322}},"30":{"start":{"line":15,"column":174},"end":{"line":15,"column":209}},"31":{"start":{"line":15,"column":211},"end":{"line":15,"column":251}},"32":{"start":{"line":15,"column":240},"end":{"line":15,"column":251}},"33":{"start":{"line":15,"column":252},"end":{"line":15,"column":320}},"34":{"start":{"line":15,"column":323},"end":{"line":15,"column":375}},"35":{"start":{"line":16,"column":20},"end":{"line":51,"column":2}},"36":{"start":{"line":25,"column":6},"end":{"line":25,"column":14}},"37":{"start":{"line":26,"column":25},"end":{"line":26,"column":72}},"38":{"start":{"line":27,"column":16},"end":{"line":29,"column":4}},"39":{"start":{"line":30,"column":2},"end":{"line":34,"column":3}},"40":{"start":{"line":31,"column":4},"end":{"line":33,"column":7}},"41":{"start":{"line":35,"column":16},"end":{"line":38,"column":5}},"42":{"start":{"line":39,"column":24},"end":{"line":41,"column":4}},"43":{"start":{"line":42,"column":2},"end":{"line":45,"column":6}},"44":{"start":{"line":46,"column":2},"end":{"line":50,"column":5}},"45":{"start":{"line":52,"column":0},"end":{"line":52,"column":34}},"46":{"start":{"line":53,"column":20},"end":{"line":74,"column":2}},"47":{"start":{"line":54,"column":16},"end":{"line":68,"column":4}},"48":{"start":{"line":69,"column":2},"end":{"line":73,"column":5}},"49":{"start":{"line":75,"column":0},"end":{"line":75,"column":34}},"50":{"start":{"line":76,"column":20},"end":{"line":91,"column":2}},"51":{"start":{"line":77,"column":2},"end":{"line":81,"column":5}},"52":{"start":{"line":82,"column":2},"end":{"line":86,"column":5}},"53":{"start":{"line":87,"column":2},"end":{"line":90,"column":5}},"54":{"start":{"line":92,"column":0},"end":{"line":92,"column":34}},"55":{"start":{"line":93,"column":22},"end":{"line":118,"column":2}},"56":{"start":{"line":94,"column":2},"end":{"line":94,"column":29}},"57":{"start":{"line":95,"column":21},"end":{"line":112,"column":4}},"58":{"start":{"line":113,"column":2},"end":{"line":117,"column":5}},"59":{"start":{"line":119,"column":0},"end":{"line":119,"column":38}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10},"1":{"name":"ownKeys","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":16}},"loc":{"start":{"line":11,"column":41},"end":{"line":11,"column":341}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":207},"end":{"line":11,"column":208}},"loc":{"start":{"line":11,"column":222},"end":{"line":11,"column":289}},"line":11},"3":{"name":"_objectSpread","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":22}},"loc":{"start":{"line":12,"column":31},"end":{"line":12,"column":506}},"line":12},"4":{"name":"(anonymous_4)","decl":{"start":{"line":12,"column":177},"end":{"line":12,"column":178}},"loc":{"start":{"line":12,"column":192},"end":{"line":12,"column":238}},"line":12},"5":{"name":"(anonymous_5)","decl":{"start":{"line":12,"column":385},"end":{"line":12,"column":386}},"loc":{"start":{"line":12,"column":400},"end":{"line":12,"column":485}},"line":12},"6":{"name":"_defineProperty","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":24}},"loc":{"start":{"line":13,"column":42},"end":{"line":13,"column":236}},"line":13},"7":{"name":"_toPropertyKey","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":23}},"loc":{"start":{"line":14,"column":29},"end":{"line":14,"column":123}},"line":14},"8":{"name":"_toPrimitive","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":21}},"loc":{"start":{"line":15,"column":35},"end":{"line":15,"column":377}},"line":15},"9":{"name":"(anonymous_9)","decl":{"start":{"line":16,"column":62},"end":{"line":16,"column":63}},"loc":{"start":{"line":16,"column":82},"end":{"line":51,"column":1}},"line":16},"10":{"name":"(anonymous_10)","decl":{"start":{"line":53,"column":62},"end":{"line":53,"column":63}},"loc":{"start":{"line":53,"column":82},"end":{"line":74,"column":1}},"line":53},"11":{"name":"(anonymous_11)","decl":{"start":{"line":76,"column":62},"end":{"line":76,"column":63}},"loc":{"start":{"line":76,"column":82},"end":{"line":91,"column":1}},"line":76},"12":{"name":"(anonymous_12)","decl":{"start":{"line":93,"column":64},"end":{"line":93,"column":65}},"loc":{"start":{"line":93,"column":84},"end":{"line":118,"column":1}},"line":93}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10},"2":{"loc":{"start":{"line":11,"column":75},"end":{"line":11,"column":326}},"type":"if","locations":[{"start":{"line":11,"column":75},"end":{"line":11,"column":326}},{"start":{"line":11,"column":75},"end":{"line":11,"column":326}}],"line":11},"3":{"loc":{"start":{"line":11,"column":163},"end":{"line":11,"column":291}},"type":"binary-expr","locations":[{"start":{"line":11,"column":163},"end":{"line":11,"column":177}},{"start":{"line":11,"column":182},"end":{"line":11,"column":290}}],"line":11},"4":{"loc":{"start":{"line":12,"column":91},"end":{"line":12,"column":131}},"type":"cond-expr","locations":[{"start":{"line":12,"column":114},"end":{"line":12,"column":126}},{"start":{"line":12,"column":129},"end":{"line":12,"column":131}}],"line":12},"5":{"loc":{"start":{"line":12,"column":133},"end":{"line":12,"column":486}},"type":"cond-expr","locations":[{"start":{"line":12,"column":141},"end":{"line":12,"column":239}},{"start":{"line":12,"column":242},"end":{"line":12,"column":486}}],"line":12},"6":{"loc":{"start":{"line":12,"column":242},"end":{"line":12,"column":486}},"type":"cond-expr","locations":[{"start":{"line":12,"column":277},"end":{"line":12,"column":350}},{"start":{"line":12,"column":353},"end":{"line":12,"column":486}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":222}},"type":"if","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":222}},{"start":{"line":13,"column":71},"end":{"line":13,"column":222}}],"line":13},"8":{"loc":{"start":{"line":14,"column":77},"end":{"line":14,"column":120}},"type":"cond-expr","locations":[{"start":{"line":14,"column":103},"end":{"line":14,"column":106}},{"start":{"line":14,"column":109},"end":{"line":14,"column":120}}],"line":14},"9":{"loc":{"start":{"line":15,"column":37},"end":{"line":15,"column":99}},"type":"if","locations":[{"start":{"line":15,"column":37},"end":{"line":15,"column":99}},{"start":{"line":15,"column":37},"end":{"line":15,"column":99}}],"line":15},"10":{"loc":{"start":{"line":15,"column":41},"end":{"line":15,"column":84}},"type":"binary-expr","locations":[{"start":{"line":15,"column":41},"end":{"line":15,"column":66}},{"start":{"line":15,"column":70},"end":{"line":15,"column":84}}],"line":15},"11":{"loc":{"start":{"line":15,"column":138},"end":{"line":15,"column":322}},"type":"if","locations":[{"start":{"line":15,"column":138},"end":{"line":15,"column":322}},{"start":{"line":15,"column":138},"end":{"line":15,"column":322}}],"line":15},"12":{"loc":{"start":{"line":15,"column":191},"end":{"line":15,"column":208}},"type":"binary-expr","locations":[{"start":{"line":15,"column":191},"end":{"line":15,"column":195}},{"start":{"line":15,"column":199},"end":{"line":15,"column":208}}],"line":15},"13":{"loc":{"start":{"line":15,"column":211},"end":{"line":15,"column":251}},"type":"if","locations":[{"start":{"line":15,"column":211},"end":{"line":15,"column":251}},{"start":{"line":15,"column":211},"end":{"line":15,"column":251}}],"line":15},"14":{"loc":{"start":{"line":15,"column":331},"end":{"line":15,"column":366}},"type":"cond-expr","locations":[{"start":{"line":15,"column":351},"end":{"line":15,"column":357}},{"start":{"line":15,"column":360},"end":{"line":15,"column":366}}],"line":15},"15":{"loc":{"start":{"line":42,"column":2},"end":{"line":45,"column":5}},"type":"binary-expr","locations":[{"start":{"line":42,"column":2},"end":{"line":42,"column":15}},{"start":{"line":42,"column":20},"end":{"line":45,"column":4}}],"line":42}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":4,"7":4,"8":4,"9":4,"10":0,"11":4,"12":4,"13":4,"14":6,"15":6,"16":12,"17":0,"18":4,"19":12,"20":12,"21":0,"22":12,"23":12,"24":12,"25":12,"26":12,"27":12,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":3,"37":3,"38":2,"39":2,"40":0,"41":2,"42":0,"43":0,"44":0,"45":1,"46":1,"47":0,"48":0,"49":1,"50":1,"51":0,"52":0,"53":0,"54":1,"55":1,"56":0,"57":0,"58":0,"59":1},"f":{"0":1,"1":4,"2":0,"3":4,"4":12,"5":0,"6":12,"7":12,"8":12,"9":3,"10":0,"11":0,"12":0},"b":{"0":[0,1],"1":[1,1],"2":[4,0],"3":[4,4],"4":[6,0],"5":[4,2],"6":[2,0],"7":[0,12],"8":[0,12],"9":[12,0],"10":[12,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_hashpassword","_handlingTryCatchBlocks","obj","__esModule","default","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","createAdmin","asyncWrapper","req","firstname","lastname","email","password","phone","permissions","body","hashedPassword","hashPassword","newRole","db","role","create","name","admin","user","roleId","id","newPermission","permission","rolePermission","permissionId","status","json","message","t","data","exports","getAllUsers","users","findAll","attributes","exclude","include","model","deleteUsers","Order","destroy","where","userId","params","getSingleUser","console","log","singleUser"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\users\\","sources":["adminControllers.js"],"sourcesContent":["import db from '../../database/models';\r\nimport { hashPassword } from '../../utils/hashpassword';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nexport const createAdmin = asyncWrapper(async (req, res) => {\r\n  //add admins\r\n    const { firstname, lastname, email, password, phone, permissions } =\r\n    req.body;\r\n  \r\n    const hashedPassword = await hashPassword(password);\r\n    let newRole = await db.role.create({\r\n      name: 'admin',\r\n    });\r\n    while(!newRole){\r\n      newRole = await db.role.create({name: 'admin'});\r\n    }\r\n    const admin = await db.user.create({\r\n      ...req.body,\r\n      password: hashedPassword,\r\n      roleId: newRole.id,\r\n    });\r\n    const newPermission = await db.permission.create({\r\n      name: permissions,\r\n    });\r\n\r\n    newPermission && await db.rolePermission.create({\r\n      roleId: newRole.id,\r\n      permissionId: newPermission.id,\r\n    });\r\n    res.status(201).json({\r\n      message: req.t('admin_added_message'),\r\n      status: req.t('success'),\r\n      data: admin\r\n    });\r\n});\r\n\r\nexport const getAllUsers =asyncWrapper(async (req, res) => {\r\n  const users = await await db.user.findAll({\r\n    attributes: { exclude: ['password', 'roleId'] },\r\n    include: {\r\n      model: db.role,\r\n      attributes: ['name'],\r\n      include: {\r\n        model: db.permission,\r\n        attributes: { exclude: ['id'] },\r\n      },\r\n    },\r\n  });\r\n  res.status(200).json({\r\n    status: req.t('success'),\r\n    message: req.t('users_fetched'),\r\n    data: users\r\n  });\r\n});\r\n\r\nexport const deleteUsers =asyncWrapper(async (req, res) => {\r\n   await db.Order.destroy({ where: { userId: req.params.id } })\r\n    await db.user.destroy({ where: { id: req.params.id } });\r\n  res.status(200).json({\r\n    status: req.t('success'),\r\n    message: req.t('user_deleted')\r\n  });\r\n});\r\nexport const getSingleUser =asyncWrapper(async (req, res) => {\r\n  console.log(req.params.id);\r\n  const singleUser = await db.user.findAll({\r\n    where: { id: req.params.id },\r\n    attributes: { exclude: ['password', 'roleId'] },\r\n    include: {\r\n      model: db.role,\r\n      attributes: ['name'],\r\n      include: {\r\n        model: db.permission,\r\n        attributes: { exclude: ['id'] },\r\n      },\r\n    },\r\n  });\r\n  res.status(200).json({\r\n    status: req.t('success'),\r\n    message: req.t('single_user_fetched'),\r\n    data:singleUser\r\n  });\r\n});\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"79e0efcb872fdadfc9b1ae3a138786fed3fceb25","contentHash":"964ab9a606c057156dbdb85bf44831f2118b5415e19e697b55d9c7c4b7a6cc61"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\hashpassword.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\hashpassword.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":44}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":30}},"3":{"start":{"line":8,"column":14},"end":{"line":8,"column":55}},"4":{"start":{"line":9,"column":14},"end":{"line":9,"column":55}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":21},"end":{"line":14,"column":1}},"7":{"start":{"line":12,"column":25},"end":{"line":12,"column":65}},"8":{"start":{"line":13,"column":2},"end":{"line":13,"column":24}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}},"10":{"start":{"line":17,"column":21},"end":{"line":17,"column":85}},"11":{"start":{"line":18,"column":22},"end":{"line":18,"column":52}},"12":{"start":{"line":19,"column":17},"end":{"line":19,"column":19}},"13":{"start":{"line":20,"column":2},"end":{"line":23,"column":3}},"14":{"start":{"line":20,"column":15},"end":{"line":20,"column":16}},"15":{"start":{"line":21,"column":24},"end":{"line":21,"column":58}},"16":{"start":{"line":22,"column":4},"end":{"line":22,"column":40}},"17":{"start":{"line":24,"column":2},"end":{"line":24,"column":18}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":21},"end":{"line":11,"column":22}},"loc":{"start":{"line":11,"column":39},"end":{"line":14,"column":1}},"line":11},"2":{"name":"generatePassword","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":25}},"loc":{"start":{"line":16,"column":28},"end":{"line":25,"column":1}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":1,"7":3,"8":2,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"f":{"0":2,"1":3,"2":0},"b":{"0":[0,2],"1":[2,2]},"inputSourceMap":{"version":3,"names":["_bcrypt","_interopRequireDefault","require","_crypto","obj","__esModule","default","hashPassword","password","hashedPassword","bcrypt","hash","exports","generatePassword","characters","randomBytes","crypto","i","randomIndex","length"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\","sources":["hashpassword.js"],"sourcesContent":["import bcrypt from 'bcrypt';\r\nimport crypto from 'crypto';\r\nexport const hashPassword = async (password) => {\r\n  const hashedPassword = await bcrypt.hash(password, 10);\r\n  return hashedPassword;\r\n};\r\nexport function generatePassword() {\r\n  const characters =\r\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  const randomBytes = crypto.randomBytes(8);\r\n  let password = '';\r\n\r\n  for (let i = 0; i < 8; i++) {\r\n    const randomIndex = randomBytes[i] % characters.length;\r\n    password += characters[randomIndex];\r\n  }\r\n\r\n  return password;\r\n}\r\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AACrB,MAAMG,YAAY,GAAG,MAAOC,QAAQ,IAAK;EAC9C,MAAMC,cAAc,GAAG,MAAMC,eAAM,CAACC,IAAI,CAACH,QAAQ,EAAE,EAAE,CAAC;EACtD,OAAOC,cAAc;AACvB,CAAC;AAACG,OAAA,CAAAL,YAAA,GAAAA,YAAA;AACK,SAASM,gBAAgBA,CAAA,EAAG;EACjC,MAAMC,UAAU,GACd,gEAAgE;EAClE,MAAMC,WAAW,GAAGC,eAAM,CAACD,WAAW,CAAC,CAAC,CAAC;EACzC,IAAIP,QAAQ,GAAG,EAAE;EAEjB,KAAK,IAAIS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC1B,MAAMC,WAAW,GAAGH,WAAW,CAACE,CAAC,CAAC,GAAGH,UAAU,CAACK,MAAM;IACtDX,QAAQ,IAAIM,UAAU,CAACI,WAAW,CAAC;EACrC;EAEA,OAAOV,QAAQ;AACjB"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1c34a6d7a384a92a042fe4510d986052adfe2609","contentHash":"3ccf5c5a3e9388035511402b99351c45bb7f1b8e3df01d8f068f871650760f14"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\user_status.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\user_status.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":50}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":46}},"3":{"start":{"line":8,"column":17},"end":{"line":8,"column":73}},"4":{"start":{"line":9,"column":30},"end":{"line":9,"column":75}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":20},"end":{"line":57,"column":2}},"7":{"start":{"line":12,"column":17},"end":{"line":12,"column":30}},"8":{"start":{"line":13,"column":23},"end":{"line":13,"column":58}},"9":{"start":{"line":14,"column":2},"end":{"line":24,"column":3}},"10":{"start":{"line":15,"column":4},"end":{"line":18,"column":7}},"11":{"start":{"line":19,"column":9},"end":{"line":24,"column":3}},"12":{"start":{"line":20,"column":4},"end":{"line":23,"column":7}},"13":{"start":{"line":25,"column":23},"end":{"line":49,"column":3}},"14":{"start":{"line":50,"column":2},"end":{"line":50,"column":46}},"15":{"start":{"line":51,"column":2},"end":{"line":51,"column":35}},"16":{"start":{"line":52,"column":2},"end":{"line":55,"column":5}},"17":{"start":{"line":56,"column":2},"end":{"line":56,"column":22}},"18":{"start":{"line":58,"column":0},"end":{"line":58,"column":34}},"19":{"start":{"line":59,"column":19},"end":{"line":102,"column":2}},"20":{"start":{"line":60,"column":17},"end":{"line":60,"column":30}},"21":{"start":{"line":61,"column":23},"end":{"line":61,"column":58}},"22":{"start":{"line":62,"column":2},"end":{"line":72,"column":3}},"23":{"start":{"line":63,"column":4},"end":{"line":66,"column":7}},"24":{"start":{"line":67,"column":9},"end":{"line":72,"column":3}},"25":{"start":{"line":68,"column":4},"end":{"line":71,"column":7}},"26":{"start":{"line":73,"column":23},"end":{"line":94,"column":3}},"27":{"start":{"line":95,"column":2},"end":{"line":95,"column":46}},"28":{"start":{"line":96,"column":2},"end":{"line":96,"column":33}},"29":{"start":{"line":97,"column":2},"end":{"line":100,"column":5}},"30":{"start":{"line":101,"column":2},"end":{"line":101,"column":22}},"31":{"start":{"line":103,"column":0},"end":{"line":103,"column":32}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":62},"end":{"line":11,"column":63}},"loc":{"start":{"line":11,"column":88},"end":{"line":57,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":59,"column":61},"end":{"line":59,"column":62}},"loc":{"start":{"line":59,"column":87},"end":{"line":102,"column":1}},"line":59}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10},"2":{"loc":{"start":{"line":14,"column":2},"end":{"line":24,"column":3}},"type":"if","locations":[{"start":{"line":14,"column":2},"end":{"line":24,"column":3}},{"start":{"line":14,"column":2},"end":{"line":24,"column":3}}],"line":14},"3":{"loc":{"start":{"line":19,"column":9},"end":{"line":24,"column":3}},"type":"if","locations":[{"start":{"line":19,"column":9},"end":{"line":24,"column":3}},{"start":{"line":19,"column":9},"end":{"line":24,"column":3}}],"line":19},"4":{"loc":{"start":{"line":62,"column":2},"end":{"line":72,"column":3}},"type":"if","locations":[{"start":{"line":62,"column":2},"end":{"line":72,"column":3}},{"start":{"line":62,"column":2},"end":{"line":72,"column":3}}],"line":62},"5":{"loc":{"start":{"line":67,"column":9},"end":{"line":72,"column":3}},"type":"if","locations":[{"start":{"line":67,"column":9},"end":{"line":72,"column":3}},{"start":{"line":67,"column":9},"end":{"line":72,"column":3}}],"line":67}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1},"f":{"0":1,"1":0,"2":0},"b":{"0":[1,0],"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"names":["_models","require","_sendEmail","_interopRequireDefault","_handlingTryCatchBlocks","obj","__esModule","default","disableUser","asyncWrapper","req","res","next","userId","params","id","existingUser","user","findByPk","status","json","message","t","sendemailOpt","email","subject","html","firstname","sendEmail","save","exports","enableUser"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\","sources":["user_status.js"],"sourcesContent":["import { user } from '../../database/models';\r\nimport sendEmail from '../../utils/sendEmail';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nexport const disableUser = asyncWrapper(async (req, res, next) => {\r\n  const userId = req.params.id;\r\n  const existingUser = await user.findByPk(userId);\r\n  if (!existingUser) {\r\n    return res\r\n      .status(404)\r\n      .json({ status: 'fail', message: req.t('user_not_found') });\r\n  } else if (existingUser.status === 'inactive') {\r\n    return res\r\n      .status(403)\r\n      .json({ status: 'fail', message: req.t('already_disabled') });\r\n  }\r\n  const sendemailOpt = {\r\n    email: existingUser.email,\r\n    subject: 'Your accont disabled',\r\n    html: `<table style=\"border-collapse:collapse;border-spacing:0;width:100%;min-width:100%\" width=\"100%\" height=\"auto\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#F0F0F0\">\r\n        <tbody><tr>\r\n        <td style=\"padding-top:54px;padding-bottom:42px\" align=\"center\">\r\n        <h2 style=\"color:#0090c6;font-size: xx-large;\">E-commerce ATLP-Legends project</h2>\r\n        </td>\r\n        </tr>\r\n        </tbody></table>\r\n        <p> Dear <h2> ${existingUser.firstname} </h2> We regret to inform you that your account on our website has been disabled due to some illegal activities.\r\n         Our team has conducted a thorough investigation and found evidence of wrongdoing, which is against our policies.</p>\r\n        \r\n        <p>As a result, we had to disable your account to protect the security and integrity of our platform. \r\n        We take the security of our website and our users very seriously, and we will not tolerate any illegal activities or behavior.</p>\r\n\r\n        <p>Please note that you will no longer be able to access your account or any associated services. \r\n        If you have any questions or concerns about this decision, please feel free to contact us at <a href=\"mailto:mwanafunzifabrice@gmail.com\">CONTACT US</a>.</p>\r\n\r\n        <p><i>Thank you for your understanding and cooperation.</i></p>\r\n\r\n        <h3>Best regards,</h3>\r\n        <h5><i>E-commerce ATLP-Legends project team</i></h5>\r\n        `,\r\n  };\r\n  await sendEmail(sendemailOpt);\r\n  existingUser.status = 'inactive';\r\n  res\r\n    .status(200)\r\n    .json({ status: 'success', message: req.t('disabled_successfully') });\r\n  existingUser.save();\r\n});\r\n\r\nexport const enableUser = asyncWrapper(async (req, res, next) => {\r\n  const userId = req.params.id;\r\n  const existingUser = await user.findByPk(userId);\r\n\r\n  if (!existingUser) {\r\n    return res\r\n      .status(404)\r\n      .json({ status: 'fail', message: req.t('user_not_found') });\r\n  } else if (existingUser.status === 'active') {\r\n    return res\r\n      .status(403)\r\n      .json({ status: 'fail', message: req.t('already_enabled') });\r\n  }\r\n  const sendemailOpt = {\r\n    email: existingUser.email,\r\n    subject: 'Your accont disabled',\r\n    html: `<table style=\"border-collapse:collapse;border-spacing:0;width:100%;min-width:100%\" width=\"100%\" height=\"auto\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#F0F0F0\">\r\n        <tbody><tr>\r\n        <td style=\"padding-top:54px;padding-bottom:42px\" align=\"center\">\r\n        <h2 style=\"color:#0090c6;font-size: xx-large;\">E-commerce ATLP-Legends project</h2>\r\n        </td>\r\n        </tr>\r\n        </tbody></table>\r\n        <p> Dear <h2> ${existingUser.firstname} </h2> We hope this email finds you well. I am writing to inform you that your account has been successfully enabled.</p>\r\n        \r\n        <p>As you may be aware, your account was previously disabled, but we are pleased to inform you that it has now been reactivated. We apologize for any inconvenience this may have caused and are glad to have you back as an active member of our website.</p>\r\n\r\n        <p>Please note that an email notification has been sent to your registered email address regarding the reactivation of your account. If you have any further questions or concerns, please do not hesitate to contact us. <a href=\"mailto:mwanafunzifabrice@gmail.com\">CONTACT US</a>.</p>\r\n\r\n        <p><i>Thank you for choosing our website, and we look forward to your continued use of our services.</i></p>\r\n\r\n        <h3>Best regards,</h3>\r\n        <h5><i>E-commerce ATLP-Legends project team</i></h5>\r\n        `,\r\n  };\r\n  await sendEmail(sendemailOpt);\r\n  existingUser.status = 'active';\r\n  res\r\n    .status(200)\r\n    .json({ status: 'success', message: req.t('enabled_successfully') });\r\n  existingUser.save();\r\n});\r\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,uBAAA,GAAAH,OAAA;AAAkE,SAAAE,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAC3D,MAAMG,WAAW,GAAG,IAAAC,oCAAY,EAAC,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAChE,MAAMC,MAAM,GAAGH,GAAG,CAACI,MAAM,CAACC,EAAE;EAC5B,MAAMC,YAAY,GAAG,MAAMC,YAAI,CAACC,QAAQ,CAACL,MAAM,CAAC;EAChD,IAAI,CAACG,YAAY,EAAE;IACjB,OAAOL,GAAG,CACPQ,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;MAAED,MAAM,EAAE,MAAM;MAAEE,OAAO,EAAEX,GAAG,CAACY,CAAC,CAAC,gBAAgB;IAAE,CAAC,CAAC;EAC/D,CAAC,MAAM,IAAIN,YAAY,CAACG,MAAM,KAAK,UAAU,EAAE;IAC7C,OAAOR,GAAG,CACPQ,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;MAAED,MAAM,EAAE,MAAM;MAAEE,OAAO,EAAEX,GAAG,CAACY,CAAC,CAAC,kBAAkB;IAAE,CAAC,CAAC;EACjE;EACA,MAAMC,YAAY,GAAG;IACnBC,KAAK,EAAER,YAAY,CAACQ,KAAK;IACzBC,OAAO,EAAE,sBAAsB;IAC/BC,IAAI,EAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwBV,YAAY,CAACW,SAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE,CAAC;EACD,MAAM,IAAAC,kBAAS,EAACL,YAAY,CAAC;EAC7BP,YAAY,CAACG,MAAM,GAAG,UAAU;EAChCR,GAAG,CACAQ,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;IAAED,MAAM,EAAE,SAAS;IAAEE,OAAO,EAAEX,GAAG,CAACY,CAAC,CAAC,uBAAuB;EAAE,CAAC,CAAC;EACvEN,YAAY,CAACa,IAAI,EAAE;AACrB,CAAC,CAAC;AAACC,OAAA,CAAAtB,WAAA,GAAAA,WAAA;AAEI,MAAMuB,UAAU,GAAG,IAAAtB,oCAAY,EAAC,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC/D,MAAMC,MAAM,GAAGH,GAAG,CAACI,MAAM,CAACC,EAAE;EAC5B,MAAMC,YAAY,GAAG,MAAMC,YAAI,CAACC,QAAQ,CAACL,MAAM,CAAC;EAEhD,IAAI,CAACG,YAAY,EAAE;IACjB,OAAOL,GAAG,CACPQ,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;MAAED,MAAM,EAAE,MAAM;MAAEE,OAAO,EAAEX,GAAG,CAACY,CAAC,CAAC,gBAAgB;IAAE,CAAC,CAAC;EAC/D,CAAC,MAAM,IAAIN,YAAY,CAACG,MAAM,KAAK,QAAQ,EAAE;IAC3C,OAAOR,GAAG,CACPQ,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;MAAED,MAAM,EAAE,MAAM;MAAEE,OAAO,EAAEX,GAAG,CAACY,CAAC,CAAC,iBAAiB;IAAE,CAAC,CAAC;EAChE;EACA,MAAMC,YAAY,GAAG;IACnBC,KAAK,EAAER,YAAY,CAACQ,KAAK;IACzBC,OAAO,EAAE,sBAAsB;IAC/BC,IAAI,EAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwBV,YAAY,CAACW,SAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE,CAAC;EACD,MAAM,IAAAC,kBAAS,EAACL,YAAY,CAAC;EAC7BP,YAAY,CAACG,MAAM,GAAG,QAAQ;EAC9BR,GAAG,CACAQ,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC;IAAED,MAAM,EAAE,SAAS;IAAEE,OAAO,EAAEX,GAAG,CAACY,CAAC,CAAC,sBAAsB;EAAE,CAAC,CAAC;EACtEN,YAAY,CAACa,IAAI,EAAE;AACrB,CAAC,CAAC;AAACC,OAAA,CAAAC,UAAA,GAAAA,UAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"16ea52d2008adf36521c057080c536b2d89d1d46","contentHash":"6644d64223f015791d537ba7ad41d58327117ebbaa0e6d3c516b92ea343e1831"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\users\\userRoutes.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\users\\userRoutes.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"3":{"start":{"line":8,"column":24},"end":{"line":8,"column":75}},"4":{"start":{"line":9,"column":26},"end":{"line":9,"column":102}},"5":{"start":{"line":10,"column":18},"end":{"line":10,"column":62}},"6":{"start":{"line":11,"column":12},"end":{"line":11,"column":44}},"7":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"8":{"start":{"line":13,"column":15},"end":{"line":13,"column":40}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":63}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":92}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":53}},"12":{"start":{"line":17,"column":0},"end":{"line":17,"column":80}},"13":{"start":{"line":19,"column":0},"end":{"line":19,"column":116}},"14":{"start":{"line":20,"column":15},"end":{"line":20,"column":21}},"15":{"start":{"line":21,"column":0},"end":{"line":21,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":2,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1},"f":{"0":2},"b":{"0":[1,1],"1":[2,2]},"inputSourceMap":{"version":3,"names":["_express","_interopRequireDefault","require","_usersControllers","_registerController","_updateUser","_auth","obj","__esModule","default","router","express","Router","post","userAuthController","register","put","auth","isUserEnabled","updateUser","verifyEmail","authent","resetPassword","updatePassword","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\users\\","sources":["userRoutes.js"],"sourcesContent":["import express from 'express';\r\nimport { verifyEmail, resetPassword, resetPass, updatePassword} from '../../controllers/users/usersControllers';\r\nimport userAuthController from '../../controllers/Auth/registerController';\r\nimport { updateUser } from '../../controllers/Auth/updateUser';\r\nimport { auth, authent } from '../../middleware/auth';\r\nimport { isUserEnabled } from '../../middleware/auth';\r\n\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post('/register', userAuthController.register)\r\nrouter.put('/users', auth('buyer'),isUserEnabled, updateUser); // update endpoint for user's own profile\r\nrouter.post('/email', verifyEmail);\r\nrouter.post('/password/:token',authent, resetPassword);\r\n// router.post('/password',auth('all'), isUserEnabled, resetPass);\r\nrouter.put('/users/password/update',auth('all'), isUserEnabled, updatePassword);\r\n\r\nexport default router;\r\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,iBAAA,GAAAD,OAAA;AACA,IAAAE,mBAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,WAAA,GAAAH,OAAA;AACA,IAAAI,KAAA,GAAAJ,OAAA;AAAsD,SAAAD,uBAAAM,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAItD,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/BF,MAAM,CAACG,IAAI,CAAC,WAAW,EAAEC,2BAAkB,CAACC,QAAQ,CAAC;AACrDL,MAAM,CAACM,GAAG,CAAC,QAAQ,EAAE,IAAAC,UAAI,EAAC,OAAO,CAAC,EAACC,mBAAa,EAAEC,sBAAU,CAAC,CAAC,CAAC;AAC/DT,MAAM,CAACG,IAAI,CAAC,QAAQ,EAAEO,6BAAW,CAAC;AAClCV,MAAM,CAACG,IAAI,CAAC,kBAAkB,EAACQ,aAAO,EAAEC,+BAAa,CAAC;AACtD;AACAZ,MAAM,CAACM,GAAG,CAAC,wBAAwB,EAAC,IAAAC,UAAI,EAAC,KAAK,CAAC,EAAEC,mBAAa,EAAEK,gCAAc,CAAC;AAAC,IAAAC,QAAA,GAEjEd,MAAM;AAAAe,OAAA,CAAAhB,OAAA,GAAAe,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6f10eeb50fbfd75f4386cba8ffbb99f4fef25c2b","contentHash":"fdb2bbfb777ee9129dcd2dad141744e02bfa6ba139c9b3bf8d5ecfed71c0efeb"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\users\\usersControllers.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\users\\usersControllers.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":78}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":17},"end":{"line":8,"column":73}},"4":{"start":{"line":9,"column":20},"end":{"line":9,"column":55}},"5":{"start":{"line":10,"column":22},"end":{"line":10,"column":59}},"6":{"start":{"line":11,"column":21},"end":{"line":11,"column":82}},"7":{"start":{"line":12,"column":14},"end":{"line":12,"column":55}},"8":{"start":{"line":13,"column":16},"end":{"line":13,"column":60}},"9":{"start":{"line":14,"column":20},"end":{"line":14,"column":67}},"10":{"start":{"line":15,"column":14},"end":{"line":15,"column":55}},"11":{"start":{"line":16,"column":30},"end":{"line":16,"column":75}},"12":{"start":{"line":17,"column":39},"end":{"line":17,"column":93}},"13":{"start":{"line":18,"column":0},"end":{"line":18,"column":25}},"14":{"start":{"line":19,"column":13},"end":{"line":19,"column":21}},"15":{"start":{"line":20,"column":20},"end":{"line":64,"column":1}},"16":{"start":{"line":23,"column":6},"end":{"line":23,"column":14}},"17":{"start":{"line":24,"column":2},"end":{"line":63,"column":5}},"18":{"start":{"line":29,"column":18},"end":{"line":33,"column":6}},"19":{"start":{"line":34,"column":4},"end":{"line":34,"column":22}},"20":{"start":{"line":35,"column":25},"end":{"line":53,"column":5}},"21":{"start":{"line":56,"column":4},"end":{"line":56,"column":58}},"22":{"start":{"line":58,"column":4},"end":{"line":58,"column":23}},"23":{"start":{"line":59,"column":4},"end":{"line":62,"column":7}},"24":{"start":{"line":65,"column":0},"end":{"line":65,"column":34}},"25":{"start":{"line":66,"column":22},"end":{"line":94,"column":1}},"26":{"start":{"line":69,"column":6},"end":{"line":69,"column":14}},"27":{"start":{"line":70,"column":20},"end":{"line":70,"column":67}},"28":{"start":{"line":71,"column":12},"end":{"line":71,"column":20}},"29":{"start":{"line":72,"column":16},"end":{"line":72,"column":28}},"30":{"start":{"line":73,"column":2},"end":{"line":93,"column":3}},"31":{"start":{"line":74,"column":4},"end":{"line":87,"column":7}},"32":{"start":{"line":79,"column":6},"end":{"line":79,"column":32}},"33":{"start":{"line":80,"column":6},"end":{"line":80,"column":25}},"34":{"start":{"line":82,"column":6},"end":{"line":82,"column":24}},"35":{"start":{"line":83,"column":6},"end":{"line":86,"column":9}},"36":{"start":{"line":89,"column":4},"end":{"line":92,"column":7}},"37":{"start":{"line":121,"column":0},"end":{"line":121,"column":38}},"38":{"start":{"line":122,"column":24},"end":{"line":127,"column":1}},"39":{"start":{"line":123,"column":15},"end":{"line":123,"column":58}},"40":{"start":{"line":124,"column":2},"end":{"line":126,"column":5}},"41":{"start":{"line":128,"column":23},"end":{"line":159,"column":2}},"42":{"start":{"line":129,"column":21},"end":{"line":129,"column":46}},"43":{"start":{"line":130,"column":16},"end":{"line":130,"column":40}},"44":{"start":{"line":131,"column":23},"end":{"line":131,"column":82}},"45":{"start":{"line":132,"column":17},"end":{"line":132,"column":37}},"46":{"start":{"line":133,"column":15},"end":{"line":137,"column":4}},"47":{"start":{"line":138,"column":31},"end":{"line":138,"column":44}},"48":{"start":{"line":142,"column":6},"end":{"line":142,"column":14}},"49":{"start":{"line":143,"column":28},"end":{"line":143,"column":97}},"50":{"start":{"line":144,"column":2},"end":{"line":149,"column":3}},"51":{"start":{"line":145,"column":4},"end":{"line":148,"column":7}},"52":{"start":{"line":150,"column":20},"end":{"line":150,"column":70}},"53":{"start":{"line":151,"column":2},"end":{"line":153,"column":5}},"54":{"start":{"line":154,"column":2},"end":{"line":154,"column":26}},"55":{"start":{"line":155,"column":2},"end":{"line":158,"column":5}},"56":{"start":{"line":160,"column":0},"end":{"line":160,"column":40}},"57":{"start":{"line":161,"column":0},"end":{"line":171,"column":3}},"58":{"start":{"line":162,"column":16},"end":{"line":162,"column":52}},"59":{"start":{"line":163,"column":2},"end":{"line":170,"column":3}},"60":{"start":{"line":164,"column":23},"end":{"line":164,"column":60}},"61":{"start":{"line":165,"column":24},"end":{"line":165,"column":34}},"62":{"start":{"line":166,"column":27},"end":{"line":166,"column":89}},"63":{"start":{"line":167,"column":4},"end":{"line":169,"column":5}},"64":{"start":{"line":168,"column":6},"end":{"line":168,"column":62}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":31}},"loc":{"start":{"line":17,"column":37},"end":{"line":17,"column":95}},"line":17},"1":{"name":"(anonymous_1)","decl":{"start":{"line":20,"column":20},"end":{"line":20,"column":21}},"loc":{"start":{"line":20,"column":40},"end":{"line":64,"column":1}},"line":20},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":10},"end":{"line":28,"column":11}},"loc":{"start":{"line":28,"column":24},"end":{"line":57,"column":3}},"line":28},"3":{"name":"(anonymous_3)","decl":{"start":{"line":57,"column":11},"end":{"line":57,"column":12}},"loc":{"start":{"line":57,"column":20},"end":{"line":63,"column":3}},"line":57},"4":{"name":"(anonymous_4)","decl":{"start":{"line":66,"column":22},"end":{"line":66,"column":23}},"loc":{"start":{"line":66,"column":42},"end":{"line":94,"column":1}},"line":66},"5":{"name":"(anonymous_5)","decl":{"start":{"line":78,"column":12},"end":{"line":78,"column":13}},"loc":{"start":{"line":78,"column":26},"end":{"line":81,"column":5}},"line":78},"6":{"name":"(anonymous_6)","decl":{"start":{"line":81,"column":12},"end":{"line":81,"column":13}},"loc":{"start":{"line":81,"column":18},"end":{"line":87,"column":5}},"line":81},"7":{"name":"(anonymous_7)","decl":{"start":{"line":122,"column":24},"end":{"line":122,"column":25}},"loc":{"start":{"line":122,"column":40},"end":{"line":127,"column":1}},"line":122},"8":{"name":"(anonymous_8)","decl":{"start":{"line":128,"column":65},"end":{"line":128,"column":66}},"loc":{"start":{"line":128,"column":85},"end":{"line":159,"column":1}},"line":128},"9":{"name":"(anonymous_9)","decl":{"start":{"line":161,"column":42},"end":{"line":161,"column":43}},"loc":{"start":{"line":161,"column":54},"end":{"line":171,"column":1}},"line":161}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":46},"end":{"line":17,"column":92}},"type":"cond-expr","locations":[{"start":{"line":17,"column":70},"end":{"line":17,"column":73}},{"start":{"line":17,"column":76},"end":{"line":17,"column":92}}],"line":17},"1":{"loc":{"start":{"line":17,"column":46},"end":{"line":17,"column":67}},"type":"binary-expr","locations":[{"start":{"line":17,"column":46},"end":{"line":17,"column":49}},{"start":{"line":17,"column":53},"end":{"line":17,"column":67}}],"line":17},"2":{"loc":{"start":{"line":73,"column":2},"end":{"line":93,"column":3}},"type":"if","locations":[{"start":{"line":73,"column":2},"end":{"line":93,"column":3}},{"start":{"line":73,"column":2},"end":{"line":93,"column":3}}],"line":73},"3":{"loc":{"start":{"line":144,"column":2},"end":{"line":149,"column":3}},"type":"if","locations":[{"start":{"line":144,"column":2},"end":{"line":149,"column":3}},{"start":{"line":144,"column":2},"end":{"line":149,"column":3}}],"line":144},"4":{"loc":{"start":{"line":167,"column":4},"end":{"line":169,"column":5}},"type":"if","locations":[{"start":{"line":167,"column":4},"end":{"line":169,"column":5}},{"start":{"line":167,"column":4},"end":{"line":169,"column":5}}],"line":167}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":7,"13":1,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":1,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":1,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0},"f":{"0":7,"1":1,"2":0,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"b":{"0":[2,5],"1":[7,7],"2":[0,0],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_sendEmail","_hashpassword","_verifyPassword","_notifications","_bcrypt","_nodeCron","_jsonwebtoken","_dotenv","_handlingTryCatchBlocks","obj","__esModule","default","dotenv","config","status","verifyEmail","req","res","email","body","db","user","findOne","where","then","token","signToken","id","reason","emailContent","subject","process","env","APP_NAME","html","lastname","PORT","sendEmail","catch","error","console","log","json","t","message","exports","resetPassword","password","hashedPwd","hashPassword","u","save","updatedPassword","userId","findByPk","update","lastPasswordUpdate","Date","updatePassword","asyncWrapper","authHeader","headers","authorization","split","decodedToken","JWT","verify","JWT_SECRET","existingUserPassword","existingPassword","newPassword","isPasswordCorrect","bcrypt","compare","cron","schedule","users","findAll","allUsers","lastUpdate","currentTime","timeDiffInDays","Math","round","emitter","emit"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\users\\","sources":["usersControllers.js"],"sourcesContent":["import db from '../../database/models';\r\nimport sendEmail from '../../utils/sendEmail';\r\nimport { hashPassword } from '../../utils/hashpassword';\r\nimport { comparePassword, signToken } from '../../utils/verifyPassword';\r\nimport emitter from '../../events/notifications';\r\nimport bcrypt from 'bcrypt';\r\nimport cron from 'node-cron';\r\nimport JWT from 'jsonwebtoken';\r\nimport dotenv from 'dotenv';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\ndotenv.config();\r\nlet status = 'denied';\r\nexport const verifyEmail = async (req, res) => {\r\n  const { email } = req.body;\r\n  await db.user\r\n    .findOne({ where: { email: email } })\r\n    .then(async (user) => {\r\n      const token = await signToken({\r\n        id: user.id,\r\n        email: email,\r\n        reason: 'reset',\r\n      });\r\n      status = 'access';\r\n      const emailContent = {\r\n        email: email,\r\n        token: token,\r\n        subject: ` ${process.env.APP_NAME} , Password reset`,\r\n        html: `<table style=\"border-collapse:collapse;border-spacing:0;width:100%;min-width:100%\" width=\"100%\" height=\"auto\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#F0F0F0\">\r\n        <tbody><tr>\r\n        <td style=\"padding-top:54px;padding-bottom:42px\" align=\"center\">\r\n        <h2 style=\"color:#0090c6;font-size: xx-large;\">E-commerce ATLP-Legends project</h2>\r\n        </td>\r\n        </tr>\r\n        </tbody></table>\r\n        <p> Hello ${user.lastname},,</p><br/>\\\r\n        <p>http:/localhost:${process.env.PORT}/api/v1/password/${token}</p><br/>\\\r\n        <h4>If you want to reset your password then click on below link </h4><br/>\\\r\n        <a href=\"http:/localhost:${process.env.PORT}/api/v1/password/${token}\">Click here</a>\r\n        <h3>Best regards,</h3>\r\n        <h5><i>E-commerce ATLP-Legends project team</i></h5>\r\n        `,\r\n      };\r\n\r\n      // Send the email\r\n      await sendEmail(emailContent, req, res);\r\n    })\r\n\r\n    .catch((error) => {\r\n      console.log(error);\r\n      res.status(404).json({\r\n        status: req.t('fail'),\r\n        message: req.t('email_fail'),\r\n      });\r\n    });\r\n};\r\nexport const resetPassword = async (req, res) => {\r\n  const { password } = req.body;\r\n  const hashedPwd = await hashPassword(password);\r\n  const u = req.user;\r\n  const email = u.user.email;\r\n  if (status === 'access') {\r\n    db.user\r\n      .findOne({ where: { email: email } })\r\n      .then(async (user) => {\r\n        user.password = hashedPwd;\r\n        return user.save();\r\n      })\r\n      .then(() => {\r\n        status = 'denied';\r\n        res.status(200).json({\r\n          status: req.t('success'),\r\n          message: req.t('password_updated'),\r\n        });\r\n      });\r\n  } else {\r\n    res.status(404).json({ status: req.t('fail'), message: req.t('auth_message') });\r\n  }\r\n};\r\n\r\n// export const resetPass = async (req, res) => {\r\n//   const { xpassword, npassword } = req.body;\r\n//   const email = req.user.email;\r\n//   const userr = await db.user.findOne({ where: { email: email } });\r\n//   const verifyedPassword = await comparePassword(xpassword, userr.password);\r\n//   if (!verifyedPassword) {\r\n//     return res.status(401).json({\r\n//       status: req.t('fail'),\r\n//       message: req.t('wrong_password'),\r\n//     });\r\n//   }\r\n//   const hashedPwd = await hashPassword(npassword);\r\n//   db.user\r\n//     .findOne({ where: { email: email } })\r\n//     .then(async (user) => {\r\n//       user.password = hashedPwd;\r\n//       return user.save();\r\n//     })\r\n//     .then(() => {\r\n//       res.send({\r\n//         status: req.t('success'),\r\n//         message: req.t('password_updated'),\r\n//       });\r\n//     });\r\n// };\r\n\r\nconst updatedPassword = async (userId) => {\r\n  const user = await db.user.findByPk(userId);\r\n  user.update({ lastPasswordUpdate: new Date() });\r\n};\r\n\r\nexport const updatePassword = asyncWrapper(async (req, res) => {\r\n  const authHeader = req.headers.authorization;\r\n  const token = authHeader.split(' ')[1];\r\n  const decodedToken = JWT.verify(token, process.env.JWT_SECRET);\r\n  const userId = decodedToken.user.id;\r\n  const user = await db.user.findOne({ where: { id: userId } });\r\n  const existingUserPassword = user.password;\r\n  const { existingPassword, newPassword } = req.body;\r\n  const isPasswordCorrect = await bcrypt.compare(existingPassword, existingUserPassword);\r\n  if (!isPasswordCorrect) {\r\n    return res.status(401).json({\r\n      status: req.t('fail'),\r\n      message: req.t('existing_password'),\r\n    });\r\n  }\r\n  const hashedPwd = await hashPassword(newPassword);\r\n  user.update({ password: hashedPwd });\r\n  updatedPassword(userId);\r\n\r\n  return res.status(200).json({\r\n    status: req.t('success'),\r\n    message: req.t('password_updated'),\r\n  });\r\n});\r\n\r\ncron.schedule('30 17 * * *', async () => {\r\n  const users = await db.user.findAll();\r\n  for (const allUsers of users) {\r\n    const lastUpdate = new Date(allUsers.lastPasswordUpdate);\r\n    const currentTime = new Date();\r\n    const timeDiffInDays = Math.round(\r\n      (currentTime - lastUpdate) / (1000 * 60 * 60 * 24)\r\n    );\r\n    if (timeDiffInDays >= 365) {\r\n      emitter.emit('updatePassword', allUsers);\r\n    }\r\n  }\r\n});"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"738456976251acaf6a53fef460f0ffd5b9d8776d","contentHash":"c229d1a8cdd0cb1ce857b76be41eedc97134c4ac77cf4bb579e6a2a24c266e36"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\events\\notifications.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\events\\notifications.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":31}},"3":{"start":{"line":8,"column":32},"end":{"line":8,"column":87}},"4":{"start":{"line":9,"column":16},"end":{"line":9,"column":42}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":69}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":75}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":75}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":79}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":76}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":75}},"11":{"start":{"line":16,"column":15},"end":{"line":16,"column":22}},"12":{"start":{"line":17,"column":0},"end":{"line":17,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["_events","require","_notificationsContrloller","emitter","EventEmitter","on","emitProductAdded","emitProductRemoved","emitProductExpired","emitProductPurchased","emitCategoryAdded","emitUpdatePassword","_default","exports","default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\events\\","sources":["notifications.js"],"sourcesContent":["import { EventEmitter } from 'events';\r\nimport { \r\n    emitProductAdded, \r\n    emitProductRemoved, \r\n    emitProductExpired, \r\n    emitProductPurchased, \r\n    emitCategoryAdded,\r\n    emitUpdatePassword, \r\n} from '../controllers/Auth/notificationsContrloller';\r\nconst emitter = new EventEmitter();\r\n\r\nemitter.on('newProduct', emitProductAdded);\r\nemitter.on('productRemoved', emitProductRemoved)\r\nemitter.on('productExpired', emitProductExpired)\r\nemitter.on('productPurchased', emitProductPurchased)\r\nemitter.on('newCategoryAdded', emitCategoryAdded)\r\nemitter.on('updatePassword', emitUpdatePassword)\r\n\r\nexport default emitter;\r\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,yBAAA,GAAAD,OAAA;AAQA,MAAME,OAAO,GAAG,IAAIC,oBAAY,EAAE;AAElCD,OAAO,CAACE,EAAE,CAAC,YAAY,EAAEC,0CAAgB,CAAC;AAC1CH,OAAO,CAACE,EAAE,CAAC,gBAAgB,EAAEE,4CAAkB,CAAC;AAChDJ,OAAO,CAACE,EAAE,CAAC,gBAAgB,EAAEG,4CAAkB,CAAC;AAChDL,OAAO,CAACE,EAAE,CAAC,kBAAkB,EAAEI,8CAAoB,CAAC;AACpDN,OAAO,CAACE,EAAE,CAAC,kBAAkB,EAAEK,2CAAiB,CAAC;AACjDP,OAAO,CAACE,EAAE,CAAC,gBAAgB,EAAEM,4CAAkB,CAAC;AAAA,IAAAC,QAAA,GAEjCT,OAAO;AAAAU,OAAA,CAAAC,OAAA,GAAAF,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5a6b4b3067b1c040da1f2ed3e36cc59b5b5d9a01","contentHash":"5d6a8bb64ad0b9d1576551a81ac9251d5d86911cd0fba5223353db4a601bf4f0"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\notificationsContrloller.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\notificationsContrloller.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":180}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":17},"end":{"line":8,"column":73}},"4":{"start":{"line":9,"column":14},"end":{"line":9,"column":65}},"5":{"start":{"line":10,"column":16},"end":{"line":10,"column":60}},"6":{"start":{"line":11,"column":39},"end":{"line":11,"column":93}},"7":{"start":{"line":12,"column":23},"end":{"line":18,"column":17}},"8":{"start":{"line":19,"column":23},"end":{"line":20,"column":53}},"9":{"start":{"line":21,"column":26},"end":{"line":53,"column":1}},"10":{"start":{"line":22,"column":21},"end":{"line":26,"column":4}},"11":{"start":{"line":27,"column":2},"end":{"line":27,"column":26}},"12":{"start":{"line":27,"column":19},"end":{"line":27,"column":26}},"13":{"start":{"line":28,"column":17},"end":{"line":32,"column":4}},"14":{"start":{"line":33,"column":17},"end":{"line":33,"column":62}},"15":{"start":{"line":34,"column":2},"end":{"line":34,"column":22}},"16":{"start":{"line":34,"column":15},"end":{"line":34,"column":22}},"17":{"start":{"line":35,"column":2},"end":{"line":52,"column":3}},"18":{"start":{"line":36,"column":25},"end":{"line":41,"column":6}},"19":{"start":{"line":42,"column":25},"end":{"line":46,"column":5}},"20":{"start":{"line":47,"column":4},"end":{"line":47,"column":48}},"21":{"start":{"line":48,"column":4},"end":{"line":51,"column":7}},"22":{"start":{"line":54,"column":0},"end":{"line":54,"column":46}},"23":{"start":{"line":55,"column":25},"end":{"line":73,"column":1}},"24":{"start":{"line":56,"column":17},"end":{"line":56,"column":62}},"25":{"start":{"line":57,"column":23},"end":{"line":62,"column":4}},"26":{"start":{"line":63,"column":23},"end":{"line":67,"column":3}},"27":{"start":{"line":68,"column":2},"end":{"line":68,"column":46}},"28":{"start":{"line":69,"column":2},"end":{"line":72,"column":5}},"29":{"start":{"line":74,"column":0},"end":{"line":74,"column":44}},"30":{"start":{"line":75,"column":27},"end":{"line":93,"column":1}},"31":{"start":{"line":76,"column":17},"end":{"line":76,"column":62}},"32":{"start":{"line":77,"column":23},"end":{"line":82,"column":4}},"33":{"start":{"line":83,"column":23},"end":{"line":87,"column":3}},"34":{"start":{"line":88,"column":2},"end":{"line":88,"column":46}},"35":{"start":{"line":89,"column":2},"end":{"line":92,"column":5}},"36":{"start":{"line":94,"column":0},"end":{"line":94,"column":48}},"37":{"start":{"line":95,"column":27},"end":{"line":113,"column":1}},"38":{"start":{"line":96,"column":17},"end":{"line":96,"column":62}},"39":{"start":{"line":97,"column":23},"end":{"line":102,"column":4}},"40":{"start":{"line":103,"column":23},"end":{"line":107,"column":3}},"41":{"start":{"line":108,"column":2},"end":{"line":108,"column":46}},"42":{"start":{"line":109,"column":2},"end":{"line":112,"column":5}},"43":{"start":{"line":114,"column":0},"end":{"line":114,"column":48}},"44":{"start":{"line":115,"column":29},"end":{"line":157,"column":1}},"45":{"start":{"line":116,"column":17},"end":{"line":116,"column":62}},"46":{"start":{"line":117,"column":20},"end":{"line":121,"column":4}},"47":{"start":{"line":122,"column":20},"end":{"line":126,"column":4}},"48":{"start":{"line":127,"column":20},"end":{"line":131,"column":4}},"49":{"start":{"line":132,"column":20},"end":{"line":136,"column":4}},"50":{"start":{"line":137,"column":2},"end":{"line":137,"column":39}},"51":{"start":{"line":137,"column":32},"end":{"line":137,"column":39}},"52":{"start":{"line":138,"column":19},"end":{"line":138,"column":46}},"53":{"start":{"line":139,"column":2},"end":{"line":156,"column":3}},"54":{"start":{"line":140,"column":25},"end":{"line":145,"column":6}},"55":{"start":{"line":146,"column":25},"end":{"line":150,"column":5}},"56":{"start":{"line":151,"column":4},"end":{"line":151,"column":48}},"57":{"start":{"line":152,"column":4},"end":{"line":155,"column":7}},"58":{"start":{"line":158,"column":0},"end":{"line":158,"column":52}},"59":{"start":{"line":159,"column":27},"end":{"line":186,"column":1}},"60":{"start":{"line":160,"column":17},"end":{"line":160,"column":62}},"61":{"start":{"line":161,"column":23},"end":{"line":166,"column":4}},"62":{"start":{"line":167,"column":23},"end":{"line":180,"column":3}},"63":{"start":{"line":181,"column":2},"end":{"line":181,"column":46}},"64":{"start":{"line":182,"column":2},"end":{"line":185,"column":5}},"65":{"start":{"line":187,"column":0},"end":{"line":187,"column":48}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":37},"end":{"line":11,"column":95}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":26},"end":{"line":21,"column":27}},"loc":{"start":{"line":21,"column":44},"end":{"line":53,"column":1}},"line":21},"2":{"name":"(anonymous_2)","decl":{"start":{"line":55,"column":25},"end":{"line":55,"column":26}},"loc":{"start":{"line":55,"column":70},"end":{"line":73,"column":1}},"line":55},"3":{"name":"(anonymous_3)","decl":{"start":{"line":75,"column":27},"end":{"line":75,"column":28}},"loc":{"start":{"line":75,"column":58},"end":{"line":93,"column":1}},"line":75},"4":{"name":"(anonymous_4)","decl":{"start":{"line":95,"column":27},"end":{"line":95,"column":28}},"loc":{"start":{"line":95,"column":68},"end":{"line":113,"column":1}},"line":95},"5":{"name":"(anonymous_5)","decl":{"start":{"line":115,"column":29},"end":{"line":115,"column":30}},"loc":{"start":{"line":115,"column":46},"end":{"line":157,"column":1}},"line":115},"6":{"name":"(anonymous_6)","decl":{"start":{"line":159,"column":27},"end":{"line":159,"column":28}},"loc":{"start":{"line":159,"column":41},"end":{"line":186,"column":1}},"line":159}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":92}},"type":"cond-expr","locations":[{"start":{"line":11,"column":70},"end":{"line":11,"column":73}},{"start":{"line":11,"column":76},"end":{"line":11,"column":92}}],"line":11},"1":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":67}},"type":"binary-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":49}},{"start":{"line":11,"column":53},"end":{"line":11,"column":67}}],"line":11},"2":{"loc":{"start":{"line":27,"column":2},"end":{"line":27,"column":26}},"type":"if","locations":[{"start":{"line":27,"column":2},"end":{"line":27,"column":26}},{"start":{"line":27,"column":2},"end":{"line":27,"column":26}}],"line":27},"3":{"loc":{"start":{"line":34,"column":2},"end":{"line":34,"column":22}},"type":"if","locations":[{"start":{"line":34,"column":2},"end":{"line":34,"column":22}},{"start":{"line":34,"column":2},"end":{"line":34,"column":22}}],"line":34},"4":{"loc":{"start":{"line":137,"column":2},"end":{"line":137,"column":39}},"type":"if","locations":[{"start":{"line":137,"column":2},"end":{"line":137,"column":39}},{"start":{"line":137,"column":2},"end":{"line":137,"column":39}}],"line":137},"5":{"loc":{"start":{"line":137,"column":6},"end":{"line":137,"column":30}},"type":"binary-expr","locations":[{"start":{"line":137,"column":6},"end":{"line":137,"column":16}},{"start":{"line":137,"column":20},"end":{"line":137,"column":30}}],"line":137}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":4,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":1,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1},"f":{"0":4,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{"0":[1,3],"1":[4,4],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_sendEmail","_socket","_nodeCron","obj","__esModule","default","templateHeader","templateFotter","emitCategoryAdded","category","vendorRole","db","role","findOne","where","name","vendor","user","findAll","roleId","id","socket","socketIOClient","notification","create","subject","message","firstname","type","userId","sendemailOpt","email","html","sendEmail","emit","exports","emitProductAdded","productName","categoryName","emitProductRemoved","emitProductExpired","productOwnerUser","emitProductPurchased","invoice","buyerRole","allBuyers","adminRole","allAdmins","allUsers","concat","emitUpdatePassword"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\","sources":["notificationsContrloller.js"],"sourcesContent":["import db from '../../database/models'\r\nimport  sendEmail from '../../utils/sendEmail'\r\nimport socketIOClient from 'socket.io-client';\r\nimport cron from 'node-cron'\r\n\r\nconst templateHeader = `<table style=\"border-collapse:collapse;border-spacing:0;width:100%;min-width:100%\" width=\"100%\" height=\"auto\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#F0F0F0\">\r\n<tbody><tr>\r\n<td style=\"padding-top:54px;padding-bottom:42px\" align=\"center\">\r\n<h2 style=\"color:#0090c6;font-size: xx-large;\">E-commerce ATLP-Legends project</h2>\r\n</td>\r\n</tr>\r\n</tbody></table>`\r\n\r\nconst templateFotter = `<h3>Best regards,</h3>\r\n<h5><i>E-commerce ATLP-Legends project team</i></h5>`\r\n\r\n\r\nexport const emitCategoryAdded = async (category) => {\r\n  const vendorRole = await db.role.findOne({ where: { name: 'vendor' } });\r\n  if(!vendorRole) return\r\n  const vendor = await db.user.findAll({ where: { roleId: vendorRole.id } });\r\n  const socket = socketIOClient('http://localhost:5000');\r\n  if(!vendor) return\r\n  for(const user of vendor){\r\n      const notification = await db.notification.create({\r\n          subject: `📢 New category added`,\r\n          message: `📢 Hello ${user.firstname} new category called ${category.name} created by admin 📢`,\r\n          type: 'newCategory',\r\n          userId: user.id,\r\n      });\r\n      const sendemailOpt = {\r\n          email: user.email,\r\n          subject: notification.subject,\r\n          html: `${templateHeader} <p> Dear <h2> ${user.firstname} </h2> We want to inform you new category <b>${category.name}</b>  added by admin, you can add related product on it 🍏</p> ${templateFotter}`,\r\n      };\r\n\r\n      await sendEmail(sendemailOpt);\r\n    socket.emit(\"notification\", {\r\n      message: notification.message,\r\n      userId: user.id\r\n    });\r\n  }\r\n};\r\n\r\n\r\nexport const emitProductAdded = async (productName, vendor, categoryName) => {\r\n\r\n    const socket = socketIOClient('http://localhost:5000');\r\n        const notification = await db.notification.create({\r\n            subject: `New Product added`,\r\n            message: `🍏 Hello ${vendor.firstname} your product ${productName} added into ${categoryName} category successfully 🍏 `,\r\n            type: 'newProduct',\r\n            userId: vendor.id,\r\n        });\r\n        const sendemailOpt = {\r\n            email: vendor.email,\r\n            subject: notification.subject,\r\n            html: `${templateHeader} <p> Dear <h2> ${vendor.firstname} </h2> We want to inform you that your product <b>${productName}</b>  added into ${categoryName} category successfully, thank you for trading with us 🍏</p> ${templateFotter}`,\r\n        };\r\n\r\n        await sendEmail(sendemailOpt);\r\n        socket.emit(\"notification\", {\r\n        message: notification.message,\r\n        userId: vendor.id\r\n      });\r\n};\r\n\r\n\r\nexport const emitProductRemoved = async (productName, vendor) => {\r\n    const socket = socketIOClient('http://localhost:5000');\r\n        const notification = await db.notification.create({\r\n            subject: `product removed`, \r\n            message: `🍎 Hello ${vendor.firstname} product ${productName} removed into the stock successfully 🍎`,\r\n            type: 'productRemoved',\r\n            userId: vendor.id,\r\n        });\r\n      const sendemailOpt = {\r\n        email: vendor.email,\r\n        subject: notification.subject,\r\n        html: `${templateHeader} <p> Dear <h2> ${vendor.firstname} </h2> We want to inform you that product <b>${productName}</b> removed into stock successfully 🍎</p> ${templateFotter}`,\r\n      };\r\n      await sendEmail(sendemailOpt);\r\n      socket.emit(\"notification\", {\r\n        message: notification.message,\r\n        userId: vendor.id\r\n      });\r\n\r\n    }\r\n\r\n  \r\n\r\n  export const emitProductExpired = async (productName, productOwnerUser) => {\r\n\r\n    const socket = socketIOClient('http://localhost:5000');\r\n    const notification = await db.notification.create({\r\n      subject: `⚠️ Product expired`,\r\n      message: `🍎 ${productName} Product has expired 🍎`,\r\n      type: 'productExpired',\r\n      userId: productOwnerUser.id,\r\n    });\r\n  \r\n    const sendemailOpt = {\r\n      email: productOwnerUser.email,\r\n      subject: notification.subject,\r\n      html: `${templateHeader} <p> Dear <h2> ${productOwnerUser.firstname} </h2> We want to inform you that your <b>${productName}</b> has expired 🍎, <i>Please go and remove it into the stock ASP!</i></p> ${templateFotter}`,\r\n    };\r\n    await sendEmail(sendemailOpt);\r\n    socket.emit('notification', {\r\n      message: notification.message,\r\n      userId: productOwnerUser.id,\r\n    }); \r\n  }\r\n  \r\n\r\n  export const emitProductPurchased = async (invoice) => {\r\n    const socket = socketIOClient('http://localhost:5000');\r\n    const buyerRole = await db.role.findOne({ where: { name: 'vendor' } });\r\n    const allBuyers = await db.user.findAll({ where: { roleId: buyerRole.id } });\r\n    const adminRole = await db.role.findOne({ where: { name: 'admin' } });\r\n    const allAdmins = await db.user.findAll({ where: { roleId: adminRole.id } });\r\n    if(!allBuyers || !allAdmins) return;\r\n    const allUsers = allAdmins.concat(allBuyers);\r\n    for (const user of allUsers) {\r\n        const notification = await db.notification.create({\r\n            subject: `Product Purchased`,\r\n            message: `💵 Product purchased, check your email for more details 💵  `,\r\n            type: 'productPurchased',\r\n            userId: user.id,\r\n        });\r\n        const sendemailOpt = {\r\n            email: user.email,\r\n            subject: notification.subject,\r\n            html: `${templateHeader} <p> Dear <h2> ${user.firstname} </h2> We want to inform you that product purchased with the following details <b>${invoice}</b>  🍏</p> ${templateFotter}`,\r\n        };\r\n\r\n      await sendEmail(sendemailOpt);\r\n      socket.emit(\"notification\", {\r\n        message: notification.message,\r\n        userId: user.id\r\n      });\r\n\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\nexport const emitUpdatePassword = async (user) => {\r\n\r\n  const socket = socketIOClient('http://localhost:5000');\r\n      const notification = await db.notification.create({\r\n          subject: `🔐 Update your password`,\r\n          message: `🔐 Hello ${user.firstname} your password need to be updated!, check you email for more details 🔐`,\r\n          type: 'passwordUpdate',\r\n          userId: user.id,\r\n      });\r\n      const sendemailOpt = {\r\n          email: user.email,\r\n          subject: notification.subject,\r\n          html: `${templateHeader} <p> Dear <h2>${user.firstname}</h2> We are writing to inform you that for security purposes, \r\n          it is necessary for you to update your password. \r\n          This will help to ensure the protection of your personal and account information. </p>\r\n          <p>Click on the link below to update your password.</p>\r\n          <a http://localhost:5000/docs/#/Auth/put_api_v1_users_password__userId__update\">Update Password</a>\r\n          <p>We recommend that you choose a strong and unique password that you have not used before. \r\n          Do not share your password with anyone or write it down.</p>\r\n          <p>If you have any questions or concerns regarding this process, \r\n          please do not hesitate to contact our customer support team.</p>\r\n          <p>Thank you for your cooperation in helping to keep your account secure. </p> ${templateFotter}`,\r\n      };\r\n\r\n      await sendEmail(sendemailOpt);\r\n      socket.emit(\"notification\", {\r\n      message: notification.message,\r\n      userId: user.id\r\n    });\r\n};\r\n\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"addac1acaea39012c5328b02cf878f519aaaac8d","contentHash":"0c355ef8be45e3bc53c43c82e085355ac8b0d74147756a469bd2056d61024006"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\registerController.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\registerController.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":46}},"3":{"start":{"line":8,"column":17},"end":{"line":8,"column":73}},"4":{"start":{"line":9,"column":22},"end":{"line":9,"column":59}},"5":{"start":{"line":10,"column":20},"end":{"line":10,"column":55}},"6":{"start":{"line":11,"column":30},"end":{"line":11,"column":75}},"7":{"start":{"line":12,"column":27},"end":{"line":12,"column":81}},"8":{"start":{"line":13,"column":39},"end":{"line":13,"column":93}},"9":{"start":{"line":15,"column":17},"end":{"line":87,"column":2}},"10":{"start":{"line":21,"column":6},"end":{"line":21,"column":14}},"11":{"start":{"line":22,"column":27},"end":{"line":22,"column":79}},"12":{"start":{"line":23,"column":2},"end":{"line":86,"column":3}},"13":{"start":{"line":25,"column":22},"end":{"line":29,"column":6}},"14":{"start":{"line":30,"column":4},"end":{"line":33,"column":7}},"15":{"start":{"line":30,"column":19},"end":{"line":33,"column":7}},"16":{"start":{"line":35,"column":22},"end":{"line":35,"column":69}},"17":{"start":{"line":36,"column":16},"end":{"line":40,"column":6}},"18":{"start":{"line":41,"column":4},"end":{"line":45,"column":5}},"19":{"start":{"line":42,"column":6},"end":{"line":44,"column":9}},"20":{"start":{"line":46,"column":4},"end":{"line":46,"column":34}},"21":{"start":{"line":47,"column":4},"end":{"line":47,"column":37}},"22":{"start":{"line":48,"column":25},"end":{"line":69,"column":5}},"23":{"start":{"line":70,"column":16},"end":{"line":70,"column":18}},"24":{"start":{"line":71,"column":19},"end":{"line":71,"column":54}},"25":{"start":{"line":72,"column":4},"end":{"line":76,"column":7}},"26":{"start":{"line":77,"column":4},"end":{"line":77,"column":27}},"27":{"start":{"line":78,"column":4},"end":{"line":78,"column":49}},"28":{"start":{"line":79,"column":4},"end":{"line":79,"column":48}},"29":{"start":{"line":80,"column":4},"end":{"line":85,"column":7}},"30":{"start":{"line":88,"column":15},"end":{"line":90,"column":1}},"31":{"start":{"line":91,"column":0},"end":{"line":91,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":31}},"loc":{"start":{"line":13,"column":37},"end":{"line":13,"column":95}},"line":13},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":59},"end":{"line":15,"column":60}},"loc":{"start":{"line":15,"column":79},"end":{"line":87,"column":1}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":92}},"type":"cond-expr","locations":[{"start":{"line":13,"column":70},"end":{"line":13,"column":73}},{"start":{"line":13,"column":76},"end":{"line":13,"column":92}}],"line":13},"1":{"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":67}},"type":"binary-expr","locations":[{"start":{"line":13,"column":46},"end":{"line":13,"column":49}},{"start":{"line":13,"column":53},"end":{"line":13,"column":67}}],"line":13},"2":{"loc":{"start":{"line":23,"column":2},"end":{"line":86,"column":3}},"type":"if","locations":[{"start":{"line":23,"column":2},"end":{"line":86,"column":3}},{"start":{"line":23,"column":2},"end":{"line":86,"column":3}}],"line":23},"3":{"loc":{"start":{"line":30,"column":4},"end":{"line":33,"column":7}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":33,"column":7}},{"start":{"line":30,"column":4},"end":{"line":33,"column":7}}],"line":30},"4":{"loc":{"start":{"line":41,"column":4},"end":{"line":45,"column":5}},"type":"if","locations":[{"start":{"line":41,"column":4},"end":{"line":45,"column":5}},{"start":{"line":41,"column":4},"end":{"line":45,"column":5}}],"line":41}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":2,"11":2,"12":2,"13":2,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":1},"f":{"0":1,"1":2},"b":{"0":[1,0],"1":[1,1],"2":[2,0],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"names":["_models","require","_sendEmail","_interopRequireDefault","_verifyPassword","_hashpassword","_handlingTryCatchBlocks","_handlingEmptyFields","obj","__esModule","default","register","asyncWrapper","req","res","firstname","lastname","email","password","body","isSomeFieldEmpty","checkEmptyFields","duplicate","user","findOne","where","status","json","message","t","hashedPwd","hashPassword","buyer","role","name","create","id","emailContent","subject","process","env","APP_NAME","html","token","result","signToken","checkToken","sendEmail","data","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\","sources":["registerController.js"],"sourcesContent":["import { user, role } from '../../database/models';\r\nimport sendEmail from '../../utils/sendEmail';\r\nimport { signToken, checkToken } from '../../utils/verifyPassword';\r\nimport { hashPassword } from '../../utils/hashpassword';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport { checkEmptyFields } from '../../utils/validations/handlingEmptyFields';\r\n// eslint-disable-next-line consistent-return\r\nconst register = asyncWrapper(async (req, res) => {\r\n  const { firstname, lastname, email, password } = req.body;\r\n  const isSomeFieldEmpty = checkEmptyFields(req, res);\r\n  if(!isSomeFieldEmpty){\r\n  // check for duplicate usernames in the db\r\n  const duplicate = await user.findOne({ where: { email } });\r\n  if (duplicate)\r\n    return res.status(409).json({\r\n      status: 'error',\r\n      message: req.t('user_exixted_error'),\r\n    }); // Conflict\r\n  // encrypt the password\r\n  const hashedPwd = await hashPassword(password);\r\n\r\n  let buyer = await role.findOne({ where: { name: 'buyer' } });\r\n  if (!buyer) {\r\n    buyer = await role.create({\r\n      name: 'buyer',\r\n    });\r\n  }\r\n  req.body['roleId'] = buyer.id;\r\n  req.body['password'] = hashedPwd;\r\n\r\n  const emailContent = {\r\n    email: email,\r\n    subject: ` Welcome to <b> ${process.env.APP_NAME} </b>`,\r\n    html: `<table style=\"border-collapse:collapse;border-spacing:0;width:100%;min-width:100%\" width=\"100%\" height=\"auto\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#F0F0F0\">\r\n    <tbody><tr>\r\n    <td style=\"padding-top:54px;padding-bottom:42px\" align=\"center\">\r\n    <h2 style=\"color:#0090c6;font-size: xx-large;\">E-commerce ATLP-Legends project</h2>\r\n    </td>\r\n    </tr>\r\n    </tbody></table>\r\n\r\n    <p> Welcome ${firstname} ${lastname}.</p>\r\n    <p>Thank you for choosing ${process.env.APP_NAME}! We are excited to have you on board and look forward to providing you with top-quality service.</p>\r\n    <p>If you have any questions or concerns, please do not hesitate to reach out to our support team.</p>\r\n\r\n    <br>\r\n    <p> if not ${firstname} ${lastname} don't care this email </p>\r\n\r\n    <h3>Best regards,</h3>\r\n    <h5><i>E-commerce ATLP-Legends project team</i></h5>\r\n    `,\r\n  };\r\n  let token = '';\r\n    const result = await user.create(req.body);\r\n    token = await signToken({ id: result.id, role: buyer.name, email: email});\r\n    req.body.token = token;\r\n    await checkToken(token);\r\n    await sendEmail(emailContent);\r\n  res.status(201).json({\r\n    status: req.t('seccuss'),\r\n    message: req.t('user_created_successfully'),\r\n    token: token,\r\n    data: result,\r\n  });\r\n}\r\n});\r\n\r\nexport default { register };\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"645769bd4916a0a2b46ac420e857c56ffb0234fb","contentHash":"fa8613f14b45e0a8b4d3b38b8be54a9d6a8051bd57ca8e582e9be1bf02848125"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\updateUser.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\updateUser.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":30},"end":{"line":8,"column":75}},"4":{"start":{"line":9,"column":27},"end":{"line":9,"column":81}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":19},"end":{"line":38,"column":2}},"7":{"start":{"line":17,"column":6},"end":{"line":17,"column":14}},"8":{"start":{"line":18,"column":22},"end":{"line":18,"column":74}},"9":{"start":{"line":19,"column":2},"end":{"line":37,"column":3}},"10":{"start":{"line":20,"column":17},"end":{"line":20,"column":65}},"11":{"start":{"line":21,"column":4},"end":{"line":26,"column":5}},"12":{"start":{"line":22,"column":6},"end":{"line":25,"column":9}},"13":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"14":{"start":{"line":33,"column":4},"end":{"line":36,"column":7}},"15":{"start":{"line":39,"column":0},"end":{"line":39,"column":32}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":61},"end":{"line":11,"column":62}},"loc":{"start":{"line":11,"column":81},"end":{"line":38,"column":1}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10},"2":{"loc":{"start":{"line":19,"column":2},"end":{"line":37,"column":3}},"type":"if","locations":[{"start":{"line":19,"column":2},"end":{"line":37,"column":3}},{"start":{"line":19,"column":2},"end":{"line":37,"column":3}}],"line":19},"3":{"loc":{"start":{"line":21,"column":4},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":26,"column":5}},{"start":{"line":21,"column":4},"end":{"line":26,"column":5}}],"line":21}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1},"f":{"0":1,"1":0},"b":{"0":[0,1],"1":[1,1],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_handlingTryCatchBlocks","_handlingEmptyFields","obj","__esModule","default","updateUser","asyncWrapper","req","res","firstname","lastname","email","phone","body","emptyFields","checkEmptyFields","user","db","findByPk","id","status","json","message","t","update","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\","sources":["updateUser.js"],"sourcesContent":["import db from '../../database/models'\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport { checkEmptyFields } from '../../utils/validations/handlingEmptyFields';\r\nexport const updateUser = asyncWrapper(async (req, res) => {\r\n  const { firstname, lastname, email, phone } = req.body;\r\n  const emptyFields = checkEmptyFields(req.body);\r\n  if (!emptyFields) {\r\n    const user = await db.user.findByPk(req.user.id);\r\n    if (!user) {\r\n      return res.status(401).json({ message: req.t('Undiscovered'), status: req.t('fail') });\r\n    }\r\n    await user.update({\r\n      firstname,\r\n      lastname,\r\n      email,\r\n      phone,\r\n    });\r\n    res.status(200).json({ message: req.t('User_Updated'), status: req.t('success') });\r\n  }\r\n});\r\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,uBAAA,GAAAD,OAAA;AACA,IAAAE,oBAAA,GAAAF,OAAA;AAA+E,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AACxE,MAAMG,UAAU,GAAG,IAAAC,oCAAY,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACzD,MAAM;IAAEC,SAAS;IAAEC,QAAQ;IAAEC,KAAK;IAAEC;EAAM,CAAC,GAAGL,GAAG,CAACM,IAAI;EACtD,MAAMC,WAAW,GAAG,IAAAC,qCAAgB,EAACR,GAAG,CAACM,IAAI,CAAC;EAC9C,IAAI,CAACC,WAAW,EAAE;IAChB,MAAME,IAAI,GAAG,MAAMC,eAAE,CAACD,IAAI,CAACE,QAAQ,CAACX,GAAG,CAACS,IAAI,CAACG,EAAE,CAAC;IAChD,IAAI,CAACH,IAAI,EAAE;MACT,OAAOR,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAEf,GAAG,CAACgB,CAAC,CAAC,cAAc,CAAC;QAAEH,MAAM,EAAEb,GAAG,CAACgB,CAAC,CAAC,MAAM;MAAE,CAAC,CAAC;IACxF;IACA,MAAMP,IAAI,CAACQ,MAAM,CAAC;MAChBf,SAAS;MACTC,QAAQ;MACRC,KAAK;MACLC;IACF,CAAC,CAAC;IACFJ,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAEf,GAAG,CAACgB,CAAC,CAAC,cAAc,CAAC;MAAEH,MAAM,EAAEb,GAAG,CAACgB,CAAC,CAAC,SAAS;IAAE,CAAC,CAAC;EACpF;AACF,CAAC,CAAC;AAACE,OAAA,CAAApB,UAAA,GAAAA,UAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"db9ad14b15011011cad31a09b7d9017e97e3f7f3","contentHash":"0489c3e9a192969886f1ba09bd2d09a4c2fd9a7f8c75708a1461aec3388f0500"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\users\\google_oauth.routes.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\users\\google_oauth.routes.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":20},"end":{"line":7,"column":60}},"3":{"start":{"line":8,"column":21},"end":{"line":8,"column":67}},"4":{"start":{"line":9,"column":12},"end":{"line":9,"column":44}},"5":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"6":{"start":{"line":11,"column":39},"end":{"line":11,"column":93}},"7":{"start":{"line":12,"column":15},"end":{"line":12,"column":40}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":63}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":112}},"10":{"start":{"line":15,"column":15},"end":{"line":15,"column":21}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":37},"end":{"line":11,"column":95}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":92}},"type":"cond-expr","locations":[{"start":{"line":11,"column":70},"end":{"line":11,"column":73}},{"start":{"line":11,"column":76},"end":{"line":11,"column":92}}],"line":11},"1":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":67}},"type":"binary-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":49}},{"start":{"line":11,"column":53},"end":{"line":11,"column":67}}],"line":11}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"names":["_google_oauth","require","_google_oauth2","_auth","_express","_interopRequireDefault","obj","__esModule","default","router","express","Router","get","googleAuthMiddleware","googleAuthCallbackMiddleware","loginWithGoogle","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\users\\","sources":["google_oauth.routes.js"],"sourcesContent":["import { googleAuthMiddleware, googleAuthCallbackMiddleware } from '../../middleware/google_oauth';\r\nimport { loginWithGoogle } from '../../controllers/Auth/google_oauth';\r\nimport { isUserEnabled } from '../../middleware/auth';\r\nimport express from 'express';\r\n\r\nconst router = express.Router();\r\nrouter.get('/auth/google', googleAuthMiddleware);\r\n\r\nrouter.get('/auth/google/redirect', googleAuthCallbackMiddleware, loginWithGoogle);\r\n\r\nexport default router;\r\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,OAAA;AACA,IAAAC,cAAA,GAAAD,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AACA,IAAAG,QAAA,GAAAC,sBAAA,CAAAJ,OAAA;AAA8B,SAAAI,uBAAAC,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE9B,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAC/BF,MAAM,CAACG,GAAG,CAAC,cAAc,EAAEC,kCAAoB,CAAC;AAEhDJ,MAAM,CAACG,GAAG,CAAC,uBAAuB,EAAEE,0CAA4B,EAAEC,8BAAe,CAAC;AAAC,IAAAC,QAAA,GAEpEP,MAAM;AAAAQ,OAAA,CAAAT,OAAA,GAAAQ,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"001d56874e7c575c56f39eaa4a23ca003173bdd3","contentHash":"afd705421a80b0cfaba29112457c8366e74b0adb5beb1768f918c447d5415a1d"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\middleware\\google_oauth.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\middleware\\google_oauth.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":77}},"2":{"start":{"line":7,"column":16},"end":{"line":7,"column":59}},"3":{"start":{"line":8,"column":27},"end":{"line":8,"column":85}},"4":{"start":{"line":9,"column":22},"end":{"line":9,"column":56}},"5":{"start":{"line":10,"column":14},"end":{"line":10,"column":67}},"6":{"start":{"line":11,"column":20},"end":{"line":11,"column":52}},"7":{"start":{"line":12,"column":13},"end":{"line":12,"column":61}},"8":{"start":{"line":13,"column":39},"end":{"line":13,"column":93}},"9":{"start":{"line":15,"column":25},"end":{"line":23,"column":1}},"10":{"start":{"line":16,"column":17},"end":{"line":16,"column":18}},"11":{"start":{"line":17,"column":18},"end":{"line":17,"column":82}},"12":{"start":{"line":18,"column":17},"end":{"line":18,"column":19}},"13":{"start":{"line":19,"column":2},"end":{"line":21,"column":3}},"14":{"start":{"line":19,"column":15},"end":{"line":19,"column":16}},"15":{"start":{"line":20,"column":4},"end":{"line":20,"column":75}},"16":{"start":{"line":22,"column":2},"end":{"line":22,"column":18}},"17":{"start":{"line":24,"column":0},"end":{"line":99,"column":4}},"18":{"start":{"line":29,"column":2},"end":{"line":98,"column":3}},"19":{"start":{"line":30,"column":17},"end":{"line":33,"column":5}},"20":{"start":{"line":34,"column":25},"end":{"line":38,"column":6}},"21":{"start":{"line":39,"column":4},"end":{"line":95,"column":5}},"22":{"start":{"line":40,"column":23},"end":{"line":44,"column":8}},"23":{"start":{"line":45,"column":21},"end":{"line":49,"column":8}},"24":{"start":{"line":50,"column":6},"end":{"line":50,"column":32}},"25":{"start":{"line":51,"column":6},"end":{"line":51,"column":26}},"26":{"start":{"line":52,"column":20},"end":{"line":52,"column":62}},"27":{"start":{"line":53,"column":6},"end":{"line":56,"column":9}},"28":{"start":{"line":58,"column":18},"end":{"line":62,"column":8}},"29":{"start":{"line":63,"column":6},"end":{"line":67,"column":7}},"30":{"start":{"line":64,"column":8},"end":{"line":66,"column":11}},"31":{"start":{"line":68,"column":23},"end":{"line":68,"column":41}},"32":{"start":{"line":69,"column":29},"end":{"line":69,"column":76}},"33":{"start":{"line":70,"column":22},"end":{"line":77,"column":8}},"34":{"start":{"line":78,"column":23},"end":{"line":82,"column":8}},"35":{"start":{"line":83,"column":21},"end":{"line":87,"column":8}},"36":{"start":{"line":88,"column":6},"end":{"line":88,"column":35}},"37":{"start":{"line":89,"column":6},"end":{"line":89,"column":29}},"38":{"start":{"line":90,"column":20},"end":{"line":90,"column":65}},"39":{"start":{"line":91,"column":6},"end":{"line":94,"column":9}},"40":{"start":{"line":97,"column":4},"end":{"line":97,"column":20}},"41":{"start":{"line":100,"column":29},"end":{"line":102,"column":2}},"42":{"start":{"line":103,"column":0},"end":{"line":103,"column":52}},"43":{"start":{"line":104,"column":37},"end":{"line":106,"column":2}},"44":{"start":{"line":107,"column":0},"end":{"line":107,"column":68}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":31}},"loc":{"start":{"line":13,"column":37},"end":{"line":13,"column":95}},"line":13},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":25},"end":{"line":15,"column":26}},"loc":{"start":{"line":15,"column":31},"end":{"line":23,"column":1}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":3},"end":{"line":28,"column":4}},"loc":{"start":{"line":28,"column":55},"end":{"line":99,"column":1}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":92}},"type":"cond-expr","locations":[{"start":{"line":13,"column":70},"end":{"line":13,"column":73}},{"start":{"line":13,"column":76},"end":{"line":13,"column":92}}],"line":13},"1":{"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":67}},"type":"binary-expr","locations":[{"start":{"line":13,"column":46},"end":{"line":13,"column":49}},{"start":{"line":13,"column":53},"end":{"line":13,"column":67}}],"line":13},"2":{"loc":{"start":{"line":39,"column":4},"end":{"line":95,"column":5}},"type":"if","locations":[{"start":{"line":39,"column":4},"end":{"line":95,"column":5}},{"start":{"line":39,"column":4},"end":{"line":95,"column":5}}],"line":39},"3":{"loc":{"start":{"line":63,"column":6},"end":{"line":67,"column":7}},"type":"if","locations":[{"start":{"line":63,"column":6},"end":{"line":67,"column":7}},{"start":{"line":63,"column":6},"end":{"line":67,"column":7}}],"line":63}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":4,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":1,"43":1,"44":1},"f":{"0":4,"1":0,"2":0},"b":{"0":[1,3],"1":[4,4],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"names":["_passport","_interopRequireDefault","require","_passportGoogleOauth","_verifyPassword","_models","_hashpassword","_login","obj","__esModule","default","generatePassword","length","charset","password","i","charAt","Math","floor","random","passport","use","GoogleStrategy","clientID","process","env","CLIENT_ID","clientSecret","CLIENT_SECRET","callbackURL","REDIRECT_URI","accessToken","refreshToken","profile","done","user","id","email","emails","value","existingUser","db","findOne","where","userRole","role","roleId","userId","name","token","signToken","buyer","create","hashedPassword","hashPassword","newUser","firstname","givenName","lastname","familyName","phone","err","googleAuthMiddleware","authenticate","scope","exports","googleAuthCallbackMiddleware","session"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\middleware\\","sources":["google_oauth.js"],"sourcesContent":["import passport from 'passport';\r\nimport GoogleStrategy from 'passport-google-oauth20';\r\nimport { signToken } from '../utils/verifyPassword';\r\nimport db from '../database/models'\r\nimport { hashPassword } from '../utils/hashpassword';\r\nimport login from '../docs/login';\r\n// Generate a random password\r\nconst generatePassword =  () => {\r\n  const length = 8;\r\n  const charset = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\r\n  let password = \"\";\r\n  for (let i = 0; i < length; i++) {\r\n    password += charset.charAt(Math.floor(Math.random() * charset.length));\r\n  }\r\n  return password;\r\n};\r\n\r\npassport.use(new GoogleStrategy({\r\n  clientID: process.env.CLIENT_ID,\r\n  clientSecret: process.env.CLIENT_SECRET,\r\n  callbackURL: process.env.REDIRECT_URI,\r\n}, async (accessToken, refreshToken, profile, done) => {\r\n\r\n  try {\r\n    const user = { id: profile.id, email: profile.emails[0].value };\r\n    const existingUser = await db.user.findOne({ where: { email: user.email } });\r\n    if (existingUser) {\r\n      const userRole = await db.role.findOne({ where: { id: existingUser.roleId } });\r\n      const userId = await db.user.findOne({ where: { email: user.email } });\r\n      user.role = userRole.name;\r\n      user.id = userId.id\r\n      const token = await signToken(user);\r\n      done(null, { user, token });\r\n    } else {\r\n\r\n      let buyer = await db.role.findOne({ where: { name: 'buyer' } });\r\n      if (!buyer) {\r\n        buyer = await db.role.create({\r\n          name: 'buyer',\r\n        });\r\n      }\r\n\r\n      const password = generatePassword();\r\n      const hashedPassword = await hashPassword(password);\r\n      const newUser = await db.user.create({\r\n        firstname: profile.name.givenName,\r\n        lastname: profile.name.familyName,\r\n        email: profile.emails[0].value,\r\n        password: hashedPassword,\r\n        phone: \"\",\r\n        roleId: buyer.id,\r\n      });\r\n      \r\n      const userRole = await db.role.findOne({ where: { id: newUser.roleId } });\r\n      const userId = await db.user.findOne({ where: { email: newUser.email } });\r\n      newUser.role = userRole.name;\r\n      newUser.id = userId.id\r\n      const token = await signToken(newUser);\r\n      done(null, { user: newUser, token });\r\n    }\r\n  } catch (err) {\r\n    done(err, null);\r\n  }\r\n}));\r\n\r\nexport const googleAuthMiddleware = passport.authenticate('google', { scope: ['email','profile'] });\r\nexport const googleAuthCallbackMiddleware = passport.authenticate('google', { session: false });\r\n    "],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"064ee55ae8b3a47b0f82b4177be55456ed499a6a","contentHash":"b36680ea3060a31aa4c510b78291812b4ebd2cadcceb2dba424457e1abe536b8"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\login.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\login.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":39,"column":1}},"3":{"start":{"line":40,"column":0},"end":{"line":40,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["post","tags","description","parameters","requestBody","content","schema","$ref","example","email","password","required","responses","message","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["login.js"],"sourcesContent":["export default {\r\n  '/api/v1/users/login': {\r\n    post: {\r\n      tags: ['Auth'],\r\n      description: 'User login',\r\n      parameters: [],\r\n      requestBody: {\r\n        content: {\r\n          'application/json': {\r\n            schema: {\r\n              $ref: '#/components/schemas/User',\r\n            },\r\n            example: {\r\n              email: 'example@gmail.com',\r\n              password: '12345678',\r\n            },\r\n          },\r\n        },\r\n        required: true,\r\n      },\r\n      responses: {\r\n        201: {\r\n          description: 'User logged in successfully',\r\n        },\r\n        401: {\r\n          description: { message: 'password doesn\\'t match' },\r\n        }\r\n      },\r\n    },\r\n  },\r\n};\r\n"],"mappings":";;;;;;eAAe;EACb,qBAAqB,EAAE;IACrBA,IAAI,EAAE;MACJC,IAAI,EAAE,CAAC,MAAM,CAAC;MACdC,WAAW,EAAE,YAAY;MACzBC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE;QACXC,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE;YACR,CAAC;YACDC,OAAO,EAAE;cACPC,KAAK,EAAE,mBAAmB;cAC1BC,QAAQ,EAAE;YACZ;UACF;QACF,CAAC;QACDC,QAAQ,EAAE;MACZ,CAAC;MACDC,SAAS,EAAE;QACT,GAAG,EAAE;UACHV,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;YAAEW,OAAO,EAAE;UAA0B;QACpD;MACF;IACF;EACF;AACF,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d3a5724c0c25877ac7597813035003c9e8150c71","contentHash":"6f4b4d94b2f1d08e678cc38c429a9a850936f3235305136470222e92e9bd0c3b"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\google_oauth.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\google_oauth.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":33}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":17},"end":{"line":8,"column":73}},"4":{"start":{"line":9,"column":14},"end":{"line":9,"column":55}},"5":{"start":{"line":10,"column":30},"end":{"line":10,"column":75}},"6":{"start":{"line":11,"column":39},"end":{"line":11,"column":93}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":25}},"8":{"start":{"line":13,"column":24},"end":{"line":78,"column":2}},"9":{"start":{"line":17,"column":6},"end":{"line":17,"column":14}},"10":{"start":{"line":18,"column":23},"end":{"line":22,"column":4}},"11":{"start":{"line":23,"column":2},"end":{"line":29,"column":3}},"12":{"start":{"line":24,"column":4},"end":{"line":27,"column":7}},"13":{"start":{"line":28,"column":4},"end":{"line":28,"column":11}},"14":{"start":{"line":30,"column":20},"end":{"line":30,"column":39}},"15":{"start":{"line":31,"column":2},"end":{"line":36,"column":3}},"16":{"start":{"line":32,"column":4},"end":{"line":35,"column":7}},"17":{"start":{"line":37,"column":2},"end":{"line":77,"column":3}},"18":{"start":{"line":38,"column":17},"end":{"line":42,"column":6}},"19":{"start":{"line":43,"column":4},"end":{"line":43,"column":30}},"20":{"start":{"line":44,"column":4},"end":{"line":44,"column":48}},"21":{"start":{"line":45,"column":21},"end":{"line":45,"column":60}},"22":{"start":{"line":46,"column":25},"end":{"line":66,"column":5}},"23":{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},"24":{"start":{"line":68,"column":6},"end":{"line":68,"column":50}},"25":{"start":{"line":70,"column":4},"end":{"line":76,"column":7}},"26":{"start":{"line":79,"column":0},"end":{"line":79,"column":42}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":37},"end":{"line":11,"column":95}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":66},"end":{"line":13,"column":67}},"loc":{"start":{"line":13,"column":86},"end":{"line":78,"column":1}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":92}},"type":"cond-expr","locations":[{"start":{"line":11,"column":70},"end":{"line":11,"column":73}},{"start":{"line":11,"column":76},"end":{"line":11,"column":92}}],"line":11},"1":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":67}},"type":"binary-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":49}},{"start":{"line":11,"column":53},"end":{"line":11,"column":67}}],"line":11},"2":{"loc":{"start":{"line":23,"column":2},"end":{"line":29,"column":3}},"type":"if","locations":[{"start":{"line":23,"column":2},"end":{"line":29,"column":3}},{"start":{"line":23,"column":2},"end":{"line":29,"column":3}}],"line":23},"3":{"loc":{"start":{"line":31,"column":2},"end":{"line":36,"column":3}},"type":"if","locations":[{"start":{"line":31,"column":2},"end":{"line":36,"column":3}},{"start":{"line":31,"column":2},"end":{"line":36,"column":3}}],"line":31},"4":{"loc":{"start":{"line":37,"column":2},"end":{"line":77,"column":3}},"type":"if","locations":[{"start":{"line":37,"column":2},"end":{"line":77,"column":3}},{"start":{"line":37,"column":2},"end":{"line":77,"column":3}}],"line":37},"5":{"loc":{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},{"start":{"line":67,"column":4},"end":{"line":69,"column":5}}],"line":67}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":3,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1},"f":{"0":3,"1":0},"b":{"0":[1,2],"1":[3,3],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_sendEmail","_dotenv","_handlingTryCatchBlocks","obj","__esModule","default","dotenv","config","loginWithGoogle","asyncWrapper","req","res","user","token","existingUser","db","findOne","where","email","status","json","message","t","is_active","role","id","roleId","body","name","set","uniqueId","Math","random","toString","substr","emailOptions","subject","process","env","APP_NAME","html","firstname","lastname","sendEmail","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\Auth\\","sources":["google_oauth.js"],"sourcesContent":["import db from '../../database/models';\r\nimport sendEmail from '../../utils/sendEmail';\r\nimport dotenv from 'dotenv'\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\n\r\ndotenv.config()\r\nexport const loginWithGoogle = asyncWrapper(async (req, res) => {\r\n    const { user, token } = req.user;\r\n    const existingUser = await db.user.findOne({ where: { email: user.email } });\r\n    if(!existingUser){\r\n      res.status(302).json({status:\"fail\", message: req.t('user_email_not_found')})\r\n      return\r\n    }\r\n    const is_active = existingUser.status;\r\n    if(is_active === 'inactive'){\r\n      return res.status(401).json({\r\n        status: req.t('fail'),\r\n        message: req.t('user_disabled'),\r\n      });\r\n    }\r\n    if (existingUser) {\r\n      const role = await db.role.findOne({ where: { id: existingUser.roleId } });\r\n      req.body.role = role.name;\r\n      res.set('Authorization', `Bearer ${token}`);\r\n      const uniqueId = Math.random().toString(36).substr(2, 9); // generate a random string for the unique identifier\r\n      const emailOptions = {\r\n        email:user.email,\r\n        subject: ` Welcome to ${process.env.APP_NAME}`,\r\n        html: ` <table style=\"border-collapse:collapse;border-spacing:0;width:100%;min-width:100%\" width=\"100%\" height=\"auto\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#F0F0F0\">\r\n        <tbody><tr>\r\n        <td style=\"padding-top:54px;padding-bottom:42px\" align=\"center\">\r\n        <h2 style=\"color:#0090c6;font-size: xx-large;\">E-commerce ATLP-Legends project</h2>\r\n        </td>\r\n        </tr>\r\n        </tbody></table>\r\n        <p> Thank you ${existingUser.firstname} for logging into our app us keep enjoying our services </p>\r\n      <br>\r\n      <p> Welcome ${existingUser.firstname} ${existingUser.lastname}.</p>\r\n      <p>Thank you for choosing ${process.env.APP_NAME}! We are excited to have you on board and look forward to providing you with top-quality service.</p>\r\n      <p>If you have any questions or concerns, please do not hesitate to reach out to our support team.</p>\r\n      <br>\r\n      <p>you are recieving this email because your subscribed to our app</p>\r\n      <h3>Best regards,</h3>\r\n      <h5><i>E-commerce ATLP-Legends project team</i></h5>\r\n      `\r\n      };\r\n      if (req.body.role === 'buyer') {\r\n        await sendEmail(emailOptions);\r\n      }\r\n      return res.status(200).json({ status: req.t('success'), email:user.email,id:user.id, token:token, role: role.name});\r\n    }\r\n});\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7aab88942935db4245822b7ebac7285493b6b76b","contentHash":"ef4624ea310d6ba84b85a04e89867c8f879111b2cfc41c432a89818032006812"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\users\\vendorRoutes.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\users\\vendorRoutes.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"3":{"start":{"line":8,"column":12},"end":{"line":8,"column":44}},"4":{"start":{"line":9,"column":25},"end":{"line":9,"column":77}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":15},"end":{"line":11,"column":40}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":99}},"8":{"start":{"line":13,"column":15},"end":{"line":13,"column":21}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"names":["_express","_interopRequireDefault","require","_auth","_vendorControllers","obj","__esModule","default","router","Express","Router","post","auth","createVendor","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\users\\","sources":["vendorRoutes.js"],"sourcesContent":["import Express  from \"express\"\r\nimport { auth } from '../../middleware/auth';\r\nimport {createVendor} from \"../../controllers/users/vendorControllers\" \r\n\r\nconst router =Express.Router()\r\nrouter.post('/api/v1/vendors/register', auth('admin'), createVendor);\r\nexport default router"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,kBAAA,GAAAF,OAAA;AAAsE,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEtE,MAAMG,MAAM,GAAEC,gBAAO,CAACC,MAAM,EAAE;AAC9BF,MAAM,CAACG,IAAI,CAAC,0BAA0B,EAAE,IAAAC,UAAI,EAAC,OAAO,CAAC,EAAEC,+BAAY,CAAC;AAAC,IAAAC,QAAA,GACtDN,MAAM;AAAAO,OAAA,CAAAR,OAAA,GAAAO,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0d1f8e47a4550e1ef3803c66e6f52b05abf429a9","contentHash":"c5f8c4980c9aff13849f73aa1f3894f7d630c1e511411ad5af64ef5baed383dd"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\users\\vendorControllers.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\users\\vendorControllers.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":17},"end":{"line":8,"column":73}},"4":{"start":{"line":9,"column":20},"end":{"line":9,"column":55}},"5":{"start":{"line":10,"column":14},"end":{"line":10,"column":55}},"6":{"start":{"line":11,"column":39},"end":{"line":11,"column":93}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":25}},"8":{"start":{"line":13,"column":21},"end":{"line":93,"column":1}},"9":{"start":{"line":15,"column":2},"end":{"line":92,"column":3}},"10":{"start":{"line":22,"column":8},"end":{"line":22,"column":16}},"11":{"start":{"line":23,"column":20},"end":{"line":23,"column":40}},"12":{"start":{"line":25,"column":4},"end":{"line":29,"column":5}},"13":{"start":{"line":26,"column":6},"end":{"line":26,"column":28}},"14":{"start":{"line":28,"column":6},"end":{"line":28,"column":55}},"15":{"start":{"line":30,"column":27},"end":{"line":30,"column":74}},"16":{"start":{"line":31,"column":18},"end":{"line":35,"column":6}},"17":{"start":{"line":36,"column":4},"end":{"line":40,"column":5}},"18":{"start":{"line":37,"column":6},"end":{"line":39,"column":9}},"19":{"start":{"line":41,"column":19},"end":{"line":48,"column":6}},"20":{"start":{"line":49,"column":26},"end":{"line":51,"column":6}},"21":{"start":{"line":52,"column":4},"end":{"line":55,"column":7}},"22":{"start":{"line":57,"column":17},"end":{"line":80,"column":5}},"23":{"start":{"line":81,"column":4},"end":{"line":81,"column":40}},"24":{"start":{"line":82,"column":4},"end":{"line":86,"column":7}},"25":{"start":{"line":88,"column":4},"end":{"line":91,"column":7}},"26":{"start":{"line":94,"column":0},"end":{"line":94,"column":36}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":37},"end":{"line":11,"column":95}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":21},"end":{"line":13,"column":22}},"loc":{"start":{"line":13,"column":41},"end":{"line":93,"column":1}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":92}},"type":"cond-expr","locations":[{"start":{"line":11,"column":70},"end":{"line":11,"column":73}},{"start":{"line":11,"column":76},"end":{"line":11,"column":92}}],"line":11},"1":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":67}},"type":"binary-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":49}},{"start":{"line":11,"column":53},"end":{"line":11,"column":67}}],"line":11},"2":{"loc":{"start":{"line":25,"column":4},"end":{"line":29,"column":5}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":29,"column":5}},{"start":{"line":25,"column":4},"end":{"line":29,"column":5}}],"line":25},"3":{"loc":{"start":{"line":36,"column":4},"end":{"line":40,"column":5}},"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":40,"column":5}},{"start":{"line":36,"column":4},"end":{"line":40,"column":5}}],"line":36},"4":{"loc":{"start":{"line":89,"column":15},"end":{"line":89,"column":63}},"type":"cond-expr","locations":[{"start":{"line":89,"column":28},"end":{"line":89,"column":49}},{"start":{"line":89,"column":52},"end":{"line":89,"column":63}}],"line":89}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":3,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1},"f":{"0":3,"1":0},"b":{"0":[1,2],"1":[3,3],"2":[0,0],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_sendEmail","_hashpassword","_dotenv","obj","__esModule","default","dotenv","config","createVendor","req","res","firstname","lastname","email","phone","permissions","body","nodeEnv","process","env","NODE_ENV","password","generatePassword","hashedPassword","hashPassword","newRole","db","role","findOne","where","name","create","vendor","user","roleId","id","newPermission","permission","rolePermission","permissionId","mail","subject","html","sendEmail","status","json","t","message","data","err","errors","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\users\\","sources":["vendorControllers.js"],"sourcesContent":["import db from '../../database/models';\r\nimport sendEmail from '../../utils/sendEmail';\r\nimport { hashPassword, generatePassword } from '../../utils/hashpassword';\r\nimport dotenv from 'dotenv';\r\ndotenv.config();\r\nexport const createVendor = async (req, res) => {\r\n  //add admins\r\n  try {\r\n    const { firstname, lastname, email, phone, permissions } = req.body;\r\n    const nodeEnv = process.env.NODE_ENV;\r\n    let password;\r\n    if (nodeEnv == 'test') { \r\n      password = '12345678';\r\n    } else {\r\n      password = generatePassword();\r\n    }\r\n    const hashedPassword = await hashPassword(password);\r\n    let newRole = await db.role.findOne({ where: { name : 'vendor'} })\r\n    if(!newRole){\r\n      newRole = await db.role.create({\r\n        name: 'vendor',\r\n      });\r\n    }\r\n    const vendor= await db.user.create({\r\n      firstname,\r\n      lastname,\r\n      email,\r\n      password: hashedPassword,\r\n      phone,\r\n      roleId: newRole.id,\r\n    });\r\n    const newPermission = await db.permission.create({\r\n      name: permissions,\r\n    });\r\n    await db.rolePermission.create({\r\n      roleId: newRole.id,\r\n      permissionId: newPermission.id,\r\n    });\r\n    //sending email to the person\r\n    const mail = {\r\n      email,\r\n      subject: 'complete your account registration',\r\n      html: `<table style=\"border-collapse:collapse;border-spacing:0;width:100%;min-width:100%\" width=\"100%\" height=\"auto\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#F0F0F0\">\r\n<tbody><tr>\r\n<td style=\"padding-top:54px;padding-bottom:42px\" align=\"center\">\r\n<h2 style=\"color:#0090c6;font-size: xx-large;\">E-commerce ATLP-Legends project</h2>\r\n</td>\r\n</tr>\r\n</tbody></table>\r\n<p class=\"m_73160151937089879size-16\" style=\"Margin-top:0;Margin-bottom:0;font-size:16px;line-height:24px\" lang=\"x-size-16\"><strong><span style=\"color:#000000\">Congratulations on becoming one of our estemmed vendors. </span></strong></p><p style=\"Margin-top:20px;Margin-bottom:0\"><span style=\"color:#000000\">You are in safe hands.</span></p>\r\n<p style=\"Margin-top:10px;Margin-bottom:0\"><span style=\"color:#000000\">Here at our ecommerce we have extensive experience in connecting customers to businesses.</span></p>\r\n<p style=\"Margin-top:20px;Margin-bottom:20px\"><span style=\"color:#000000\">Thank you for recently registering for the e-commerce Website. To complete your e-commerce registration, please click the button below: </span></p>\r\n<a href=\"jbkjbb/kok\" style=\"margin:1% auto;border-radius: 4px;display: inline-block;font-size: 14px;font-weight: bold;line-height: 24px;padding: 12px 24px;text-align: center;text-decoration: none !important;color: #ffffff !important;background-color: #0175db;font-family: Ubuntu,sans-serif;\">Activate account\r\n</a>\r\n<p style=\"Margin-top:0px;Margin-bottom:10px\"><span style=\"color:#000000\">log into your account with these credentials</span></p>\r\n<div style=\"margin:0%;background:#fcfcfc;padding:1% 2%\">\r\n<p style=\"text-decoration: none;\">email:${email}</p>\r\n<p>password:${password}</p>\r\n</div>\r\n\r\n      \r\n`,\r\n    };\r\n    await sendEmail(mail);\r\n\r\n    res.status(201).json({\r\n      status: req.t('success'),\r\n      message: req.t('vendor_added_message'),\r\n      data: vendor\r\n    });\r\n  } catch (err) {\r\n    res.status(500).json({\r\n      message: err.errors ? err.errors[0].message : err.message,\r\n      status: 'failed',\r\n    });\r\n  }\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,aAAA,GAAAF,OAAA;AACA,IAAAG,OAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAK,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAC5BG,eAAM,CAACC,MAAM,EAAE;AACR,MAAMC,YAAY,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;EAC9C;EACA,IAAI;IACF,MAAM;MAAEC,SAAS;MAAEC,QAAQ;MAAEC,KAAK;MAAEC,KAAK;MAAEC;IAAY,CAAC,GAAGN,GAAG,CAACO,IAAI;IACnE,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,QAAQ;IACpC,IAAIC,QAAQ;IACZ,IAAIJ,OAAO,IAAI,MAAM,EAAE;MACrBI,QAAQ,GAAG,UAAU;IACvB,CAAC,MAAM;MACLA,QAAQ,GAAG,IAAAC,8BAAgB,GAAE;IAC/B;IACA,MAAMC,cAAc,GAAG,MAAM,IAAAC,0BAAY,EAACH,QAAQ,CAAC;IACnD,IAAII,OAAO,GAAG,MAAMC,eAAE,CAACC,IAAI,CAACC,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAEC,IAAI,EAAG;MAAQ;IAAE,CAAC,CAAC;IAClE,IAAG,CAACL,OAAO,EAAC;MACVA,OAAO,GAAG,MAAMC,eAAE,CAACC,IAAI,CAACI,MAAM,CAAC;QAC7BD,IAAI,EAAE;MACR,CAAC,CAAC;IACJ;IACA,MAAME,MAAM,GAAE,MAAMN,eAAE,CAACO,IAAI,CAACF,MAAM,CAAC;MACjCpB,SAAS;MACTC,QAAQ;MACRC,KAAK;MACLQ,QAAQ,EAAEE,cAAc;MACxBT,KAAK;MACLoB,MAAM,EAAET,OAAO,CAACU;IAClB,CAAC,CAAC;IACF,MAAMC,aAAa,GAAG,MAAMV,eAAE,CAACW,UAAU,CAACN,MAAM,CAAC;MAC/CD,IAAI,EAAEf;IACR,CAAC,CAAC;IACF,MAAMW,eAAE,CAACY,cAAc,CAACP,MAAM,CAAC;MAC7BG,MAAM,EAAET,OAAO,CAACU,EAAE;MAClBI,YAAY,EAAEH,aAAa,CAACD;IAC9B,CAAC,CAAC;IACF;IACA,MAAMK,IAAI,GAAG;MACX3B,KAAK;MACL4B,OAAO,EAAE,oCAAoC;MAC7CC,IAAI,EAAG;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C7B,KAAM;AAChD,cAAcQ,QAAS;AACvB;AACA;AACA;AACA;IACI,CAAC;IACD,MAAM,IAAAsB,kBAAS,EAACH,IAAI,CAAC;IAErB9B,GAAG,CAACkC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACnBD,MAAM,EAAEnC,GAAG,CAACqC,CAAC,CAAC,SAAS,CAAC;MACxBC,OAAO,EAAEtC,GAAG,CAACqC,CAAC,CAAC,sBAAsB,CAAC;MACtCE,IAAI,EAAEhB;IACR,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOiB,GAAG,EAAE;IACZvC,GAAG,CAACkC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACnBE,OAAO,EAAEE,GAAG,CAACC,MAAM,GAAGD,GAAG,CAACC,MAAM,CAAC,CAAC,CAAC,CAACH,OAAO,GAAGE,GAAG,CAACF,OAAO;MACzDH,MAAM,EAAE;IACV,CAAC,CAAC;EACJ;AACF,CAAC;AAACO,OAAA,CAAA3C,YAAA,GAAAA,YAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9ba672b6e2920cb790eebc485c19df443728192d","contentHash":"dc741a5df8d2b5b4a5de0962908b0420ed9845f451c445f49f59da4df9ea1b9d"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\products\\category.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\products\\category.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"3":{"start":{"line":8,"column":26},"end":{"line":8,"column":106}},"4":{"start":{"line":9,"column":12},"end":{"line":9,"column":44}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":15},"end":{"line":11,"column":40}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":54}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":53}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":81}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":83}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":91}},"12":{"start":{"line":17,"column":15},"end":{"line":17,"column":21}},"13":{"start":{"line":18,"column":0},"end":{"line":18,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1},"f":{"0":2},"b":{"0":[1,1],"1":[2,2]},"inputSourceMap":{"version":3,"names":["_express","_interopRequireDefault","require","_categoryController","_auth","obj","__esModule","default","routes","express","Router","get","categoryController","index","show","post","auth","store","put","update","delete","destroy","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\products\\","sources":["category.js"],"sourcesContent":["import express from 'express';\r\nimport categoryController from '../../controllers/products/categoryController'\r\nimport { auth } from '../../middleware/auth';\r\n\r\nconst routes = express.Router();\r\n\r\nroutes.get('/all', categoryController.index)\r\nroutes.get('/:id', categoryController.show)\r\nroutes.post('/add', auth('admin'), categoryController.store)\r\nroutes.put('update', auth('admin'), categoryController.update)\r\nroutes.delete('delete/:id', auth('admin'), categoryController.destroy)\r\n\r\nexport default routes;"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,mBAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AAA6C,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE7C,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/BF,MAAM,CAACG,GAAG,CAAC,MAAM,EAAEC,2BAAkB,CAACC,KAAK,CAAC;AAC5CL,MAAM,CAACG,GAAG,CAAC,MAAM,EAAEC,2BAAkB,CAACE,IAAI,CAAC;AAC3CN,MAAM,CAACO,IAAI,CAAC,MAAM,EAAE,IAAAC,UAAI,EAAC,OAAO,CAAC,EAAEJ,2BAAkB,CAACK,KAAK,CAAC;AAC5DT,MAAM,CAACU,GAAG,CAAC,QAAQ,EAAE,IAAAF,UAAI,EAAC,OAAO,CAAC,EAAEJ,2BAAkB,CAACO,MAAM,CAAC;AAC9DX,MAAM,CAACY,MAAM,CAAC,YAAY,EAAE,IAAAJ,UAAI,EAAC,OAAO,CAAC,EAAEJ,2BAAkB,CAACS,OAAO,CAAC;AAAA,IAAAC,QAAA,GAEvDd,MAAM;AAAAe,OAAA,CAAAhB,OAAA,GAAAe,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b35d66e7e6075e287a64b51af058c07ac3141014","contentHash":"e6b20ed5db96746e4f6857b3da2ad270e7bd1df186d51747c4aba3faab30d6dd"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\categoryController.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\categoryController.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":46}},"3":{"start":{"line":8,"column":30},"end":{"line":8,"column":75}},"4":{"start":{"line":9,"column":21},"end":{"line":9,"column":82}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":14},"end":{"line":22,"column":2}},"7":{"start":{"line":12,"column":2},"end":{"line":15,"column":5}},"8":{"start":{"line":12,"column":22},"end":{"line":15,"column":5}},"9":{"start":{"line":16,"column":15},"end":{"line":16,"column":54}},"10":{"start":{"line":17,"column":2},"end":{"line":17,"column":56}},"11":{"start":{"line":18,"column":2},"end":{"line":21,"column":5}},"12":{"start":{"line":23,"column":15},"end":{"line":44,"column":2}},"13":{"start":{"line":24,"column":2},"end":{"line":29,"column":3}},"14":{"start":{"line":25,"column":4},"end":{"line":28,"column":7}},"15":{"start":{"line":30,"column":14},"end":{"line":30,"column":52}},"16":{"start":{"line":31,"column":2},"end":{"line":36,"column":3}},"17":{"start":{"line":32,"column":4},"end":{"line":35,"column":7}},"18":{"start":{"line":37,"column":2},"end":{"line":37,"column":33}},"19":{"start":{"line":38,"column":19},"end":{"line":38,"column":48}},"20":{"start":{"line":39,"column":2},"end":{"line":43,"column":5}},"21":{"start":{"line":45,"column":16},"end":{"line":64,"column":2}},"22":{"start":{"line":46,"column":2},"end":{"line":51,"column":3}},"23":{"start":{"line":47,"column":4},"end":{"line":50,"column":7}},"24":{"start":{"line":52,"column":14},"end":{"line":52,"column":52}},"25":{"start":{"line":53,"column":2},"end":{"line":58,"column":3}},"26":{"start":{"line":54,"column":4},"end":{"line":57,"column":7}},"27":{"start":{"line":59,"column":2},"end":{"line":59,"column":22}},"28":{"start":{"line":60,"column":2},"end":{"line":63,"column":5}},"29":{"start":{"line":65,"column":13},"end":{"line":83,"column":2}},"30":{"start":{"line":66,"column":2},"end":{"line":71,"column":3}},"31":{"start":{"line":67,"column":4},"end":{"line":70,"column":7}},"32":{"start":{"line":72,"column":14},"end":{"line":72,"column":52}},"33":{"start":{"line":73,"column":2},"end":{"line":78,"column":3}},"34":{"start":{"line":74,"column":4},"end":{"line":77,"column":7}},"35":{"start":{"line":79,"column":2},"end":{"line":82,"column":5}},"36":{"start":{"line":84,"column":14},"end":{"line":97,"column":2}},"37":{"start":{"line":85,"column":15},"end":{"line":92,"column":4}},"38":{"start":{"line":93,"column":2},"end":{"line":96,"column":5}},"39":{"start":{"line":98,"column":15},"end":{"line":104,"column":1}},"40":{"start":{"line":105,"column":0},"end":{"line":105,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":76},"end":{"line":22,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":23,"column":57},"end":{"line":23,"column":58}},"loc":{"start":{"line":23,"column":77},"end":{"line":44,"column":1}},"line":23},"3":{"name":"(anonymous_3)","decl":{"start":{"line":45,"column":58},"end":{"line":45,"column":59}},"loc":{"start":{"line":45,"column":78},"end":{"line":64,"column":1}},"line":45},"4":{"name":"(anonymous_4)","decl":{"start":{"line":65,"column":55},"end":{"line":65,"column":56}},"loc":{"start":{"line":65,"column":75},"end":{"line":83,"column":1}},"line":65},"5":{"name":"(anonymous_5)","decl":{"start":{"line":84,"column":56},"end":{"line":84,"column":57}},"loc":{"start":{"line":84,"column":76},"end":{"line":97,"column":1}},"line":84}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10},"2":{"loc":{"start":{"line":12,"column":2},"end":{"line":15,"column":5}},"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":15,"column":5}},{"start":{"line":12,"column":2},"end":{"line":15,"column":5}}],"line":12},"3":{"loc":{"start":{"line":24,"column":2},"end":{"line":29,"column":3}},"type":"if","locations":[{"start":{"line":24,"column":2},"end":{"line":29,"column":3}},{"start":{"line":24,"column":2},"end":{"line":29,"column":3}}],"line":24},"4":{"loc":{"start":{"line":31,"column":2},"end":{"line":36,"column":3}},"type":"if","locations":[{"start":{"line":31,"column":2},"end":{"line":36,"column":3}},{"start":{"line":31,"column":2},"end":{"line":36,"column":3}}],"line":31},"5":{"loc":{"start":{"line":46,"column":2},"end":{"line":51,"column":3}},"type":"if","locations":[{"start":{"line":46,"column":2},"end":{"line":51,"column":3}},{"start":{"line":46,"column":2},"end":{"line":51,"column":3}}],"line":46},"6":{"loc":{"start":{"line":53,"column":2},"end":{"line":58,"column":3}},"type":"if","locations":[{"start":{"line":53,"column":2},"end":{"line":58,"column":3}},{"start":{"line":53,"column":2},"end":{"line":58,"column":3}}],"line":53},"7":{"loc":{"start":{"line":66,"column":2},"end":{"line":71,"column":3}},"type":"if","locations":[{"start":{"line":66,"column":2},"end":{"line":71,"column":3}},{"start":{"line":66,"column":2},"end":{"line":71,"column":3}}],"line":66},"8":{"loc":{"start":{"line":73,"column":2},"end":{"line":78,"column":3}},"type":"if","locations":[{"start":{"line":73,"column":2},"end":{"line":78,"column":3}},{"start":{"line":73,"column":2},"end":{"line":78,"column":3}}],"line":73}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":1,"40":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[1,0],"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"inputSourceMap":{"version":3,"names":["_models","require","_handlingTryCatchBlocks","_notifications","_interopRequireDefault","obj","__esModule","default","store","asyncWrapper","req","res","body","name","status","json","message","data","Category","create","emitter","emit","update","id","row","findByPk","set","category","save","destroy","params","show","index","findAll","include","model","Product","attributes","exclude","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\","sources":["categoryController.js"],"sourcesContent":["import { Category, Product } from '../../database/models';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport emitter from '../../events/notifications';\r\n\r\n\r\nconst store = asyncWrapper (async (req, res) => {\r\n\r\n  if (!req.body.name)\r\n    return res\r\n      .status(400)\r\n      .json({ status: 'fail', message: 'Category name is required' });\r\n\r\n  const data = await Category.create(req.body);\r\n  emitter.emit('newCategoryAdded', data);\r\n  return res.status(201).json({ status: 'success', data });\r\n});\r\n\r\nconst update = asyncWrapper( async (req, res) => {\r\n    if(!req.body.id){\r\n        return res.status(404).json({ status: 'fail', message: 'Category id is required' });\r\n    }\r\n\r\n    const row = Category.findByPk(req.body.id);\r\n    if(row){\r\n        return res.status(204).json({status: 'error', message: `category with id ${req.body.id}} not found`});\r\n    }\r\n\r\n    Category.set(req.body)\r\n\r\n    const category = await Category.save();\r\n\r\n    return res.status(200).json({status: 'success', message: `Category updated successfully` , data: category});\r\n});\r\n\r\nconst destroy = asyncWrapper ( async (req, res) => {\r\n    if(!req.params.id){\r\n        return res.status(404).json({ status: 'fail', message: 'Category id is required' });\r\n    }\r\n\r\n    const row = Category.findByPk(req.body.id);\r\n    if(row){\r\n        return res.status(204).json({status: 'error', message: `category with id ${req.params.id}} not found`});\r\n    }\r\n\r\n    await row.destroy();\r\n\r\n    return res.status(204).json({status: 'success', message: 'category deleted'});\r\n});\r\n\r\nconst show = asyncWrapper( async (req, res) => {\r\n    if(!req.params.id){\r\n        return res.status(404).json({ status: 'fail', message: 'Category id is required'}) \r\n    }\r\n\r\n    const row = Category.findByPk(req.body.id);\r\n    if(row){\r\n        return res.status(204).json({status: 'error', message: `category with id ${req.body.id}} not found`});\r\n    }\r\n\r\n\r\n    return res.status(200).json({status: 'success', data: row});\r\n\r\n\r\n})\r\n\r\nconst index = asyncWrapper ( async (req, res) => {\r\n    const data = await Category.findAll({ include: [{ model: Product}], attributes: {exclude: ['createdAt', 'updatedAt'] }})\r\n    return res.status(200).json({status: 'success', data})\r\n})\r\n\r\nexport default {index, store, show, update, destroy}"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"18763ee977a2fb8642e75f8cee5b92ce987fc87a","contentHash":"8f945b6f55fe4ba8b4915daccd1dd0c4d8f4589de30012e137e2e77f8b0b05bb"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\products\\productsRoutes.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\products\\productsRoutes.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"3":{"start":{"line":8,"column":27},"end":{"line":8,"column":93}},"4":{"start":{"line":9,"column":25},"end":{"line":9,"column":80}},"5":{"start":{"line":10,"column":36},"end":{"line":10,"column":102}},"6":{"start":{"line":11,"column":31},"end":{"line":11,"column":92}},"7":{"start":{"line":12,"column":12},"end":{"line":12,"column":44}},"8":{"start":{"line":13,"column":22},"end":{"line":13,"column":74}},"9":{"start":{"line":14,"column":39},"end":{"line":14,"column":93}},"10":{"start":{"line":15,"column":22},"end":{"line":15,"column":47}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":176}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":206}},"13":{"start":{"line":21,"column":0},"end":{"line":21,"column":124}},"14":{"start":{"line":24,"column":0},"end":{"line":24,"column":195}},"15":{"start":{"line":26,"column":0},"end":{"line":26,"column":134}},"16":{"start":{"line":29,"column":0},"end":{"line":29,"column":128}},"17":{"start":{"line":32,"column":0},"end":{"line":32,"column":78}},"18":{"start":{"line":33,"column":0},"end":{"line":33,"column":64}},"19":{"start":{"line":34,"column":0},"end":{"line":34,"column":179}},"20":{"start":{"line":35,"column":0},"end":{"line":35,"column":211}},"21":{"start":{"line":36,"column":0},"end":{"line":36,"column":204}},"22":{"start":{"line":37,"column":15},"end":{"line":37,"column":28}},"23":{"start":{"line":38,"column":0},"end":{"line":38,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":95}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":92}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":92}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":2,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1},"f":{"0":2},"b":{"0":[1,1],"1":[2,2]},"inputSourceMap":{"version":3,"names":["_express","_interopRequireDefault","require","_handlingFileUploads","_productController","_productVariationsControllers","_ProductImagesController","_auth","_itemController","obj","__esModule","default","ProductRouter","express","Router","post","auth","isUserEnabled","upload","array","CreateNewProduct","addNewProductVariation","rateProduct","addNewProductimages","delete","deleteProduct","get","getAllSellerItems","getAllBuyerItems","search","put","updateProduct","updateProductVariaton","updateNewProductimages","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\products\\","sources":["productsRoutes.js"],"sourcesContent":["import express from 'express';\r\nimport upload from '../../utils/handlingFileUploads';\r\nimport { CreateNewProduct ,deleteProduct, rateProduct, search, updateProduct} from '../../controllers/products/productController';\r\nimport { addNewProductVariation, updateProductVariaton } from '../../controllers/products/productVariationsControllers';\r\nimport { addNewProductimages, updateNewProductimages} from '../../controllers/products/ProductImagesController';\r\nimport { auth, isUserEnabled } from '../../middleware/auth';\r\nimport { getAllSellerItems, getAllBuyerItems } from '../../controllers/products/itemController';\r\n\r\nconst ProductRouter = express.Router();\r\n\r\nProductRouter.post(\r\n  '/api/v1/products/add',\r\n  auth('vendor'),\r\n  isUserEnabled,\r\n  upload.array('image', 2),\r\n  CreateNewProduct\r\n);\r\n//products atributes\r\nProductRouter.post(\r\n  '/api/v1/product/variation/add',\r\n  auth('vendor'),\r\n  isUserEnabled,\r\n  upload.array('attrImage', 1),\r\n  addNewProductVariation\r\n);\r\n\r\n//products atributes\r\nProductRouter.post(\r\n  '/api/v1/product/rating',\r\n  auth('buyer'),\r\n  isUserEnabled,\r\n  rateProduct\r\n);\r\n\r\n//product images\r\nProductRouter.post(\r\n  '/api/v1/product/images/add',\r\n  auth('vendor'),\r\n  isUserEnabled,\r\n  upload.array('prodImage', 8),\r\n  addNewProductimages\r\n);\r\n//delete product\r\nProductRouter.delete('/api/v1/products/delete/:id',\r\n  auth('vendor'),\r\n  isUserEnabled,\r\n  deleteProduct);\r\n\r\n// GET /seller/items - retrieve all items in the collection of the requesting seller\r\nProductRouter.get(\r\n  '/api/v1/seller/products',\r\n  auth('vendor'),\r\n  isUserEnabled,\r\n  getAllSellerItems\r\n\r\n);\r\n\r\n// GET /buyer/items - retrieve all available items for sale\r\nProductRouter.get(\r\n  '/api/v1/buyer/products', \r\n  getAllBuyerItems\r\n\r\n);\r\nProductRouter.get('/api/v1/product', search);\r\n\r\nProductRouter.put(\r\n  '/api/v1/products/update/:id',\r\n  auth('vendor'),\r\n  isUserEnabled,\r\n  upload.array('image', 2),\r\n  updateProduct\r\n);\r\n\r\nProductRouter.put(\r\n  '/api/v1/product/variation/update/:id',\r\n  auth('vendor'),\r\n  isUserEnabled,\r\n  upload.array('attrImage', 1),\r\n  updateProductVariaton\r\n);\r\n\r\nProductRouter.put(\r\n  '/api/v1/product/images/update/:id',\r\n  auth('vendor'),\r\n  isUserEnabled,\r\n  upload.array('prodImage', 8),\r\n  updateNewProductimages\r\n);\r\n\r\nexport default ProductRouter;\r\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,oBAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,kBAAA,GAAAF,OAAA;AACA,IAAAG,6BAAA,GAAAH,OAAA;AACA,IAAAI,wBAAA,GAAAJ,OAAA;AACA,IAAAK,KAAA,GAAAL,OAAA;AACA,IAAAM,eAAA,GAAAN,OAAA;AAAgG,SAAAD,uBAAAQ,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEhG,MAAMG,aAAa,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAEtCF,aAAa,CAACG,IAAI,CAChB,sBAAsB,EACtB,IAAAC,UAAI,EAAC,QAAQ,CAAC,EACdC,mBAAa,EACbC,4BAAM,CAACC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC,EACxBC,mCAAgB,CACjB;AACD;AACAR,aAAa,CAACG,IAAI,CAChB,+BAA+B,EAC/B,IAAAC,UAAI,EAAC,QAAQ,CAAC,EACdC,mBAAa,EACbC,4BAAM,CAACC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,EAC5BE,oDAAsB,CACvB;;AAED;AACAT,aAAa,CAACG,IAAI,CAChB,wBAAwB,EACxB,IAAAC,UAAI,EAAC,OAAO,CAAC,EACbC,mBAAa,EACbK,8BAAW,CACZ;;AAED;AACAV,aAAa,CAACG,IAAI,CAChB,4BAA4B,EAC5B,IAAAC,UAAI,EAAC,QAAQ,CAAC,EACdC,mBAAa,EACbC,4BAAM,CAACC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,EAC5BI,4CAAmB,CACpB;AACD;AACAX,aAAa,CAACY,MAAM,CAAC,6BAA6B,EAChD,IAAAR,UAAI,EAAC,QAAQ,CAAC,EACdC,mBAAa,EACbQ,gCAAa,CAAC;;AAEhB;AACAb,aAAa,CAACc,GAAG,CACf,yBAAyB,EACzB,IAAAV,UAAI,EAAC,QAAQ,CAAC,EACdC,mBAAa,EACbU,iCAAiB,CAElB;;AAED;AACAf,aAAa,CAACc,GAAG,CACf,wBAAwB,EACxBE,gCAAgB,CAEjB;AACDhB,aAAa,CAACc,GAAG,CAAC,iBAAiB,EAAEG,yBAAM,CAAC;AAE5CjB,aAAa,CAACkB,GAAG,CACf,6BAA6B,EAC7B,IAAAd,UAAI,EAAC,QAAQ,CAAC,EACdC,mBAAa,EACbC,4BAAM,CAACC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC,EACxBY,gCAAa,CACd;AAEDnB,aAAa,CAACkB,GAAG,CACf,sCAAsC,EACtC,IAAAd,UAAI,EAAC,QAAQ,CAAC,EACdC,mBAAa,EACbC,4BAAM,CAACC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,EAC5Ba,mDAAqB,CACtB;AAEDpB,aAAa,CAACkB,GAAG,CACf,mCAAmC,EACnC,IAAAd,UAAI,EAAC,QAAQ,CAAC,EACdC,mBAAa,EACbC,4BAAM,CAACC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,EAC5Bc,+CAAsB,CACvB;AAAC,IAAAC,QAAA,GAEatB,aAAa;AAAAuB,OAAA,CAAAxB,OAAA,GAAAuB,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9c4531a0a18fa2c0b122c5493e2911f694abab67","contentHash":"f9600d3e3662c8ccb9ad3b30630e94862abacf5a0618d4d022635a4b7b1c45fc"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\handlingFileUploads.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\handlingFileUploads.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":79}},"2":{"start":{"line":7,"column":18},"end":{"line":7,"column":63}},"3":{"start":{"line":8,"column":14},"end":{"line":8,"column":55}},"4":{"start":{"line":9,"column":14},"end":{"line":9,"column":55}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":25}},"7":{"start":{"line":13,"column":0},"end":{"line":17,"column":3}},"8":{"start":{"line":19,"column":16},"end":{"line":31,"column":1}},"9":{"start":{"line":20,"column":2},"end":{"line":30,"column":5}},"10":{"start":{"line":21,"column":4},"end":{"line":29,"column":7}},"11":{"start":{"line":22,"column":6},"end":{"line":28,"column":8}},"12":{"start":{"line":33,"column":0},"end":{"line":33,"column":26}},"13":{"start":{"line":34,"column":15},"end":{"line":39,"column":2}},"14":{"start":{"line":37,"column":4},"end":{"line":37,"column":19}},"15":{"start":{"line":40,"column":0},"end":{"line":40,"column":27}},"16":{"start":{"line":41,"column":34},"end":{"line":43,"column":1}},"17":{"start":{"line":42,"column":2},"end":{"line":42,"column":53}},"18":{"start":{"line":44,"column":0},"end":{"line":44,"column":62}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":16},"end":{"line":19,"column":17}},"loc":{"start":{"line":19,"column":34},"end":{"line":31,"column":1}},"line":19},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":21},"end":{"line":20,"column":22}},"loc":{"start":{"line":20,"column":32},"end":{"line":30,"column":3}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":21,"column":46},"end":{"line":21,"column":47}},"loc":{"start":{"line":21,"column":56},"end":{"line":29,"column":5}},"line":21},"4":{"name":"(anonymous_4)","decl":{"start":{"line":36,"column":14},"end":{"line":36,"column":15}},"loc":{"start":{"line":36,"column":33},"end":{"line":38,"column":3}},"line":36},"5":{"name":"(anonymous_5)","decl":{"start":{"line":41,"column":34},"end":{"line":41,"column":35}},"loc":{"start":{"line":41,"column":43},"end":{"line":43,"column":1}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":3,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":1,"13":1,"14":0,"15":1,"16":1,"17":0,"18":1},"f":{"0":3,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[0,3],"1":[3,3]},"inputSourceMap":{"version":3,"names":["_cloudinary","_interopRequireDefault","require","_dotenv","_multer","obj","__esModule","default","dotenv","config","cloudinary","cloud_name","process","env","CLOUD_NAME","api_key","API_KEY","api_secret","API_SECRET","uploads","file","folder","Promise","resolve","uploader","upload","result","url","id","public_id","resource","exports","_default","multer","storage","diskStorage","fileFilter","req","cb","removeImageFromCloudinary","imgId","destroy"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\","sources":["handlingFileUploads.js"],"sourcesContent":["import cloudinary from 'cloudinary';\r\nimport dotenv from 'dotenv';\r\nimport multer from 'multer';\r\ndotenv.config();\r\n//configuring environment variable at cloudinary\r\ncloudinary.config({\r\n  cloud_name: process.env.CLOUD_NAME,\r\n  api_key: process.env.API_KEY,\r\n  api_secret: process.env.API_SECRET,\r\n});\r\n//generating upload function to cloudinary\r\nexport const uploads = (file, folder) => {\r\n  return new Promise((resolve) => {\r\n    cloudinary.uploader.upload(file, (result) => {\r\n      resolve({\r\n        url: result.url,\r\n        id: result.public_id,\r\n      }),\r\n        {\r\n          resource: 'auto',\r\n          folder: folder,\r\n        };\r\n    });\r\n  });\r\n};\r\n//using multer for grabbing images.\r\nexport default multer({\r\n  storage: multer.diskStorage({}),\r\n  fileFilter: (req, file, cb) => {\r\n    cb(null, true);\r\n  },\r\n});\r\nexport const removeImageFromCloudinary= (imgId)=>{\r\n return cloudinary.uploader.destroy(imgId);\r\n}"],"mappings":";;;;;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAC5BG,eAAM,CAACC,MAAM,EAAE;AACf;AACAC,mBAAU,CAACD,MAAM,CAAC;EAChBE,UAAU,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU;EAClCC,OAAO,EAAEH,OAAO,CAACC,GAAG,CAACG,OAAO;EAC5BC,UAAU,EAAEL,OAAO,CAACC,GAAG,CAACK;AAC1B,CAAC,CAAC;AACF;AACO,MAAMC,OAAO,GAAGA,CAACC,IAAI,EAAEC,MAAM,KAAK;EACvC,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;IAC9Bb,mBAAU,CAACc,QAAQ,CAACC,MAAM,CAACL,IAAI,EAAGM,MAAM,IAAK;MAC3CH,OAAO,CAAC;QACNI,GAAG,EAAED,MAAM,CAACC,GAAG;QACfC,EAAE,EAAEF,MAAM,CAACG;MACb,CAAC,CAAC,EACA;QACEC,QAAQ,EAAE,MAAM;QAChBT,MAAM,EAAEA;MACV,CAAC;IACL,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC;AACD;AAAAU,OAAA,CAAAZ,OAAA,GAAAA,OAAA;AAAA,IAAAa,QAAA,GACe,IAAAC,eAAM,EAAC;EACpBC,OAAO,EAAED,eAAM,CAACE,WAAW,CAAC,CAAC,CAAC,CAAC;EAC/BC,UAAU,EAAEA,CAACC,GAAG,EAAEjB,IAAI,EAAEkB,EAAE,KAAK;IAC7BA,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC;EAChB;AACF,CAAC,CAAC;AAAAP,OAAA,CAAAxB,OAAA,GAAAyB,QAAA;AACK,MAAMO,yBAAyB,GAAGC,KAAK,IAAG;EAChD,OAAO9B,mBAAU,CAACc,QAAQ,CAACiB,OAAO,CAACD,KAAK,CAAC;AAC1C,CAAC;AAAAT,OAAA,CAAAQ,yBAAA,GAAAA,yBAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b650055002b3f9e694dd80ac3f4ef025ccf358e4","contentHash":"7b8abd8ee814420a022f21082cc451a8d8e7551aee916f7ad6afa862e2433b49"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\productController.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\productController.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":121}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":17},"end":{"line":8,"column":37}},"4":{"start":{"line":9,"column":27},"end":{"line":9,"column":81}},"5":{"start":{"line":10,"column":30},"end":{"line":10,"column":75}},"6":{"start":{"line":11,"column":22},"end":{"line":11,"column":59}},"7":{"start":{"line":12,"column":27},"end":{"line":12,"column":69}},"8":{"start":{"line":13,"column":21},"end":{"line":13,"column":82}},"9":{"start":{"line":14,"column":16},"end":{"line":14,"column":60}},"10":{"start":{"line":15,"column":14},"end":{"line":15,"column":55}},"11":{"start":{"line":16,"column":18},"end":{"line":16,"column":51}},"12":{"start":{"line":17,"column":39},"end":{"line":17,"column":93}},"13":{"start":{"line":18,"column":54},"end":{"line":18,"column":73}},"14":{"start":{"line":18,"column":75},"end":{"line":18,"column":326}},"15":{"start":{"line":18,"column":125},"end":{"line":18,"column":161}},"16":{"start":{"line":18,"column":163},"end":{"line":18,"column":324}},"17":{"start":{"line":18,"column":224},"end":{"line":18,"column":287}},"18":{"start":{"line":18,"column":327},"end":{"line":18,"column":339}},"19":{"start":{"line":19,"column":33},"end":{"line":19,"column":489}},"20":{"start":{"line":19,"column":46},"end":{"line":19,"column":47}},"21":{"start":{"line":19,"column":91},"end":{"line":19,"column":131}},"22":{"start":{"line":19,"column":133},"end":{"line":19,"column":487}},"23":{"start":{"line":19,"column":194},"end":{"line":19,"column":236}},"24":{"start":{"line":19,"column":402},"end":{"line":19,"column":483}},"25":{"start":{"line":19,"column":490},"end":{"line":19,"column":504}},"26":{"start":{"line":20,"column":44},"end":{"line":20,"column":70}},"27":{"start":{"line":20,"column":71},"end":{"line":20,"column":222}},"28":{"start":{"line":20,"column":89},"end":{"line":20,"column":193}},"29":{"start":{"line":20,"column":203},"end":{"line":20,"column":220}},"30":{"start":{"line":20,"column":223},"end":{"line":20,"column":234}},"31":{"start":{"line":21,"column":41},"end":{"line":21,"column":68}},"32":{"start":{"line":21,"column":70},"end":{"line":21,"column":121}},"33":{"start":{"line":22,"column":37},"end":{"line":22,"column":99}},"34":{"start":{"line":22,"column":86},"end":{"line":22,"column":99}},"35":{"start":{"line":22,"column":111},"end":{"line":22,"column":136}},"36":{"start":{"line":22,"column":138},"end":{"line":22,"column":322}},"37":{"start":{"line":22,"column":174},"end":{"line":22,"column":209}},"38":{"start":{"line":22,"column":211},"end":{"line":22,"column":251}},"39":{"start":{"line":22,"column":240},"end":{"line":22,"column":251}},"40":{"start":{"line":22,"column":252},"end":{"line":22,"column":320}},"41":{"start":{"line":22,"column":323},"end":{"line":22,"column":375}},"42":{"start":{"line":23,"column":25},"end":{"line":85,"column":2}},"43":{"start":{"line":32,"column":6},"end":{"line":32,"column":14}},"44":{"start":{"line":33,"column":17},"end":{"line":33,"column":28}},"45":{"start":{"line":34,"column":26},"end":{"line":34,"column":78}},"46":{"start":{"line":35,"column":2},"end":{"line":84,"column":3}},"47":{"start":{"line":36,"column":21},"end":{"line":36,"column":72}},"48":{"start":{"line":37,"column":17},"end":{"line":37,"column":60}},"49":{"start":{"line":38,"column":4},"end":{"line":42,"column":5}},"50":{"start":{"line":39,"column":6},"end":{"line":41,"column":9}},"51":{"start":{"line":43,"column":4},"end":{"line":47,"column":5}},"52":{"start":{"line":44,"column":6},"end":{"line":46,"column":9}},"53":{"start":{"line":48,"column":28},"end":{"line":53,"column":6}},"54":{"start":{"line":56,"column":4},"end":{"line":61,"column":5}},"55":{"start":{"line":57,"column":6},"end":{"line":60,"column":9}},"56":{"start":{"line":62,"column":17},"end":{"line":62,"column":62}},"57":{"start":{"line":65,"column":20},"end":{"line":77,"column":6}},"58":{"start":{"line":70,"column":29},"end":{"line":70,"column":36}},"59":{"start":{"line":75,"column":36},"end":{"line":75,"column":42}},"60":{"start":{"line":78,"column":4},"end":{"line":78,"column":81}},"61":{"start":{"line":79,"column":4},"end":{"line":83,"column":7}},"62":{"start":{"line":88,"column":0},"end":{"line":88,"column":44}},"63":{"start":{"line":89,"column":22},"end":{"line":120,"column":2}},"64":{"start":{"line":90,"column":20},"end":{"line":90,"column":33}},"65":{"start":{"line":91,"column":18},"end":{"line":93,"column":4}},"66":{"start":{"line":94,"column":2},"end":{"line":96,"column":5}},"67":{"start":{"line":94,"column":16},"end":{"line":96,"column":5}},"68":{"start":{"line":97,"column":2},"end":{"line":101,"column":3}},"69":{"start":{"line":98,"column":4},"end":{"line":100,"column":7}},"70":{"start":{"line":102,"column":2},"end":{"line":108,"column":7}},"71":{"start":{"line":103,"column":4},"end":{"line":103,"column":19}},"72":{"start":{"line":104,"column":4},"end":{"line":104,"column":75}},"73":{"start":{"line":106,"column":4},"end":{"line":106,"column":18}},"74":{"start":{"line":107,"column":4},"end":{"line":107,"column":74}},"75":{"start":{"line":109,"column":2},"end":{"line":109,"column":26}},"76":{"start":{"line":110,"column":2},"end":{"line":110,"column":82}},"77":{"start":{"line":111,"column":15},"end":{"line":115,"column":4}},"78":{"start":{"line":116,"column":2},"end":{"line":116,"column":68}},"79":{"start":{"line":117,"column":2},"end":{"line":119,"column":5}},"80":{"start":{"line":121,"column":0},"end":{"line":121,"column":38}},"81":{"start":{"line":122,"column":15},"end":{"line":153,"column":2}},"82":{"start":{"line":125,"column":6},"end":{"line":125,"column":15}},"83":{"start":{"line":126,"column":2},"end":{"line":130,"column":3}},"84":{"start":{"line":127,"column":4},"end":{"line":129,"column":7}},"85":{"start":{"line":131,"column":16},"end":{"line":147,"column":4}},"86":{"start":{"line":148,"column":2},"end":{"line":152,"column":5}},"87":{"start":{"line":154,"column":0},"end":{"line":154,"column":24}},"88":{"start":{"line":155,"column":22},"end":{"line":188,"column":2}},"89":{"start":{"line":156,"column":2},"end":{"line":161,"column":3}},"90":{"start":{"line":157,"column":4},"end":{"line":160,"column":7}},"91":{"start":{"line":162,"column":15},"end":{"line":162,"column":26}},"92":{"start":{"line":163,"column":15},"end":{"line":163,"column":60}},"93":{"start":{"line":164,"column":14},"end":{"line":168,"column":4}},"94":{"start":{"line":169,"column":2},"end":{"line":174,"column":3}},"95":{"start":{"line":170,"column":4},"end":{"line":173,"column":7}},"96":{"start":{"line":175,"column":2},"end":{"line":179,"column":3}},"97":{"start":{"line":176,"column":4},"end":{"line":176,"column":123}},"98":{"start":{"line":176,"column":40},"end":{"line":176,"column":47}},"99":{"start":{"line":178,"column":4},"end":{"line":178,"column":34}},"100":{"start":{"line":180,"column":2},"end":{"line":182,"column":6}},"101":{"start":{"line":183,"column":2},"end":{"line":187,"column":5}},"102":{"start":{"line":189,"column":0},"end":{"line":189,"column":38}},"103":{"start":{"line":190,"column":0},"end":{"line":211,"column":3}},"104":{"start":{"line":191,"column":16},"end":{"line":191,"column":67}},"105":{"start":{"line":192,"column":28},"end":{"line":192,"column":114}},"106":{"start":{"line":193,"column":26},"end":{"line":199,"column":4}},"107":{"start":{"line":200,"column":2},"end":{"line":200,"column":56}},"108":{"start":{"line":201,"column":2},"end":{"line":210,"column":3}},"109":{"start":{"line":202,"column":4},"end":{"line":202,"column":35}},"110":{"start":{"line":203,"column":4},"end":{"line":203,"column":25}},"111":{"start":{"line":204,"column":29},"end":{"line":208,"column":6}},"112":{"start":{"line":209,"column":4},"end":{"line":209,"column":82}},"113":{"start":{"line":212,"column":20},"end":{"line":268,"column":2}},"114":{"start":{"line":218,"column":6},"end":{"line":218,"column":14}},"115":{"start":{"line":219,"column":2},"end":{"line":223,"column":3}},"116":{"start":{"line":220,"column":4},"end":{"line":222,"column":7}},"117":{"start":{"line":224,"column":2},"end":{"line":228,"column":3}},"118":{"start":{"line":225,"column":4},"end":{"line":227,"column":7}},"119":{"start":{"line":229,"column":2},"end":{"line":234,"column":3}},"120":{"start":{"line":230,"column":4},"end":{"line":233,"column":7}},"121":{"start":{"line":235,"column":15},"end":{"line":235,"column":23}},"122":{"start":{"line":238,"column":24},"end":{"line":243,"column":4}},"123":{"start":{"line":246,"column":25},"end":{"line":250,"column":4}},"124":{"start":{"line":251,"column":21},"end":{"line":251,"column":42}},"125":{"start":{"line":252,"column":22},"end":{"line":252,"column":84}},"126":{"start":{"line":252,"column":61},"end":{"line":252,"column":80}},"127":{"start":{"line":253,"column":23},"end":{"line":253,"column":47}},"128":{"start":{"line":254,"column":2},"end":{"line":260,"column":5}},"129":{"start":{"line":263,"column":2},"end":{"line":267,"column":5}},"130":{"start":{"line":269,"column":0},"end":{"line":269,"column":34}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":31}},"loc":{"start":{"line":17,"column":37},"end":{"line":17,"column":95}},"line":17},"1":{"name":"ownKeys","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":16}},"loc":{"start":{"line":18,"column":41},"end":{"line":18,"column":341}},"line":18},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":207},"end":{"line":18,"column":208}},"loc":{"start":{"line":18,"column":222},"end":{"line":18,"column":289}},"line":18},"3":{"name":"_objectSpread","decl":{"start":{"line":19,"column":9},"end":{"line":19,"column":22}},"loc":{"start":{"line":19,"column":31},"end":{"line":19,"column":506}},"line":19},"4":{"name":"(anonymous_4)","decl":{"start":{"line":19,"column":177},"end":{"line":19,"column":178}},"loc":{"start":{"line":19,"column":192},"end":{"line":19,"column":238}},"line":19},"5":{"name":"(anonymous_5)","decl":{"start":{"line":19,"column":385},"end":{"line":19,"column":386}},"loc":{"start":{"line":19,"column":400},"end":{"line":19,"column":485}},"line":19},"6":{"name":"_defineProperty","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":24}},"loc":{"start":{"line":20,"column":42},"end":{"line":20,"column":236}},"line":20},"7":{"name":"_toPropertyKey","decl":{"start":{"line":21,"column":9},"end":{"line":21,"column":23}},"loc":{"start":{"line":21,"column":29},"end":{"line":21,"column":123}},"line":21},"8":{"name":"_toPrimitive","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":21}},"loc":{"start":{"line":22,"column":35},"end":{"line":22,"column":377}},"line":22},"9":{"name":"(anonymous_9)","decl":{"start":{"line":23,"column":67},"end":{"line":23,"column":68}},"loc":{"start":{"line":23,"column":87},"end":{"line":85,"column":1}},"line":23},"10":{"name":"(anonymous_10)","decl":{"start":{"line":70,"column":22},"end":{"line":70,"column":23}},"loc":{"start":{"line":70,"column":29},"end":{"line":70,"column":36}},"line":70},"11":{"name":"(anonymous_11)","decl":{"start":{"line":75,"column":29},"end":{"line":75,"column":30}},"loc":{"start":{"line":75,"column":36},"end":{"line":75,"column":42}},"line":75},"12":{"name":"(anonymous_12)","decl":{"start":{"line":89,"column":64},"end":{"line":89,"column":65}},"loc":{"start":{"line":89,"column":84},"end":{"line":120,"column":1}},"line":89},"13":{"name":"(anonymous_13)","decl":{"start":{"line":102,"column":54},"end":{"line":102,"column":55}},"loc":{"start":{"line":102,"column":62},"end":{"line":105,"column":3}},"line":102},"14":{"name":"(anonymous_14)","decl":{"start":{"line":105,"column":35},"end":{"line":105,"column":36}},"loc":{"start":{"line":105,"column":42},"end":{"line":108,"column":3}},"line":105},"15":{"name":"(anonymous_15)","decl":{"start":{"line":122,"column":57},"end":{"line":122,"column":58}},"loc":{"start":{"line":122,"column":77},"end":{"line":153,"column":1}},"line":122},"16":{"name":"(anonymous_16)","decl":{"start":{"line":155,"column":64},"end":{"line":155,"column":65}},"loc":{"start":{"line":155,"column":84},"end":{"line":188,"column":1}},"line":155},"17":{"name":"(anonymous_17)","decl":{"start":{"line":176,"column":33},"end":{"line":176,"column":34}},"loc":{"start":{"line":176,"column":40},"end":{"line":176,"column":47}},"line":176},"18":{"name":"(anonymous_18)","decl":{"start":{"line":190,"column":42},"end":{"line":190,"column":43}},"loc":{"start":{"line":190,"column":54},"end":{"line":211,"column":1}},"line":190},"19":{"name":"(anonymous_19)","decl":{"start":{"line":212,"column":62},"end":{"line":212,"column":63}},"loc":{"start":{"line":212,"column":82},"end":{"line":268,"column":1}},"line":212},"20":{"name":"(anonymous_20)","decl":{"start":{"line":252,"column":44},"end":{"line":252,"column":45}},"loc":{"start":{"line":252,"column":61},"end":{"line":252,"column":80}},"line":252}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":46},"end":{"line":17,"column":92}},"type":"cond-expr","locations":[{"start":{"line":17,"column":70},"end":{"line":17,"column":73}},{"start":{"line":17,"column":76},"end":{"line":17,"column":92}}],"line":17},"1":{"loc":{"start":{"line":17,"column":46},"end":{"line":17,"column":67}},"type":"binary-expr","locations":[{"start":{"line":17,"column":46},"end":{"line":17,"column":49}},{"start":{"line":17,"column":53},"end":{"line":17,"column":67}}],"line":17},"2":{"loc":{"start":{"line":18,"column":75},"end":{"line":18,"column":326}},"type":"if","locations":[{"start":{"line":18,"column":75},"end":{"line":18,"column":326}},{"start":{"line":18,"column":75},"end":{"line":18,"column":326}}],"line":18},"3":{"loc":{"start":{"line":18,"column":163},"end":{"line":18,"column":291}},"type":"binary-expr","locations":[{"start":{"line":18,"column":163},"end":{"line":18,"column":177}},{"start":{"line":18,"column":182},"end":{"line":18,"column":290}}],"line":18},"4":{"loc":{"start":{"line":19,"column":91},"end":{"line":19,"column":131}},"type":"cond-expr","locations":[{"start":{"line":19,"column":114},"end":{"line":19,"column":126}},{"start":{"line":19,"column":129},"end":{"line":19,"column":131}}],"line":19},"5":{"loc":{"start":{"line":19,"column":133},"end":{"line":19,"column":486}},"type":"cond-expr","locations":[{"start":{"line":19,"column":141},"end":{"line":19,"column":239}},{"start":{"line":19,"column":242},"end":{"line":19,"column":486}}],"line":19},"6":{"loc":{"start":{"line":19,"column":242},"end":{"line":19,"column":486}},"type":"cond-expr","locations":[{"start":{"line":19,"column":277},"end":{"line":19,"column":350}},{"start":{"line":19,"column":353},"end":{"line":19,"column":486}}],"line":19},"7":{"loc":{"start":{"line":20,"column":71},"end":{"line":20,"column":222}},"type":"if","locations":[{"start":{"line":20,"column":71},"end":{"line":20,"column":222}},{"start":{"line":20,"column":71},"end":{"line":20,"column":222}}],"line":20},"8":{"loc":{"start":{"line":21,"column":77},"end":{"line":21,"column":120}},"type":"cond-expr","locations":[{"start":{"line":21,"column":103},"end":{"line":21,"column":106}},{"start":{"line":21,"column":109},"end":{"line":21,"column":120}}],"line":21},"9":{"loc":{"start":{"line":22,"column":37},"end":{"line":22,"column":99}},"type":"if","locations":[{"start":{"line":22,"column":37},"end":{"line":22,"column":99}},{"start":{"line":22,"column":37},"end":{"line":22,"column":99}}],"line":22},"10":{"loc":{"start":{"line":22,"column":41},"end":{"line":22,"column":84}},"type":"binary-expr","locations":[{"start":{"line":22,"column":41},"end":{"line":22,"column":66}},{"start":{"line":22,"column":70},"end":{"line":22,"column":84}}],"line":22},"11":{"loc":{"start":{"line":22,"column":138},"end":{"line":22,"column":322}},"type":"if","locations":[{"start":{"line":22,"column":138},"end":{"line":22,"column":322}},{"start":{"line":22,"column":138},"end":{"line":22,"column":322}}],"line":22},"12":{"loc":{"start":{"line":22,"column":191},"end":{"line":22,"column":208}},"type":"binary-expr","locations":[{"start":{"line":22,"column":191},"end":{"line":22,"column":195}},{"start":{"line":22,"column":199},"end":{"line":22,"column":208}}],"line":22},"13":{"loc":{"start":{"line":22,"column":211},"end":{"line":22,"column":251}},"type":"if","locations":[{"start":{"line":22,"column":211},"end":{"line":22,"column":251}},{"start":{"line":22,"column":211},"end":{"line":22,"column":251}}],"line":22},"14":{"loc":{"start":{"line":22,"column":331},"end":{"line":22,"column":366}},"type":"cond-expr","locations":[{"start":{"line":22,"column":351},"end":{"line":22,"column":357}},{"start":{"line":22,"column":360},"end":{"line":22,"column":366}}],"line":22},"15":{"loc":{"start":{"line":35,"column":2},"end":{"line":84,"column":3}},"type":"if","locations":[{"start":{"line":35,"column":2},"end":{"line":84,"column":3}},{"start":{"line":35,"column":2},"end":{"line":84,"column":3}}],"line":35},"16":{"loc":{"start":{"line":38,"column":4},"end":{"line":42,"column":5}},"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":42,"column":5}},{"start":{"line":38,"column":4},"end":{"line":42,"column":5}}],"line":38},"17":{"loc":{"start":{"line":43,"column":4},"end":{"line":47,"column":5}},"type":"if","locations":[{"start":{"line":43,"column":4},"end":{"line":47,"column":5}},{"start":{"line":43,"column":4},"end":{"line":47,"column":5}}],"line":43},"18":{"loc":{"start":{"line":56,"column":4},"end":{"line":61,"column":5}},"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":61,"column":5}},{"start":{"line":56,"column":4},"end":{"line":61,"column":5}}],"line":56},"19":{"loc":{"start":{"line":94,"column":2},"end":{"line":96,"column":5}},"type":"if","locations":[{"start":{"line":94,"column":2},"end":{"line":96,"column":5}},{"start":{"line":94,"column":2},"end":{"line":96,"column":5}}],"line":94},"20":{"loc":{"start":{"line":97,"column":2},"end":{"line":101,"column":3}},"type":"if","locations":[{"start":{"line":97,"column":2},"end":{"line":101,"column":3}},{"start":{"line":97,"column":2},"end":{"line":101,"column":3}}],"line":97},"21":{"loc":{"start":{"line":126,"column":2},"end":{"line":130,"column":3}},"type":"if","locations":[{"start":{"line":126,"column":2},"end":{"line":130,"column":3}},{"start":{"line":126,"column":2},"end":{"line":130,"column":3}}],"line":126},"22":{"loc":{"start":{"line":156,"column":2},"end":{"line":161,"column":3}},"type":"if","locations":[{"start":{"line":156,"column":2},"end":{"line":161,"column":3}},{"start":{"line":156,"column":2},"end":{"line":161,"column":3}}],"line":156},"23":{"loc":{"start":{"line":169,"column":2},"end":{"line":174,"column":3}},"type":"if","locations":[{"start":{"line":169,"column":2},"end":{"line":174,"column":3}},{"start":{"line":169,"column":2},"end":{"line":174,"column":3}}],"line":169},"24":{"loc":{"start":{"line":175,"column":2},"end":{"line":179,"column":3}},"type":"if","locations":[{"start":{"line":175,"column":2},"end":{"line":179,"column":3}},{"start":{"line":175,"column":2},"end":{"line":179,"column":3}}],"line":175},"25":{"loc":{"start":{"line":181,"column":42},"end":{"line":181,"column":67}},"type":"binary-expr","locations":[{"start":{"line":181,"column":42},"end":{"line":181,"column":55}},{"start":{"line":181,"column":59},"end":{"line":181,"column":67}}],"line":181},"26":{"loc":{"start":{"line":219,"column":2},"end":{"line":223,"column":3}},"type":"if","locations":[{"start":{"line":219,"column":2},"end":{"line":223,"column":3}},{"start":{"line":219,"column":2},"end":{"line":223,"column":3}}],"line":219},"27":{"loc":{"start":{"line":219,"column":6},"end":{"line":219,"column":27}},"type":"binary-expr","locations":[{"start":{"line":219,"column":6},"end":{"line":219,"column":16}},{"start":{"line":219,"column":20},"end":{"line":219,"column":27}}],"line":219},"28":{"loc":{"start":{"line":224,"column":2},"end":{"line":228,"column":3}},"type":"if","locations":[{"start":{"line":224,"column":2},"end":{"line":228,"column":3}},{"start":{"line":224,"column":2},"end":{"line":228,"column":3}}],"line":224},"29":{"loc":{"start":{"line":224,"column":6},"end":{"line":224,"column":30}},"type":"binary-expr","locations":[{"start":{"line":224,"column":6},"end":{"line":224,"column":16}},{"start":{"line":224,"column":20},"end":{"line":224,"column":30}}],"line":224},"30":{"loc":{"start":{"line":229,"column":2},"end":{"line":234,"column":3}},"type":"if","locations":[{"start":{"line":229,"column":2},"end":{"line":234,"column":3}},{"start":{"line":229,"column":2},"end":{"line":234,"column":3}}],"line":229}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":4,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":1,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":1,"81":1,"82":0,"83":0,"84":0,"85":0,"86":0,"87":1,"88":1,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":1,"103":1,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":1,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":1},"f":{"0":4,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"b":{"0":[1,3],"1":[4,4],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_sequelize","_handlingEmptyFields","_handlingTryCatchBlocks","_grabbingImages","_handlingFileUploads","_notifications","_nodeCron","_moment","_textSlugfy","obj","__esModule","default","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","CreateNewProduct","asyncWrapper","req","name","description","model","keyword","status","categoryId","expiryDate","body","userId","user","id","areAllNotFilled","checkEmptyFields","category","db","Category","findByPk","json","message","t","existingProduct","Product","findOne","where","slug","SlugfyFunction","urls","grabbingImage","product","create","image","map","url","cloudinaryId","expiredAt","emitter","emit","data","exports","deleteProduct","productId","params","include","ProductAttribute","ProductImage","Promise","all","ProductAttributes","attr","destroy","removeImageFromCloudinary","ProductImages","img","search","q","query","send","items","findAll","Op","or","iLike","updateProduct","row","set","cron","schedule","today","moment","startOf","toISOString","todayWithTimeZone","tz","format","expiredProducts","lte","console","log","save","productOwnerUser","rateProduct","rating","comment","error","request","productRating","ProductRating","productRatings","numRatings","totalRating","reduce","sum","newAvgRating","update","avgRating"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\","sources":["productController.js"],"sourcesContent":["import db from '../../database/models';\r\nimport { Op } from \"sequelize\";\r\nimport { checkEmptyFields } from '../../utils/validations/handlingEmptyFields';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport { grabbingImage } from '../../utils/grabbingImages';\r\nimport { removeImageFromCloudinary } from '../../utils/handlingFileUploads';\r\nimport emitter from '../../events/notifications';\r\nimport cron from 'node-cron';\r\nimport moment from 'moment';\r\nimport { SlugfyFunction } from '../../utils/textSlugfy'\r\n\r\nexport const CreateNewProduct = asyncWrapper(async (req, res) => {\r\n\r\n  const { name, description, model, keyword, status, categoryId, expiryDate } = req.body;\r\n  const userId = req.user.id;\r\n  const areAllNotFilled = checkEmptyFields(req, res);\r\n\r\n  if (!areAllNotFilled) {\r\n    const category = await db.Category.findByPk(categoryId);\r\n    const user = await db.user.findByPk(userId);\r\n    if (!category) {\r\n      return res.status(404).json({ message: ' product Category not found.' });\r\n    }\r\n    if (!user) {\r\n      return res.status(404).json({ message: req.t('Undiscovered') });\r\n    }\r\n    const existingProduct = await db.Product.findOne({\r\n      where: { slug: SlugfyFunction(name), userId },\r\n    });\r\n    //defining slug\r\n\r\n    if (existingProduct) {\r\n      return res\r\n        .status(409)\r\n        .json({ status: req.t('fail'), message: req.t('product_exist_error') });\r\n    }\r\n\r\n    const urls = await grabbingImage(req);\r\n\r\n    // Create the new product\r\n    const product = await db.Product.create({\r\n      name,\r\n      slug: SlugfyFunction(name),\r\n      description,\r\n      model,\r\n      image: urls.map((url) => url.url)[0],\r\n      keyword,\r\n      status,\r\n      categoryId: categoryId,\r\n      userId: userId,\r\n      cloudinaryId: urls.map((url) => url.id)[0],\r\n      expiredAt: expiryDate \r\n    });\r\n    emitter.emit('newProduct', product.name, user, category.name);\r\n    res.status(201).json({\r\n      status: req.t('success'),\r\n      data: product,\r\n      message: product.name + ' ' + req.t('is_added'),\r\n    });\r\n  }\r\n});\r\n\r\n// adding  deleting product functionality\r\nexport const deleteProduct = asyncWrapper(async (req, res) => {\r\n  const productId = req.params.id;\r\n  const product = await db.Product.findByPk(productId, {\r\n    include: [db.ProductAttribute, db.ProductImage],\r\n  });\r\n  if (!product)\r\n    return res.status(404).json({ message: req.t('product_not_found') });\r\n  if (product.userId !== req.user.id) {\r\n    return res.status(403).json({ message: req.t('not_allowed_ToDelete') });\r\n  }\r\n  await Promise.all([\r\n    ...product.ProductAttributes.map((attr) => {\r\n      attr.destroy();\r\n      removeImageFromCloudinary(attr.cloudinaryId);\r\n    }),\r\n    ...product.ProductImages.map((img) => {\r\n      img.destroy();\r\n      removeImageFromCloudinary(img.cloudinaryId);\r\n    }),\r\n  ]);\r\n  await product.destroy();\r\n  await removeImageFromCloudinary(product.cloudinaryId);\r\n  const user = await db.user.findOne({ where: { id: req.user.id } });\r\n  emitter.emit('productRemoved', product.name, user);\r\n  res.status(200).json({\r\n    message: product.name + ' ' + req.t('productDeleted'),\r\n  });\r\n});\r\n\r\nexport const search = asyncWrapper(async (req, res) => {\r\n  const { q } = req.query;\r\nif (!q) {\r\n  return res.status(400).send({ message: 'Missing search query' });\r\n}\r\n  const items = await Product.findAll({\r\n    where: {\r\n      [Op.or]: [\r\n        { name: { [Op.iLike]: `%${q}%` } },\r\n        { description: { [Op.iLike]: `%${q}%` } },,\r\n        { model: { [Op.iLike]: `%${q}%` } },\r\n      ],\r\n    },\r\n  });\r\n  return res.status(200).json({status: req.t('success'),message: req.t('searching'), data: items});\r\n});\r\n\r\n\r\nexport const updateProduct = asyncWrapper( async (req, res) => {\r\n  if(!req.params.id){\r\n    return res.status.json({status: 'error', message:  'Id' + req.t('is_required')});\r\n  }\r\n  let userId = req.user.id;\r\n  const urls = await grabbingImage(req);\r\n\r\n  const row = await db.Product.findByPk(req.params.id, { where : { userId : userId }});\r\n  if(!row){\r\n    return res.status(404).json({status: 'error', message: req.t('product_does_not_exist_in_collection')});\r\n  }\r\n  if(urls.length > 0){\r\n    req.body['image'] = urls.map( url => url.url)[0],\r\n    removeImageFromCloudinary(row.cloudinaryId);\r\n\r\n  }\r\n  else{\r\n    req.body['image'] = row.image\r\n  }\r\n  row.set({\r\n    ...req.body,\r\n    slug: SlugfyFunction(req.body.name || row.name),\r\n  })\r\n  res.status(200).json({ status: req.t('success'), message: req.t('product_updated_successfully'), data: row})\r\n}\r\n  );\r\n\r\n\r\ncron.schedule('30 17 * * *', async () => {\r\n  const today = moment().startOf('day').toISOString();\r\n  const todayWithTimeZone = moment.tz(today, 'UTC').tz('Africa/Cairo').format(\"YYYY-MM-DDTHH:mm:ss.SSSZ\");\r\n  const expiredProducts = await db.Product.findAll({\r\n    where: {\r\n      expiredAt: {\r\n        [Op.lte]: todayWithTimeZone\r\n      }\r\n    }\r\n  });\r\n  console.log(`=========${todayWithTimeZone}=========`);\r\n  for (const product of expiredProducts) {\r\n    product.status = 'UNAVAILABLE';\r\n    await product.save();\r\n    const productOwnerUser = await db.user.findOne({ where: { id: product.userId } });\r\n    emitter.emit('productExpired', product.name,productOwnerUser);\r\n   \r\n  }\r\n\r\n});\r\n\r\n\r\nexport const rateProduct = asyncWrapper(async (req, res) => {\r\n  // Validate request body\r\n  const { productId, rating, comment } = req.body;\r\n \r\n  if (!productId || !rating) {\r\n    return res\r\n      .status(400)\r\n        .json({ error: 'Product ID and rating are required.' });\r\n  }\r\n  if (rating < 1 || rating > 5) {\r\n    return res.status(400).json({ error: req.t('the_rating_must_be_1_to_5') });\r\n  }\r\n\r\n  if(! await db.Product.findByPk(productId)){\r\n    return res.status(404).json({ error: request.t('fail'), message: req.t('product_not_found')});\r\n  }\r\n\r\n  const user = req.user;\r\n  // Create new ProductRating object\r\n\r\n  const productRating = await db.ProductRating.create({\r\n    productId: productId,\r\n    userId: user.id,\r\n    rating: rating,\r\n    comment: comment,\r\n  });\r\n\r\n      // Update product average rating\r\n      const productRatings = await db.ProductRating.findAll({\r\n        where: { productId: productId }\r\n      });\r\n\r\n      const numRatings = productRatings.length;\r\n      const totalRating = productRatings.reduce((sum, rating) => sum + rating.rating, 0);\r\n      const newAvgRating = totalRating / numRatings;\r\n      await db.Product.update({ avgRating: newAvgRating }, {\r\n        where: { id: productId }\r\n      });\r\n\r\n        // Send confirmation message to frontend\r\n    return res.status(201).json({status: req.t('success'), data: productRating,  message: req.t('product_review_posted') });\r\n  \r\n});\r\n\r\n\r\n\r\n  "],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7ba6f97e5ed306627f7797fbb7b0d14bb87cdc2c","contentHash":"5392eee86e74e3781a7fe4b873e1c083501b3f48ef8515396c2468edfae86bec"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\grabbingImages.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\grabbingImages.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"2":{"start":{"line":7,"column":27},"end":{"line":7,"column":59}},"3":{"start":{"line":8,"column":17},"end":{"line":8,"column":85}},"4":{"start":{"line":8,"column":31},"end":{"line":8,"column":85}},"5":{"start":{"line":9,"column":22},"end":{"line":20,"column":1}},"6":{"start":{"line":10,"column":15},"end":{"line":10,"column":17}},"7":{"start":{"line":11,"column":16},"end":{"line":11,"column":25}},"8":{"start":{"line":12,"column":2},"end":{"line":18,"column":3}},"9":{"start":{"line":15,"column":8},"end":{"line":15,"column":12}},"10":{"start":{"line":16,"column":31},"end":{"line":16,"column":51}},"11":{"start":{"line":17,"column":4},"end":{"line":17,"column":34}},"12":{"start":{"line":19,"column":2},"end":{"line":19,"column":14}},"13":{"start":{"line":21,"column":0},"end":{"line":21,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":17},"end":{"line":8,"column":18}},"loc":{"start":{"line":8,"column":31},"end":{"line":8,"column":85}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":22},"end":{"line":9,"column":23}},"loc":{"start":{"line":9,"column":35},"end":{"line":20,"column":1}},"line":9}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1},"f":{"0":0,"1":0},"b":{},"inputSourceMap":{"version":3,"names":["_handlingFileUploads","require","uploader","path","uploads","grabbingImage","req","urls","files","file","imageUploadResults","push","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\","sources":["grabbingImages.js"],"sourcesContent":["import { uploads } from './handlingFileUploads';\r\nconst uploader = async (path) => await uploads(path, 'image');\r\nexport const grabbingImage = async (req) => {\r\n  const urls = [];\r\n  const files = req.files;\r\n  for (const file of files) {\r\n    const { path } = file;\r\n    const imageUploadResults = await uploader(path);\r\n    urls.push(imageUploadResults);\r\n  }\r\n  return urls;\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,oBAAA,GAAAC,OAAA;AACA,MAAMC,QAAQ,GAAG,MAAOC,IAAI,IAAK,MAAM,IAAAC,4BAAO,EAACD,IAAI,EAAE,OAAO,CAAC;AACtD,MAAME,aAAa,GAAG,MAAOC,GAAG,IAAK;EAC1C,MAAMC,IAAI,GAAG,EAAE;EACf,MAAMC,KAAK,GAAGF,GAAG,CAACE,KAAK;EACvB,KAAK,MAAMC,IAAI,IAAID,KAAK,EAAE;IACxB,MAAM;MAAEL;IAAK,CAAC,GAAGM,IAAI;IACrB,MAAMC,kBAAkB,GAAG,MAAMR,QAAQ,CAACC,IAAI,CAAC;IAC/CI,IAAI,CAACI,IAAI,CAACD,kBAAkB,CAAC;EAC/B;EACA,OAAOH,IAAI;AACb,CAAC;AAACK,OAAA,CAAAP,aAAA,GAAAA,aAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"eabe5aa11bdfce5a0afb7b78ac91adbfd3a28947","contentHash":"af03c78abca25233f4ef94afc69d815d28dcd8545ef0554ba2ed5cc9578472aa"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\textSlugfy.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\textSlugfy.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":32}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"3":{"start":{"line":8,"column":39},"end":{"line":8,"column":93}},"4":{"start":{"line":9,"column":23},"end":{"line":16,"column":1}},"5":{"start":{"line":10,"column":2},"end":{"line":15,"column":5}},"6":{"start":{"line":17,"column":0},"end":{"line":17,"column":40}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":31}},"loc":{"start":{"line":8,"column":37},"end":{"line":8,"column":95}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":23},"end":{"line":9,"column":24}},"loc":{"start":{"line":9,"column":31},"end":{"line":16,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":46},"end":{"line":8,"column":92}},"type":"cond-expr","locations":[{"start":{"line":8,"column":70},"end":{"line":8,"column":73}},{"start":{"line":8,"column":76},"end":{"line":8,"column":92}}],"line":8},"1":{"loc":{"start":{"line":8,"column":46},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":46},"end":{"line":8,"column":49}},{"start":{"line":8,"column":53},"end":{"line":8,"column":67}}],"line":8}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":1},"f":{"0":1,"1":0},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"names":["_slugify","_interopRequireDefault","require","obj","__esModule","default","SlugfyFunction","text","slugify","remove","undefined","lower","strict","locale","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\","sources":["textSlugfy.js"],"sourcesContent":["import slugify from 'slugify';\r\nexport const SlugfyFunction = (text) => { return slugify(text, {\r\n    remove: undefined,\r\n    lower: true, \r\n    strict: false, \r\n    locale: 'en', \r\n  })}\r\n  ;"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA8B,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AACvB,MAAMG,cAAc,GAAIC,IAAI,IAAK;EAAE,OAAO,IAAAC,gBAAO,EAACD,IAAI,EAAE;IAC3DE,MAAM,EAAEC,SAAS;IACjBC,KAAK,EAAE,IAAI;IACXC,MAAM,EAAE,KAAK;IACbC,MAAM,EAAE;EACV,CAAC,CAAC;AAAA,CAAC;AACFC,OAAA,CAAAR,cAAA,GAAAA,cAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2c995793686f64123c42f0b35ff38edccccbf653","contentHash":"e56ba0abb7f104b8c7ad351431c41dac24df815cc96dc6ec853aaed30334209b"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\productVariationsControllers.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\productVariationsControllers.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":72}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":27},"end":{"line":8,"column":81}},"4":{"start":{"line":9,"column":30},"end":{"line":9,"column":75}},"5":{"start":{"line":10,"column":22},"end":{"line":10,"column":59}},"6":{"start":{"line":11,"column":27},"end":{"line":11,"column":69}},"7":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"8":{"start":{"line":14,"column":31},"end":{"line":63,"column":2}},"9":{"start":{"line":22,"column":6},"end":{"line":22,"column":14}},"10":{"start":{"line":24,"column":26},"end":{"line":24,"column":78}},"11":{"start":{"line":25,"column":2},"end":{"line":62,"column":3}},"12":{"start":{"line":27,"column":20},"end":{"line":27,"column":69}},"13":{"start":{"line":28,"column":4},"end":{"line":32,"column":5}},"14":{"start":{"line":29,"column":6},"end":{"line":31,"column":9}},"15":{"start":{"line":33,"column":17},"end":{"line":33,"column":62}},"16":{"start":{"line":34,"column":25},"end":{"line":39,"column":6}},"17":{"start":{"line":41,"column":4},"end":{"line":61,"column":5}},"18":{"start":{"line":42,"column":30},"end":{"line":50,"column":8}},"19":{"start":{"line":47,"column":35},"end":{"line":47,"column":42}},"20":{"start":{"line":49,"column":38},"end":{"line":49,"column":44}},"21":{"start":{"line":51,"column":6},"end":{"line":55,"column":9}},"22":{"start":{"line":57,"column":6},"end":{"line":60,"column":9}},"23":{"start":{"line":64,"column":0},"end":{"line":64,"column":56}},"24":{"start":{"line":65,"column":30},"end":{"line":89,"column":2}},"25":{"start":{"line":68,"column":6},"end":{"line":68,"column":16}},"26":{"start":{"line":69,"column":2},"end":{"line":72,"column":5}},"27":{"start":{"line":69,"column":11},"end":{"line":72,"column":5}},"28":{"start":{"line":73,"column":14},"end":{"line":73,"column":65}},"29":{"start":{"line":74,"column":2},"end":{"line":77,"column":5}},"30":{"start":{"line":74,"column":12},"end":{"line":77,"column":5}},"31":{"start":{"line":78,"column":15},"end":{"line":78,"column":60}},"32":{"start":{"line":79,"column":2},"end":{"line":82,"column":3}},"33":{"start":{"line":80,"column":4},"end":{"line":80,"column":40}},"34":{"start":{"line":81,"column":4},"end":{"line":81,"column":74}},"35":{"start":{"line":83,"column":2},"end":{"line":83,"column":20}},"36":{"start":{"line":84,"column":2},"end":{"line":84,"column":19}},"37":{"start":{"line":85,"column":2},"end":{"line":88,"column":5}},"38":{"start":{"line":90,"column":0},"end":{"line":90,"column":54}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":73},"end":{"line":14,"column":74}},"loc":{"start":{"line":14,"column":93},"end":{"line":63,"column":1}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":47,"column":28},"end":{"line":47,"column":29}},"loc":{"start":{"line":47,"column":35},"end":{"line":47,"column":42}},"line":47},"3":{"name":"(anonymous_3)","decl":{"start":{"line":49,"column":31},"end":{"line":49,"column":32}},"loc":{"start":{"line":49,"column":38},"end":{"line":49,"column":44}},"line":49},"4":{"name":"(anonymous_4)","decl":{"start":{"line":65,"column":72},"end":{"line":65,"column":73}},"loc":{"start":{"line":65,"column":92},"end":{"line":89,"column":1}},"line":65}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12},"2":{"loc":{"start":{"line":25,"column":2},"end":{"line":62,"column":3}},"type":"if","locations":[{"start":{"line":25,"column":2},"end":{"line":62,"column":3}},{"start":{"line":25,"column":2},"end":{"line":62,"column":3}}],"line":25},"3":{"loc":{"start":{"line":28,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":32,"column":5}},{"start":{"line":28,"column":4},"end":{"line":32,"column":5}}],"line":28},"4":{"loc":{"start":{"line":41,"column":4},"end":{"line":61,"column":5}},"type":"if","locations":[{"start":{"line":41,"column":4},"end":{"line":61,"column":5}},{"start":{"line":41,"column":4},"end":{"line":61,"column":5}}],"line":41},"5":{"loc":{"start":{"line":69,"column":2},"end":{"line":72,"column":5}},"type":"if","locations":[{"start":{"line":69,"column":2},"end":{"line":72,"column":5}},{"start":{"line":69,"column":2},"end":{"line":72,"column":5}}],"line":69},"6":{"loc":{"start":{"line":74,"column":2},"end":{"line":77,"column":5}},"type":"if","locations":[{"start":{"line":74,"column":2},"end":{"line":77,"column":5}},{"start":{"line":74,"column":2},"end":{"line":77,"column":5}}],"line":74},"7":{"loc":{"start":{"line":79,"column":2},"end":{"line":82,"column":3}},"type":"if","locations":[{"start":{"line":79,"column":2},"end":{"line":82,"column":3}},{"start":{"line":79,"column":2},"end":{"line":82,"column":3}}],"line":79}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0},"b":{"0":[0,1],"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_handlingEmptyFields","_handlingTryCatchBlocks","_grabbingImages","_handlingFileUploads","obj","__esModule","default","addNewProductVariation","asyncWrapper","req","res","price","size","color","productId","quantity","body","areAllNotFilled","checkEmptyFields","product","db","Product","findByPk","status","json","message","urls","grabbingImage","isColorExist","ProductAttribute","findOne","where","productVariaton","create","attrImage","map","url","cloudinaryId","id","t","data","exports","updateProductVariaton","params","ststus","row","length","removeImageFromCloudinary","set","save"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\","sources":["productVariationsControllers.js"],"sourcesContent":["import db from '../../database/models';\r\nimport { checkEmptyFields } from '../../utils/validations/handlingEmptyFields';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport { grabbingImage } from '../../utils/grabbingImages';\r\nimport { removeImageFromCloudinary } from '../../utils/handlingFileUploads';\r\n\r\n//defining execution of images uploads\r\nexport const addNewProductVariation = asyncWrapper(async (req, res) => {\r\n\r\n  // Get the data for the new product from the request body\r\n  const { price, size, color, productId,quantity } = req.body;\r\n  // Check if the required fields are provided\r\n  const areAllNotFilled = checkEmptyFields(req, res);\r\n  if (!areAllNotFilled) {\r\n    // Check if the category and user exist\r\n    const product = await db.Product.findByPk(productId);\r\n    if (!product) {\r\n      return res.status(404).json({ message: 'product not found.' });\r\n    }\r\n\r\n    const urls = await grabbingImage(req);\r\n    const isColorExist = await db.ProductAttribute.findOne({\r\n      where:{\r\n        color, productId\r\n      }\r\n    })\r\n    // Create the new product\r\n    if(!isColorExist){\r\n    const productVariaton = await db.ProductAttribute.create({\r\n      price,\r\n      size,\r\n      color,\r\n      productId,\r\n      attrImage:urls.map( url => url.url)[0],\r\n      quantity,\r\n      cloudinaryId:urls.map( url => url.id)[0]\r\n    });\r\n    res.status(201).json({\r\n      status: req.t('success'),\r\n      data: productVariaton,\r\n      message: `new product Variaton with ${productVariaton.color} is added successfully`,\r\n    });\r\n  } else{\r\n    return res.status(409).json({\r\n      status: req.t('fail'),\r\n      message: color + ' ' + req.t('ColorbeenAddtoCart'),\r\n    });\r\n  }\r\n  }\r\n});\r\n\r\nexport const updateProductVariaton = asyncWrapper( async (req, res) => {\r\n  const {id} = req.params\r\n  if(!id) return res.status({ststus: req.t('fail'), message: 'Id ' + req.t('is_required') })\r\n\r\n  const row  = await db.ProductAttribute.findByPk(id)\r\n  if(!row) return res.status(404).json({ststus: req.t('fail'), message: req.t('no_product_variation_found')})\r\n\r\n  const urls = await grabbingImage(req);\r\n  if(urls.length > 0){\r\n    req.body['attrImage'] = urls[0].url;\r\n    removeImageFromCloudinary(row.cloudinaryId);\r\n  }\r\n\r\n  row.set(req.body);\r\n  await row.save();\r\n  return res.status(200).json({ststus: req.t('success'), message: req.t('product_variation_updated')})\r\n})"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"148c83da7547169f9ecce2c21a1e3d66884eb2f3","contentHash":"0b4a813d78a1cf049c164bb135de867e6e70c628cbb53cd7dac36120f34a514d"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\ProductImagesController.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\ProductImagesController.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":70}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":27},"end":{"line":8,"column":81}},"4":{"start":{"line":9,"column":30},"end":{"line":9,"column":75}},"5":{"start":{"line":10,"column":22},"end":{"line":10,"column":59}},"6":{"start":{"line":11,"column":27},"end":{"line":11,"column":69}},"7":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"8":{"start":{"line":15,"column":28},"end":{"line":59,"column":2}},"9":{"start":{"line":20,"column":6},"end":{"line":20,"column":14}},"10":{"start":{"line":23,"column":26},"end":{"line":23,"column":78}},"11":{"start":{"line":24,"column":2},"end":{"line":58,"column":3}},"12":{"start":{"line":26,"column":20},"end":{"line":26,"column":69}},"13":{"start":{"line":27,"column":4},"end":{"line":31,"column":5}},"14":{"start":{"line":28,"column":6},"end":{"line":30,"column":9}},"15":{"start":{"line":34,"column":17},"end":{"line":34,"column":62}},"16":{"start":{"line":35,"column":4},"end":{"line":44,"column":5}},"17":{"start":{"line":36,"column":6},"end":{"line":43,"column":9}},"18":{"start":{"line":37,"column":8},"end":{"line":42,"column":11}},"19":{"start":{"line":45,"column":32},"end":{"line":52,"column":6}},"20":{"start":{"line":53,"column":4},"end":{"line":57,"column":7}},"21":{"start":{"line":60,"column":0},"end":{"line":60,"column":50}},"22":{"start":{"line":61,"column":31},"end":{"line":83,"column":2}},"23":{"start":{"line":62,"column":13},"end":{"line":62,"column":27}},"24":{"start":{"line":63,"column":2},"end":{"line":68,"column":3}},"25":{"start":{"line":64,"column":4},"end":{"line":67,"column":7}},"26":{"start":{"line":69,"column":14},"end":{"line":69,"column":61}},"27":{"start":{"line":70,"column":15},"end":{"line":70,"column":60}},"28":{"start":{"line":72,"column":2},"end":{"line":77,"column":3}},"29":{"start":{"line":73,"column":4},"end":{"line":73,"column":45}},"30":{"start":{"line":74,"column":4},"end":{"line":74,"column":50}},"31":{"start":{"line":75,"column":4},"end":{"line":75,"column":74}},"32":{"start":{"line":76,"column":4},"end":{"line":76,"column":37}},"33":{"start":{"line":78,"column":2},"end":{"line":78,"column":19}},"34":{"start":{"line":79,"column":2},"end":{"line":82,"column":5}},"35":{"start":{"line":84,"column":0},"end":{"line":84,"column":56}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":70},"end":{"line":15,"column":71}},"loc":{"start":{"line":15,"column":90},"end":{"line":59,"column":1}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":36,"column":19},"end":{"line":36,"column":20}},"loc":{"start":{"line":36,"column":36},"end":{"line":43,"column":7}},"line":36},"3":{"name":"(anonymous_3)","decl":{"start":{"line":61,"column":73},"end":{"line":61,"column":74}},"loc":{"start":{"line":61,"column":93},"end":{"line":83,"column":1}},"line":61}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12},"2":{"loc":{"start":{"line":24,"column":2},"end":{"line":58,"column":3}},"type":"if","locations":[{"start":{"line":24,"column":2},"end":{"line":58,"column":3}},{"start":{"line":24,"column":2},"end":{"line":58,"column":3}}],"line":24},"3":{"loc":{"start":{"line":27,"column":4},"end":{"line":31,"column":5}},"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":31,"column":5}},{"start":{"line":27,"column":4},"end":{"line":31,"column":5}}],"line":27},"4":{"loc":{"start":{"line":35,"column":4},"end":{"line":44,"column":5}},"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":44,"column":5}},{"start":{"line":35,"column":4},"end":{"line":44,"column":5}}],"line":35},"5":{"loc":{"start":{"line":63,"column":2},"end":{"line":68,"column":3}},"type":"if","locations":[{"start":{"line":63,"column":2},"end":{"line":68,"column":3}},{"start":{"line":63,"column":2},"end":{"line":68,"column":3}}],"line":63},"6":{"loc":{"start":{"line":72,"column":2},"end":{"line":77,"column":3}},"type":"if","locations":[{"start":{"line":72,"column":2},"end":{"line":77,"column":3}},{"start":{"line":72,"column":2},"end":{"line":77,"column":3}}],"line":72},"7":{"loc":{"start":{"line":73,"column":16},"end":{"line":73,"column":44}},"type":"binary-expr","locations":[{"start":{"line":73,"column":16},"end":{"line":73,"column":27}},{"start":{"line":73,"column":31},"end":{"line":73,"column":44}}],"line":73},"8":{"loc":{"start":{"line":74,"column":19},"end":{"line":74,"column":49}},"type":"binary-expr","locations":[{"start":{"line":74,"column":19},"end":{"line":74,"column":29}},{"start":{"line":74,"column":33},"end":{"line":74,"column":49}}],"line":74}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1},"f":{"0":1,"1":0,"2":0,"3":0},"b":{"0":[0,1],"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_handlingEmptyFields","_handlingTryCatchBlocks","_grabbingImages","_handlingFileUploads","obj","__esModule","default","addNewProductimages","asyncWrapper","req","res","productId","status","body","areAllNotFilled","checkEmptyFields","product","db","Product","findByPk","json","message","urls","grabbingImage","forEach","element","ProductImage","create","prodImage","url","cloudinaryId","id","productimageDetails","include","model","attributes","exclude","t","data","exports","updateNewProductimages","params","row","length","removeImageFromCloudinary","set","save"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\","sources":["ProductImagesController.js"],"sourcesContent":["import db from '../../database/models';\r\nimport { checkEmptyFields } from '../../utils/validations/handlingEmptyFields';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport { grabbingImage } from '../../utils/grabbingImages';\r\nimport { removeImageFromCloudinary } from '../../utils/handlingFileUploads';\r\n\r\n//defining execution of images uploads\r\n\r\nexport const addNewProductimages = asyncWrapper(async (req, res) => {\r\n  // Get the data for the new product from the request body\r\n  const { productId, status } = req.body;\r\n\r\n  // Check if the required fields are provided\r\n  const areAllNotFilled = checkEmptyFields(req, res);\r\n\r\n  if (!areAllNotFilled) {\r\n    // Check if the category and user exist\r\n    const product = await db.Product.findByPk(productId);\r\n    if (!product) {\r\n      return res.status(404).json({ message: 'product not found.' });\r\n    }\r\n    // Create the new product\r\n\r\n\r\n    const urls = await grabbingImage(req);\r\n\r\n    if (product) {\r\n      urls.forEach(async (element) => {\r\n        await db.ProductImage.create({\r\n          productId,\r\n          prodImage: element.url,\r\n          status,\r\n          cloudinaryId:element.id\r\n        });\r\n      });\r\n    }\r\n\r\n    const productimageDetails = await db.Product.findByPk(productId, {\r\n      include: [{ model: await db.ProductImage }],\r\n      attributes: { exclude: ['createdAt', 'updatedAt'] },\r\n    });\r\n    res.status(201).json({\r\n      status: req.t('success'),\r\n      data: productimageDetails,\r\n      message: `new images are uploaded successfully`,\r\n    });\r\n  }\r\n});\r\n\r\n\r\nexport const updateNewProductimages = asyncWrapper ( async(req, res) => {\r\n  const id = req.params?.id;\r\n  if(!id){\r\n    return res.status(400).json({status: req.t('fail'), message : 'Id ' + req.t('is_required') });\r\n  }\r\n  const row = await db.ProductImage.findByPk(id)\r\n  const urls = await grabbingImage(req);\r\n\r\n  let prodImage, cloudinaryId;\r\n  if(urls.length > 0) {\r\n    prodImage = urls[0].url || row.prodImage\r\n    cloudinaryId = urls[0].id || row.cloudinaryId\r\n    removeImageFromCloudinary(row.cloudinaryId);\r\n\r\n    row.set(prodImage, cloudinaryId )\r\n  }\r\n  await row.save()\r\n\r\n  return res.status(200).json({status : req.t('success'), message: req.t('product_image_updated_successfully') })\r\n\r\n} )"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"49f6fc8d75e790cffd2f07fc69fe463333bc3788","contentHash":"358d5c07b07aad26c789119be6a8652bbbae9da54c28a4d37eda14cac0382fca"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\itemController.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\itemController.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":62}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":30},"end":{"line":8,"column":75}},"4":{"start":{"line":9,"column":39},"end":{"line":9,"column":93}},"5":{"start":{"line":11,"column":26},"end":{"line":54,"column":2}},"6":{"start":{"line":13,"column":15},"end":{"line":13,"column":34}},"7":{"start":{"line":14,"column":16},"end":{"line":14,"column":37}},"8":{"start":{"line":15,"column":17},"end":{"line":15,"column":35}},"9":{"start":{"line":17,"column":19},"end":{"line":25,"column":4}},"10":{"start":{"line":27,"column":21},"end":{"line":27,"column":54}},"11":{"start":{"line":28,"column":22},"end":{"line":28,"column":36}},"12":{"start":{"line":29,"column":23},"end":{"line":29,"column":38}},"13":{"start":{"line":30,"column":2},"end":{"line":53,"column":3}},"14":{"start":{"line":31,"column":4},"end":{"line":41,"column":7}},"15":{"start":{"line":43,"column":4},"end":{"line":52,"column":7}},"16":{"start":{"line":56,"column":0},"end":{"line":56,"column":46}},"17":{"start":{"line":57,"column":25},"end":{"line":85,"column":2}},"18":{"start":{"line":59,"column":15},"end":{"line":59,"column":34}},"19":{"start":{"line":60,"column":16},"end":{"line":60,"column":37}},"20":{"start":{"line":61,"column":17},"end":{"line":61,"column":35}},"21":{"start":{"line":63,"column":19},"end":{"line":69,"column":4}},"22":{"start":{"line":71,"column":21},"end":{"line":71,"column":54}},"23":{"start":{"line":72,"column":22},"end":{"line":72,"column":36}},"24":{"start":{"line":73,"column":23},"end":{"line":73,"column":38}},"25":{"start":{"line":74,"column":2},"end":{"line":84,"column":5}},"26":{"start":{"line":86,"column":0},"end":{"line":86,"column":44}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":31}},"loc":{"start":{"line":9,"column":37},"end":{"line":9,"column":95}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":68},"end":{"line":11,"column":69}},"loc":{"start":{"line":11,"column":88},"end":{"line":54,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":57,"column":67},"end":{"line":57,"column":68}},"loc":{"start":{"line":57,"column":87},"end":{"line":85,"column":1}},"line":57}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":92}},"type":"cond-expr","locations":[{"start":{"line":9,"column":70},"end":{"line":9,"column":73}},{"start":{"line":9,"column":76},"end":{"line":9,"column":92}}],"line":9},"1":{"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":67}},"type":"binary-expr","locations":[{"start":{"line":9,"column":46},"end":{"line":9,"column":49}},{"start":{"line":9,"column":53},"end":{"line":9,"column":67}}],"line":9},"2":{"loc":{"start":{"line":13,"column":15},"end":{"line":13,"column":34}},"type":"binary-expr","locations":[{"start":{"line":13,"column":15},"end":{"line":13,"column":29}},{"start":{"line":13,"column":33},"end":{"line":13,"column":34}}],"line":13},"3":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":37}},"type":"binary-expr","locations":[{"start":{"line":14,"column":16},"end":{"line":14,"column":31}},{"start":{"line":14,"column":35},"end":{"line":14,"column":37}}],"line":14},"4":{"loc":{"start":{"line":30,"column":2},"end":{"line":53,"column":3}},"type":"if","locations":[{"start":{"line":30,"column":2},"end":{"line":53,"column":3}},{"start":{"line":30,"column":2},"end":{"line":53,"column":3}}],"line":30},"5":{"loc":{"start":{"line":59,"column":15},"end":{"line":59,"column":34}},"type":"binary-expr","locations":[{"start":{"line":59,"column":15},"end":{"line":59,"column":29}},{"start":{"line":59,"column":33},"end":{"line":59,"column":34}}],"line":59},"6":{"loc":{"start":{"line":60,"column":16},"end":{"line":60,"column":37}},"type":"binary-expr","locations":[{"start":{"line":60,"column":16},"end":{"line":60,"column":31}},{"start":{"line":60,"column":35},"end":{"line":60,"column":37}}],"line":60}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":0,"24":0,"25":0,"26":1},"f":{"0":1,"1":0,"2":1},"b":{"0":[0,1],"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1],"6":[1,1]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_handlingTryCatchBlocks","obj","__esModule","default","getAllSellerItems","asyncWrapper","req","res","page","query","limit","offset","products","db","Product","findAndCountAll","where","userId","user","id","totalPages","Math","ceil","count","currentPage","parseInt","itemsPerPage","status","json","t","data","totalItems","rows","message","exports","getAllBuyerItems"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\","sources":["itemController.js"],"sourcesContent":["import db from \"../../database/models\";\r\nimport { asyncWrapper } from \"../../utils/handlingTryCatchBlocks\";\r\n\r\n\r\n// Get all Product of a seller\r\nexport const getAllSellerItems = asyncWrapper(async (req, res) => {\r\n\r\n    // Set up pagination options\r\n    const page = req.query.page || 1;\r\n    const limit = req.query.limit || 10;\r\n    const offset = (page - 1) * limit;\r\n    // Find all products registered by the user with pagination\r\n    const products = await db.Product.findAndCountAll({\r\n        where: {\r\n            userId: req.user.id,\r\n           // status: 'AVAILABLE'\r\n        },\r\n\r\n        limit,\r\n        offset,\r\n    });\r\n    // Return the paginated results\r\n    const totalPages = Math.ceil(products.count / limit);\r\n    const currentPage = parseInt(page);\r\n    const itemsPerPage = parseInt(limit);\r\n    if (products) {\r\n        res.status(200).json({\r\n            status: req.t('success'),\r\n            data: {\r\n                totalItems: products.count,\r\n                totalPages,\r\n                currentPage,\r\n                itemsPerPage,\r\n                products: products.rows,\r\n            },\r\n            message:req.t('productRetieved'),\r\n        });\r\n    } else {\r\n        res.status(404).json({\r\n            data: {\r\n                totalItems: products.count,\r\n                totalPages,\r\n                currentPage,\r\n                itemsPerPage,\r\n                products: products.rows,\r\n            },\r\n            message:req.t('product_not_found')\r\n        })\r\n    }\r\n})\r\n    //Get all available Products for sale\r\n    export const getAllBuyerItems = asyncWrapper(async (req, res) => {\r\n\r\n        // Set up pagination options\r\n        const page = req.query.page || 1;\r\n        const limit = req.query.limit || 10;\r\n        const offset = (page - 1) * limit;\r\n        // Find all products registered by the user with pagination\r\n        const products = await db.Product.findAndCountAll({\r\n          where: {\r\n            status :'AVAILABLE'\r\n          },\r\n            limit,\r\n            offset,\r\n         \r\n        });\r\n        // Return the paginated results\r\n        const totalPages = Math.ceil(products.count / limit);\r\n        const currentPage = parseInt(page);\r\n        const itemsPerPage = parseInt(limit);\r\n        res.status(200).json({\r\n            status: req.t('success'),\r\n            data: {\r\n                totalItems: products.count,\r\n                totalPages,\r\n                currentPage,\r\n                itemsPerPage,\r\n                products: products.rows,\r\n            },\r\n            message: req.t('productRetieved'),\r\n        });\r\n    })\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4fffd8733a38fde48bfc61c6def0b6d822d68769","contentHash":"ba2278b5d2e9df76029b86077c5adefcd8f4534cc976b6faf5aea1e79489c5bb"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\products\\wishlist.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\products\\wishlist.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"3":{"start":{"line":8,"column":12},"end":{"line":8,"column":44}},"4":{"start":{"line":9,"column":26},"end":{"line":9,"column":82}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":15},"end":{"line":11,"column":40}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":101}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":98}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":117}},"10":{"start":{"line":15,"column":15},"end":{"line":15,"column":21}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"names":["_express","_interopRequireDefault","require","_auth","_wishlistController","obj","__esModule","default","router","express","Router","post","auth","addToWishlist","get","getWishlist","delete","deleteFromWishlist","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\products\\","sources":["wishlist.js"],"sourcesContent":["import express from 'express';\r\nimport { auth } from '../../middleware/auth';\r\nimport {\r\n  getWishlist,\r\n  addToWishlist,\r\n  deleteFromWishlist,\r\n} from '../../controllers/products/wishlistController';\r\nconst router = express.Router();\r\nrouter.post('/api/v1/product/wishlist', auth('buyer'), addToWishlist);\r\nrouter.get('/api/v1/product/wishlist', auth('buyer'), getWishlist);\r\nrouter.delete(\r\n  '/api/v1/product/wishlist/:product',\r\n  auth('buyer'),\r\n  deleteFromWishlist\r\n);\r\nexport default router;\r\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,mBAAA,GAAAF,OAAA;AAIuD,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AACvD,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAC/BF,MAAM,CAACG,IAAI,CAAC,0BAA0B,EAAE,IAAAC,UAAI,EAAC,OAAO,CAAC,EAAEC,iCAAa,CAAC;AACrEL,MAAM,CAACM,GAAG,CAAC,0BAA0B,EAAE,IAAAF,UAAI,EAAC,OAAO,CAAC,EAAEG,+BAAW,CAAC;AAClEP,MAAM,CAACQ,MAAM,CACX,mCAAmC,EACnC,IAAAJ,UAAI,EAAC,OAAO,CAAC,EACbK,sCAAkB,CACnB;AAAC,IAAAC,QAAA,GACaV,MAAM;AAAAW,OAAA,CAAAZ,OAAA,GAAAW,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"10ebd2dba705830e09101d4ce2b191b7766e8972","contentHash":"9868bdabc90ee87c5bb1aa638aa07cd505d191394cf2708df1950f559305b1c6"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\wishlistController.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\wishlistController.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":82}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":17},"end":{"line":8,"column":37}},"4":{"start":{"line":9,"column":30},"end":{"line":9,"column":75}},"5":{"start":{"line":10,"column":27},"end":{"line":10,"column":81}},"6":{"start":{"line":11,"column":39},"end":{"line":11,"column":93}},"7":{"start":{"line":12,"column":20},"end":{"line":41,"column":2}},"8":{"start":{"line":13,"column":19},"end":{"line":17,"column":4}},"9":{"start":{"line":20,"column":6},"end":{"line":20,"column":14}},"10":{"start":{"line":21,"column":2},"end":{"line":26,"column":3}},"11":{"start":{"line":22,"column":4},"end":{"line":25,"column":7}},"12":{"start":{"line":27,"column":19},"end":{"line":36,"column":4}},"13":{"start":{"line":37,"column":2},"end":{"line":40,"column":5}},"14":{"start":{"line":42,"column":0},"end":{"line":42,"column":34}},"15":{"start":{"line":43,"column":22},"end":{"line":82,"column":2}},"16":{"start":{"line":44,"column":18},"end":{"line":44,"column":36}},"17":{"start":{"line":45,"column":22},"end":{"line":45,"column":74}},"18":{"start":{"line":46,"column":2},"end":{"line":81,"column":3}},"19":{"start":{"line":47,"column":27},"end":{"line":51,"column":6}},"20":{"start":{"line":54,"column":4},"end":{"line":80,"column":5}},"21":{"start":{"line":55,"column":6},"end":{"line":58,"column":9}},"22":{"start":{"line":59,"column":6},"end":{"line":62,"column":9}},"23":{"start":{"line":65,"column":6},"end":{"line":79,"column":7}},"24":{"start":{"line":66,"column":8},"end":{"line":69,"column":11}},"25":{"start":{"line":71,"column":32},"end":{"line":71,"column":70}},"26":{"start":{"line":72,"column":8},"end":{"line":74,"column":11}},"27":{"start":{"line":75,"column":8},"end":{"line":78,"column":11}},"28":{"start":{"line":83,"column":0},"end":{"line":83,"column":38}},"29":{"start":{"line":84,"column":27},"end":{"line":111,"column":2}},"30":{"start":{"line":85,"column":18},"end":{"line":85,"column":36}},"31":{"start":{"line":86,"column":25},"end":{"line":90,"column":4}},"32":{"start":{"line":91,"column":22},"end":{"line":91,"column":51}},"33":{"start":{"line":92,"column":2},"end":{"line":110,"column":3}},"34":{"start":{"line":93,"column":4},"end":{"line":97,"column":7}},"35":{"start":{"line":94,"column":6},"end":{"line":96,"column":7}},"36":{"start":{"line":95,"column":8},"end":{"line":95,"column":37}},"37":{"start":{"line":98,"column":4},"end":{"line":100,"column":7}},"38":{"start":{"line":101,"column":4},"end":{"line":104,"column":7}},"39":{"start":{"line":106,"column":4},"end":{"line":109,"column":7}},"40":{"start":{"line":112,"column":0},"end":{"line":112,"column":48}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":37},"end":{"line":11,"column":95}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":62},"end":{"line":12,"column":63}},"loc":{"start":{"line":12,"column":82},"end":{"line":41,"column":1}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":43,"column":64},"end":{"line":43,"column":65}},"loc":{"start":{"line":43,"column":84},"end":{"line":82,"column":1}},"line":43},"3":{"name":"(anonymous_3)","decl":{"start":{"line":84,"column":69},"end":{"line":84,"column":70}},"loc":{"start":{"line":84,"column":89},"end":{"line":111,"column":1}},"line":84},"4":{"name":"(anonymous_4)","decl":{"start":{"line":93,"column":23},"end":{"line":93,"column":24}},"loc":{"start":{"line":93,"column":43},"end":{"line":97,"column":5}},"line":93}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":92}},"type":"cond-expr","locations":[{"start":{"line":11,"column":70},"end":{"line":11,"column":73}},{"start":{"line":11,"column":76},"end":{"line":11,"column":92}}],"line":11},"1":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":67}},"type":"binary-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":49}},{"start":{"line":11,"column":53},"end":{"line":11,"column":67}}],"line":11},"2":{"loc":{"start":{"line":21,"column":2},"end":{"line":26,"column":3}},"type":"if","locations":[{"start":{"line":21,"column":2},"end":{"line":26,"column":3}},{"start":{"line":21,"column":2},"end":{"line":26,"column":3}}],"line":21},"3":{"loc":{"start":{"line":46,"column":2},"end":{"line":81,"column":3}},"type":"if","locations":[{"start":{"line":46,"column":2},"end":{"line":81,"column":3}},{"start":{"line":46,"column":2},"end":{"line":81,"column":3}}],"line":46},"4":{"loc":{"start":{"line":54,"column":4},"end":{"line":80,"column":5}},"type":"if","locations":[{"start":{"line":54,"column":4},"end":{"line":80,"column":5}},{"start":{"line":54,"column":4},"end":{"line":80,"column":5}}],"line":54},"5":{"loc":{"start":{"line":65,"column":6},"end":{"line":79,"column":7}},"type":"if","locations":[{"start":{"line":65,"column":6},"end":{"line":79,"column":7}},{"start":{"line":65,"column":6},"end":{"line":79,"column":7}}],"line":65},"6":{"loc":{"start":{"line":92,"column":2},"end":{"line":110,"column":3}},"type":"if","locations":[{"start":{"line":92,"column":2},"end":{"line":110,"column":3}},{"start":{"line":92,"column":2},"end":{"line":110,"column":3}}],"line":92},"7":{"loc":{"start":{"line":94,"column":6},"end":{"line":96,"column":7}},"type":"if","locations":[{"start":{"line":94,"column":6},"end":{"line":96,"column":7}},{"start":{"line":94,"column":6},"end":{"line":96,"column":7}}],"line":94}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0},"b":{"0":[0,1],"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_sequelize","_handlingTryCatchBlocks","_handlingEmptyFields","obj","__esModule","default","getWishlist","asyncWrapper","req","res","wishlist","db","findOne","where","userId","user","id","productId","status","json","t","message","products","Product","findAll","Op","in","include","model","Category","data","exports","addToWishlist","product","body","emptyFields","checkEmptyFields","activewishlist","create","includes","updatedWishlist","update","deleteFromWishlist","params","newwishlist","filter","element","index","splice"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\","sources":["wishlistController.js"],"sourcesContent":["import db from '../../database/models';\r\nimport { Op } from 'sequelize';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport { checkEmptyFields } from '../../utils/validations/handlingEmptyFields';\r\nexport const getWishlist = asyncWrapper(async (req, res) => {\r\n  const wishlist = await db.wishlist.findOne({\r\n    where: { userId: req.user.id },\r\n  });\r\n  const { productId } = wishlist;\r\n  if (productId === null) {\r\n    return res\r\n      .status(404)\r\n      .json({ status: req.t('success'), message: req.t('no_wishlist') });\r\n  }\r\n  const products = await db.Product.findAll({\r\n    where: { id: { [Op.in]: productId } },\r\n    include: [{ model: db.Category }],\r\n  });\r\n  res.status(200).json({ status: req.t('success'), data:products });\r\n});\r\n\r\nexport const addToWishlist = asyncWrapper(async (req, res) => {\r\n  const product = req.body.productId;\r\n  const emptyFields = checkEmptyFields(req.body);\r\n  if (!emptyFields) {\r\n    const activewishlist = await db.wishlist.findOne({\r\n      where: {\r\n        userId: req.user.id,\r\n      },\r\n    });\r\n\r\n    //in case they dont have a wish list\r\n    if (!activewishlist) {\r\n      await db.wishlist.create({\r\n        userId: req.user.id,\r\n        productId: [product],\r\n      });\r\n      res\r\n        .status(201)\r\n        .json({ status: req.t('success'), message: req.t('wishlist_created') });\r\n    } else {\r\n      //updating the wishlist when its there\r\n      if (activewishlist.productId.includes(product)) {\r\n        return res.status(400).json({\r\n          status: req.t('fail'),\r\n          message: req.t('exists_in_wishlist'),\r\n        });\r\n      } else {\r\n        const updatedWishlist = [...activewishlist.productId, product];\r\n        await activewishlist.update({\r\n          productId: updatedWishlist,\r\n        });\r\n        res.status(201).json({\r\n          status: req.t('success'),\r\n          message: req.t('added_to_wishlist'),\r\n        });\r\n      }\r\n    }\r\n  }\r\n});\r\nexport const deleteFromWishlist = asyncWrapper(async (req, res) => {\r\n  const product = req.params.product;\r\n  const activewishlist = await db.wishlist.findOne({\r\n    where: {\r\n      userId: req.user.id,\r\n    },\r\n  });\r\n  const newwishlist = [...activewishlist.productId];\r\n  if (newwishlist.includes(product)) {\r\n    newwishlist.filter((element, index) => {\r\n      if (element === product) {\r\n        newwishlist.splice(index, 1);\r\n      }\r\n    });\r\n\r\n    await activewishlist.update({\r\n      productId: newwishlist,\r\n    });\r\n    res\r\n      .status(200)\r\n      .json({\r\n        status: req.t('success'),\r\n        message: req.t('removed_from_wishlist'),\r\n      });\r\n  } else {\r\n    return res.status(400).json({\r\n      status: req.t('fail'),\r\n      message: req.t('not_exists_in_wishlist'),\r\n    });\r\n  }\r\n});\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c26cacbc5e728b7bfda189c355bcf6acd830bff1","contentHash":"94859cac5db4c3437019dec3dbc60c87db8927032d2e187eb0570ab05ce40c93"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\products\\buyer.routes.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\products\\buyer.routes.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"3":{"start":{"line":8,"column":40},"end":{"line":8,"column":110}},"4":{"start":{"line":9,"column":12},"end":{"line":9,"column":44}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":15},"end":{"line":11,"column":40}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":72}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":117}},"9":{"start":{"line":14,"column":15},"end":{"line":14,"column":21}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"names":["_express","_interopRequireDefault","require","_buyerViewSingleProductController","_auth","obj","__esModule","default","routes","express","Router","get","viewSingleProduct","auth","recommendedProducts","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\products\\","sources":["buyer.routes.js"],"sourcesContent":["import express from 'express';\r\nimport {\r\n  viewSingleProduct,\r\n  recommendedProducts,\r\n} from '../../controllers/products/buyerViewSingleProductController';\r\nimport { auth, isUserEnabled } from '../../middleware/auth';\r\nconst routes = express.Router();\r\n\r\nroutes.get('/:id', viewSingleProduct)\r\n\r\nroutes.get('/view/recommendations',auth('buyer'),recommendedProducts);\r\n\r\nexport default routes;\r\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,iCAAA,GAAAD,OAAA;AAIA,IAAAE,KAAA,GAAAF,OAAA;AAA4D,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAC5D,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/BF,MAAM,CAACG,GAAG,CAAC,MAAM,EAAEC,mDAAiB,CAAC;AAErCJ,MAAM,CAACG,GAAG,CAAC,uBAAuB,EAAC,IAAAE,UAAI,EAAC,OAAO,CAAC,EAACC,qDAAmB,CAAC;AAAC,IAAAC,QAAA,GAEvDP,MAAM;AAAAQ,OAAA,CAAAT,OAAA,GAAAQ,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ef1dbd0bf057df25dd19dd27fa9ef21011186dc5","contentHash":"6d7ed0bbbba3935d08bd62eff1a14b1bc921132ba71d6af859128f2fac6a4736"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\buyerViewSingleProductController.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\buyerViewSingleProductController.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":65}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":30},"end":{"line":8,"column":75}},"4":{"start":{"line":9,"column":26},"end":{"line":9,"column":67}},"5":{"start":{"line":10,"column":28},"end":{"line":10,"column":71}},"6":{"start":{"line":11,"column":39},"end":{"line":11,"column":93}},"7":{"start":{"line":12,"column":26},"end":{"line":39,"column":2}},"8":{"start":{"line":15,"column":6},"end":{"line":15,"column":16}},"9":{"start":{"line":16,"column":18},"end":{"line":28,"column":4}},"10":{"start":{"line":29,"column":2},"end":{"line":34,"column":3}},"11":{"start":{"line":30,"column":4},"end":{"line":33,"column":7}},"12":{"start":{"line":35,"column":2},"end":{"line":38,"column":5}},"13":{"start":{"line":40,"column":0},"end":{"line":40,"column":46}},"14":{"start":{"line":41,"column":28},"end":{"line":103,"column":2}},"15":{"start":{"line":44,"column":6},"end":{"line":44,"column":14}},"16":{"start":{"line":45,"column":19},"end":{"line":50,"column":4}},"17":{"start":{"line":51,"column":2},"end":{"line":57,"column":3}},"18":{"start":{"line":52,"column":21},"end":{"line":52,"column":60}},"19":{"start":{"line":53,"column":4},"end":{"line":56,"column":7}},"20":{"start":{"line":60,"column":6},"end":{"line":60,"column":25}},"21":{"start":{"line":61,"column":26},"end":{"line":70,"column":4}},"22":{"start":{"line":62,"column":19},"end":{"line":62,"column":61}},"23":{"start":{"line":63,"column":4},"end":{"line":68,"column":5}},"24":{"start":{"line":64,"column":6},"end":{"line":67,"column":9}},"25":{"start":{"line":69,"column":4},"end":{"line":69,"column":18}},"26":{"start":{"line":71,"column":2},"end":{"line":102,"column":5}},"27":{"start":{"line":72,"column":21},"end":{"line":72,"column":56}},"28":{"start":{"line":72,"column":40},"end":{"line":72,"column":55}},"29":{"start":{"line":73,"column":4},"end":{"line":101,"column":5}},"30":{"start":{"line":74,"column":26},"end":{"line":74,"column":79}},"31":{"start":{"line":75,"column":21},"end":{"line":82,"column":8}},"32":{"start":{"line":76,"column":26},"end":{"line":80,"column":10}},"33":{"start":{"line":81,"column":8},"end":{"line":81,"column":25}},"34":{"start":{"line":83,"column":6},"end":{"line":89,"column":9}},"35":{"start":{"line":84,"column":28},"end":{"line":84,"column":41}},"36":{"start":{"line":85,"column":8},"end":{"line":88,"column":11}},"37":{"start":{"line":91,"column":25},"end":{"line":91,"column":73}},"38":{"start":{"line":92,"column":24},"end":{"line":96,"column":8}},"39":{"start":{"line":97,"column":6},"end":{"line":100,"column":9}},"40":{"start":{"line":104,"column":0},"end":{"line":104,"column":50}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":37},"end":{"line":11,"column":95}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":68},"end":{"line":12,"column":69}},"loc":{"start":{"line":12,"column":88},"end":{"line":39,"column":1}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":41,"column":70},"end":{"line":41,"column":71}},"loc":{"start":{"line":41,"column":90},"end":{"line":103,"column":1}},"line":41},"3":{"name":"(anonymous_3)","decl":{"start":{"line":61,"column":46},"end":{"line":61,"column":47}},"loc":{"start":{"line":61,"column":58},"end":{"line":70,"column":3}},"line":61},"4":{"name":"(anonymous_4)","decl":{"start":{"line":71,"column":42},"end":{"line":71,"column":43}},"loc":{"start":{"line":71,"column":58},"end":{"line":102,"column":3}},"line":71},"5":{"name":"(anonymous_5)","decl":{"start":{"line":72,"column":32},"end":{"line":72,"column":33}},"loc":{"start":{"line":72,"column":40},"end":{"line":72,"column":55}},"line":72},"6":{"name":"(anonymous_6)","decl":{"start":{"line":75,"column":43},"end":{"line":75,"column":44}},"loc":{"start":{"line":75,"column":55},"end":{"line":82,"column":7}},"line":75},"7":{"name":"(anonymous_7)","decl":{"start":{"line":83,"column":37},"end":{"line":83,"column":38}},"loc":{"start":{"line":83,"column":47},"end":{"line":89,"column":7}},"line":83}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":92}},"type":"cond-expr","locations":[{"start":{"line":11,"column":70},"end":{"line":11,"column":73}},{"start":{"line":11,"column":76},"end":{"line":11,"column":92}}],"line":11},"1":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":67}},"type":"binary-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":49}},{"start":{"line":11,"column":53},"end":{"line":11,"column":67}}],"line":11},"2":{"loc":{"start":{"line":29,"column":2},"end":{"line":34,"column":3}},"type":"if","locations":[{"start":{"line":29,"column":2},"end":{"line":34,"column":3}},{"start":{"line":29,"column":2},"end":{"line":34,"column":3}}],"line":29},"3":{"loc":{"start":{"line":51,"column":2},"end":{"line":57,"column":3}},"type":"if","locations":[{"start":{"line":51,"column":2},"end":{"line":57,"column":3}},{"start":{"line":51,"column":2},"end":{"line":57,"column":3}}],"line":51},"4":{"loc":{"start":{"line":63,"column":4},"end":{"line":68,"column":5}},"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":68,"column":5}},{"start":{"line":63,"column":4},"end":{"line":68,"column":5}}],"line":63},"5":{"loc":{"start":{"line":73,"column":4},"end":{"line":101,"column":5}},"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":101,"column":5}},{"start":{"line":73,"column":4},"end":{"line":101,"column":5}}],"line":73}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":3,"9":3,"10":0,"11":0,"12":0,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1},"f":{"0":1,"1":3,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"b":{"0":[0,1],"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_handlingTryCatchBlocks","_handlingMostViewed","_handlingDuplications","obj","__esModule","default","viewSingleProduct","asyncWrapper","req","res","id","params","product","db","Product","findByPk","include","model","ProductImage","attributes","exclude","ProductAttribute","status","json","t","message","data","exports","recommendedProducts","user","wishList","wishlist","findOne","where","userId","products","findAll","productId","dataValues","recommendations","map","result","Promise","all","then","category","item","categoryId","length","recommended","removeDuplicates","recommend","finalResult","flat","mostViewed","getMostviewed"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\products\\","sources":["buyerViewSingleProductController.js"],"sourcesContent":["import db from '../../database/models';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport { getMostviewed } from '../../utils/handlingMostViewed';\r\nimport { removeDuplicates } from '../../utils/handlingDuplications';\r\n\r\nexport const viewSingleProduct = asyncWrapper(async (req, res) => {\r\n  const { id } = req.params;\r\n  const product = await db.Product.findByPk(id, {\r\n    include: [\r\n      {\r\n        model: db.ProductImage,\r\n        attributes: { exclude: ['createdAt', 'updatedAt', 'productId'] },\r\n      },\r\n      {\r\n        model: db.ProductAttribute,\r\n        attributes: { exclude: ['createdAt', 'updatedAt', 'productId'] },\r\n      },\r\n      \r\n    ],\r\n  });\r\n  if (!product) {\r\n    return res.status(404).json({\r\n      status: req.t('fail'),\r\n      message: req.t('product_not_found'),\r\n    });\r\n  }\r\n  return res.status(200).json({\r\n    status: req.t('success'),\r\n    data: product,\r\n  });\r\n});\r\n\r\nexport const recommendedProducts = asyncWrapper(async (req, res) => {\r\n  const { id } = req.user;\r\n  const wishList = await db.wishlist.findOne({\r\n    where: { userId: id },\r\n    attributes: ['productId'],\r\n  });\r\n  if (!wishList) {\r\n    const products = await db.Product.findAll();\r\n    return res.status(200).json({\r\n      status: req.t('success'),\r\n      data: products,\r\n    });\r\n  }\r\n  const { productId } = wishList.dataValues;\r\n  const recommendations = await productId.map(async (id) => {\r\n    const result = await db.Product.findByPk(id);\r\n    if (!result) {\r\n      return res.status(404).json({\r\n        status: req.t('fail'),\r\n        message: req.t('product_not_found'),\r\n      });\r\n    }\r\n    return result;\r\n  });\r\n  await Promise.all(recommendations).then(async (result) => {\r\n    const category = result.map((item) => item.categoryId);\r\n    if (category.length < 5) {\r\n      const recommended = removeDuplicates(category);\r\n      const result = await recommended.map(async (id) => {\r\n        const recommend = await db.Product.findAll({\r\n          where: { categoryId: id },\r\n        });\r\n        return recommend;\r\n      });\r\n      await Promise.all(result).then((result) => { \r\n        const finalResult = result.flat();\r\n        return res.status(200).json({\r\n          status: req.t('success'),\r\n          data: finalResult,\r\n        });\r\n      })\r\n    } else {\r\n      const mostViewed = getMostviewed(category);\r\n      const recommend = await db.Product.findAll({\r\n        where: { categoryId: mostViewed },\r\n      });\r\n      return res.status(200).json({\r\n        status: req.t('success'),\r\n        data: recommend,\r\n      });\r\n    }\r\n  });\r\n});\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"14ddf603eff457b662a28ac60b60a9a728fdcbfa","contentHash":"35bae5f22e03881d877dcc3caf764e8e156df0c3f5672ebb68826965570cc163"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\handlingMostViewed.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\handlingMostViewed.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"2":{"start":{"line":7,"column":22},"end":{"line":22,"column":1}},"3":{"start":{"line":8,"column":16},"end":{"line":8,"column":18}},"4":{"start":{"line":9,"column":2},"end":{"line":12,"column":5}},"5":{"start":{"line":10,"column":20},"end":{"line":10,"column":22}},"6":{"start":{"line":11,"column":4},"end":{"line":11,"column":47}},"7":{"start":{"line":14,"column":21},"end":{"line":14,"column":22}},"8":{"start":{"line":15,"column":2},"end":{"line":20,"column":3}},"9":{"start":{"line":16,"column":4},"end":{"line":19,"column":5}},"10":{"start":{"line":17,"column":6},"end":{"line":17,"column":38}},"11":{"start":{"line":18,"column":6},"end":{"line":18,"column":36}},"12":{"start":{"line":21,"column":2},"end":{"line":21,"column":31}},"13":{"start":{"line":23,"column":0},"end":{"line":23,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":22},"end":{"line":7,"column":23}},"loc":{"start":{"line":7,"column":29},"end":{"line":22,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":14},"end":{"line":9,"column":15}},"loc":{"start":{"line":9,"column":25},"end":{"line":12,"column":3}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":22},"end":{"line":11,"column":41}},"type":"binary-expr","locations":[{"start":{"line":11,"column":22},"end":{"line":11,"column":36}},{"start":{"line":11,"column":40},"end":{"line":11,"column":41}}],"line":11},"1":{"loc":{"start":{"line":16,"column":4},"end":{"line":19,"column":5}},"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":19,"column":5}},{"start":{"line":16,"column":4},"end":{"line":19,"column":5}}],"line":16}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"names":["getMostviewed","arr","count","forEach","el","i","element","mostRepetitiveElement","highestCount","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\","sources":["handlingMostViewed.js"],"sourcesContent":["export const getMostviewed = (arr) => {\r\n    const count = {};\r\n    \r\n    arr.forEach((el, i) => {\r\n      const element = el;\r\n      count[element] = (count[element] || 0) + 1;\r\n    });\r\n  let mostRepetitiveElement;\r\n  let highestCount = 0;\r\n  for (const element in count) {\r\n    if (count[element] > highestCount) {\r\n      mostRepetitiveElement = element;\r\n      highestCount = count[element];\r\n    }\r\n  }\r\n  return mostRepetitiveElement;\r\n};\r\n"],"mappings":";;;;;;AAAO,MAAMA,aAAa,GAAIC,GAAG,IAAK;EAClC,MAAMC,KAAK,GAAG,CAAC,CAAC;EAEhBD,GAAG,CAACE,OAAO,CAAC,CAACC,EAAE,EAAEC,CAAC,KAAK;IACrB,MAAMC,OAAO,GAAGF,EAAE;IAClBF,KAAK,CAACI,OAAO,CAAC,GAAG,CAACJ,KAAK,CAACI,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;EAC5C,CAAC,CAAC;EACJ,IAAIC,qBAAqB;EACzB,IAAIC,YAAY,GAAG,CAAC;EACpB,KAAK,MAAMF,OAAO,IAAIJ,KAAK,EAAE;IAC3B,IAAIA,KAAK,CAACI,OAAO,CAAC,GAAGE,YAAY,EAAE;MACjCD,qBAAqB,GAAGD,OAAO;MAC/BE,YAAY,GAAGN,KAAK,CAACI,OAAO,CAAC;IAC/B;EACF;EACA,OAAOC,qBAAqB;AAC9B,CAAC;AAACE,OAAA,CAAAT,aAAA,GAAAA,aAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"317f3daaf1a5261a7269222a8c3c77183c27906c","contentHash":"7916c01e37fd67ccb35ab017ca968c71f125f17bd60334269f48f09e1d8e5c38"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\handlingDuplications.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\handlingDuplications.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":34}},"2":{"start":{"line":7,"column":25},"end":{"line":9,"column":1}},"3":{"start":{"line":8,"column":2},"end":{"line":8,"column":68}},"4":{"start":{"line":8,"column":38},"end":{"line":8,"column":66}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":25},"end":{"line":7,"column":26}},"loc":{"start":{"line":7,"column":32},"end":{"line":9,"column":1}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":20},"end":{"line":8,"column":21}},"loc":{"start":{"line":8,"column":38},"end":{"line":8,"column":66}},"line":8}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":1},"f":{"0":0,"1":0},"b":{},"inputSourceMap":{"version":3,"names":["removeDuplicates","arr","filter","value","index","indexOf","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\","sources":["handlingDuplications.js"],"sourcesContent":["export const removeDuplicates =(arr)=>{\r\n  return arr.filter((value, index) => arr.indexOf(value) === index);\r\n}\r\n"],"mappings":";;;;;;AAAO,MAAMA,gBAAgB,GAAGC,GAAG,IAAG;EACpC,OAAOA,GAAG,CAACC,MAAM,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAKH,GAAG,CAACI,OAAO,CAACF,KAAK,CAAC,KAAKC,KAAK,CAAC;AACnE,CAAC;AAAAE,OAAA,CAAAN,gBAAA,GAAAA,gBAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7dc82d0116ff270d0c6be6d8281882ce0add7a3f","contentHash":"a9ac404f845e7262d1b56cb98559032c96cbc9a15448e92fe4af8601f4461619"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\coupon\\couponRoutes.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\coupon\\couponRoutes.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"3":{"start":{"line":8,"column":23},"end":{"line":8,"column":98}},"4":{"start":{"line":9,"column":12},"end":{"line":9,"column":44}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":15},"end":{"line":11,"column":40}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":101}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":99}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":115}},"10":{"start":{"line":15,"column":15},"end":{"line":15,"column":21}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"f":{"0":2},"b":{"0":[1,1],"1":[2,2]},"inputSourceMap":{"version":3,"names":["_express","_interopRequireDefault","require","_couponCotroller","_auth","obj","__esModule","default","routes","express","Router","post","auth","isUserEnabled","couponCotroller","create","get","index","applyCoupon","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\coupon\\","sources":["couponRoutes.js"],"sourcesContent":["import express from 'express';\r\nimport couponCotroller from '../../controllers/coupon/couponCotroller'\r\nimport { auth } from '../../middleware/auth';\r\nimport { isUserEnabled } from '../../middleware/auth';\r\n\r\nconst routes = express.Router();\r\n\r\nroutes.post('/add' , auth('vendor') , isUserEnabled ,couponCotroller.create)\r\nroutes.get('/all' , auth('vendor') , isUserEnabled ,couponCotroller.index)\r\nroutes.post('/apply/coupon' , auth('vendor') , isUserEnabled ,couponCotroller.applyCoupon)\r\n\r\nexport default routes"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,gBAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AAA6C,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAG7C,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAE/BF,MAAM,CAACG,IAAI,CAAC,MAAM,EAAG,IAAAC,UAAI,EAAC,QAAQ,CAAC,EAAGC,mBAAa,EAAEC,wBAAe,CAACC,MAAM,CAAC;AAC5EP,MAAM,CAACQ,GAAG,CAAC,MAAM,EAAG,IAAAJ,UAAI,EAAC,QAAQ,CAAC,EAAGC,mBAAa,EAAEC,wBAAe,CAACG,KAAK,CAAC;AAC1ET,MAAM,CAACG,IAAI,CAAC,eAAe,EAAG,IAAAC,UAAI,EAAC,QAAQ,CAAC,EAAGC,mBAAa,EAAEC,wBAAe,CAACI,WAAW,CAAC;AAAA,IAAAC,QAAA,GAE3EX,MAAM;AAAAY,OAAA,CAAAb,OAAA,GAAAY,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"153716706ddc4f5af25470820daa2fc6fa13c74b","contentHash":"6c3c6de1cb1a05a02793401ed4dae21da76d0edc35dcd30ad109c60c99f26a99"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\coupon\\couponCotroller.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\coupon\\couponCotroller.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":30},"end":{"line":8,"column":75}},"4":{"start":{"line":9,"column":27},"end":{"line":9,"column":81}},"5":{"start":{"line":10,"column":28},"end":{"line":10,"column":95}},"6":{"start":{"line":11,"column":39},"end":{"line":11,"column":93}},"7":{"start":{"line":12,"column":54},"end":{"line":12,"column":73}},"8":{"start":{"line":12,"column":75},"end":{"line":12,"column":326}},"9":{"start":{"line":12,"column":125},"end":{"line":12,"column":161}},"10":{"start":{"line":12,"column":163},"end":{"line":12,"column":324}},"11":{"start":{"line":12,"column":224},"end":{"line":12,"column":287}},"12":{"start":{"line":12,"column":327},"end":{"line":12,"column":339}},"13":{"start":{"line":13,"column":33},"end":{"line":13,"column":489}},"14":{"start":{"line":13,"column":46},"end":{"line":13,"column":47}},"15":{"start":{"line":13,"column":91},"end":{"line":13,"column":131}},"16":{"start":{"line":13,"column":133},"end":{"line":13,"column":487}},"17":{"start":{"line":13,"column":194},"end":{"line":13,"column":236}},"18":{"start":{"line":13,"column":402},"end":{"line":13,"column":483}},"19":{"start":{"line":13,"column":490},"end":{"line":13,"column":504}},"20":{"start":{"line":14,"column":44},"end":{"line":14,"column":70}},"21":{"start":{"line":14,"column":71},"end":{"line":14,"column":222}},"22":{"start":{"line":14,"column":89},"end":{"line":14,"column":193}},"23":{"start":{"line":14,"column":203},"end":{"line":14,"column":220}},"24":{"start":{"line":14,"column":223},"end":{"line":14,"column":234}},"25":{"start":{"line":15,"column":41},"end":{"line":15,"column":68}},"26":{"start":{"line":15,"column":70},"end":{"line":15,"column":121}},"27":{"start":{"line":16,"column":37},"end":{"line":16,"column":99}},"28":{"start":{"line":16,"column":86},"end":{"line":16,"column":99}},"29":{"start":{"line":16,"column":111},"end":{"line":16,"column":136}},"30":{"start":{"line":16,"column":138},"end":{"line":16,"column":322}},"31":{"start":{"line":16,"column":174},"end":{"line":16,"column":209}},"32":{"start":{"line":16,"column":211},"end":{"line":16,"column":251}},"33":{"start":{"line":16,"column":240},"end":{"line":16,"column":251}},"34":{"start":{"line":16,"column":252},"end":{"line":16,"column":320}},"35":{"start":{"line":16,"column":323},"end":{"line":16,"column":375}},"36":{"start":{"line":17,"column":15},"end":{"line":68,"column":2}},"37":{"start":{"line":18,"column":2},"end":{"line":18,"column":55}},"38":{"start":{"line":19,"column":30},"end":{"line":19,"column":56}},"39":{"start":{"line":21,"column":19},"end":{"line":21,"column":30}},"40":{"start":{"line":22,"column":2},"end":{"line":25,"column":6}},"41":{"start":{"line":26,"column":2},"end":{"line":48,"column":3}},"42":{"start":{"line":28,"column":4},"end":{"line":36,"column":5}},"43":{"start":{"line":29,"column":30},"end":{"line":29,"column":86}},"44":{"start":{"line":30,"column":6},"end":{"line":35,"column":9}},"45":{"start":{"line":30,"column":30},"end":{"line":35,"column":9}},"46":{"start":{"line":39,"column":22},"end":{"line":39,"column":50}},"47":{"start":{"line":40,"column":22},"end":{"line":40,"column":32}},"48":{"start":{"line":41,"column":20},"end":{"line":41,"column":76}},"49":{"start":{"line":42,"column":4},"end":{"line":47,"column":5}},"50":{"start":{"line":43,"column":6},"end":{"line":46,"column":9}},"51":{"start":{"line":49,"column":2},"end":{"line":54,"column":3}},"52":{"start":{"line":50,"column":4},"end":{"line":53,"column":7}},"53":{"start":{"line":55,"column":18},"end":{"line":62,"column":4}},"54":{"start":{"line":63,"column":2},"end":{"line":67,"column":5}},"55":{"start":{"line":69,"column":14},"end":{"line":92,"column":2}},"56":{"start":{"line":70,"column":19},"end":{"line":70,"column":30}},"57":{"start":{"line":71,"column":15},"end":{"line":87,"column":4}},"58":{"start":{"line":88,"column":2},"end":{"line":91,"column":5}},"59":{"start":{"line":93,"column":20},"end":{"line":166,"column":2}},"60":{"start":{"line":94,"column":16},"end":{"line":94,"column":27}},"61":{"start":{"line":95,"column":21},"end":{"line":95,"column":41}},"62":{"start":{"line":96,"column":2},"end":{"line":99,"column":5}},"63":{"start":{"line":96,"column":19},"end":{"line":99,"column":5}},"64":{"start":{"line":100,"column":17},"end":{"line":110,"column":4}},"65":{"start":{"line":111,"column":2},"end":{"line":116,"column":3}},"66":{"start":{"line":112,"column":4},"end":{"line":115,"column":7}},"67":{"start":{"line":119,"column":19},"end":{"line":119,"column":45}},"68":{"start":{"line":120,"column":20},"end":{"line":120,"column":44}},"69":{"start":{"line":121,"column":2},"end":{"line":126,"column":3}},"70":{"start":{"line":122,"column":4},"end":{"line":125,"column":7}},"71":{"start":{"line":127,"column":2},"end":{"line":132,"column":3}},"72":{"start":{"line":128,"column":4},"end":{"line":131,"column":7}},"73":{"start":{"line":133,"column":15},"end":{"line":137,"column":4}},"74":{"start":{"line":138,"column":23},"end":{"line":149,"column":4}},"75":{"start":{"line":138,"column":40},"end":{"line":138,"column":53}},"76":{"start":{"line":139,"column":23},"end":{"line":139,"column":94}},"77":{"start":{"line":139,"column":63},"end":{"line":139,"column":93}},"78":{"start":{"line":140,"column":4},"end":{"line":148,"column":5}},"79":{"start":{"line":141,"column":6},"end":{"line":143,"column":9}},"80":{"start":{"line":145,"column":6},"end":{"line":147,"column":9}},"81":{"start":{"line":150,"column":26},"end":{"line":150,"column":104}},"82":{"start":{"line":150,"column":66},"end":{"line":150,"column":100}},"83":{"start":{"line":151,"column":2},"end":{"line":157,"column":5}},"84":{"start":{"line":158,"column":2},"end":{"line":165,"column":5}},"85":{"start":{"line":167,"column":15},"end":{"line":171,"column":1}},"86":{"start":{"line":172,"column":0},"end":{"line":172,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":37},"end":{"line":11,"column":95}},"line":11},"1":{"name":"ownKeys","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":16}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":341}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":207},"end":{"line":12,"column":208}},"loc":{"start":{"line":12,"column":222},"end":{"line":12,"column":289}},"line":12},"3":{"name":"_objectSpread","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":22}},"loc":{"start":{"line":13,"column":31},"end":{"line":13,"column":506}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":13,"column":177},"end":{"line":13,"column":178}},"loc":{"start":{"line":13,"column":192},"end":{"line":13,"column":238}},"line":13},"5":{"name":"(anonymous_5)","decl":{"start":{"line":13,"column":385},"end":{"line":13,"column":386}},"loc":{"start":{"line":13,"column":400},"end":{"line":13,"column":485}},"line":13},"6":{"name":"_defineProperty","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":24}},"loc":{"start":{"line":14,"column":42},"end":{"line":14,"column":236}},"line":14},"7":{"name":"_toPropertyKey","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":23}},"loc":{"start":{"line":15,"column":29},"end":{"line":15,"column":123}},"line":15},"8":{"name":"_toPrimitive","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":21}},"loc":{"start":{"line":16,"column":35},"end":{"line":16,"column":377}},"line":16},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":57},"end":{"line":17,"column":58}},"loc":{"start":{"line":17,"column":77},"end":{"line":68,"column":1}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":69,"column":56},"end":{"line":69,"column":57}},"loc":{"start":{"line":69,"column":76},"end":{"line":92,"column":1}},"line":69},"11":{"name":"(anonymous_11)","decl":{"start":{"line":93,"column":62},"end":{"line":93,"column":63}},"loc":{"start":{"line":93,"column":82},"end":{"line":166,"column":1}},"line":93},"12":{"name":"(anonymous_12)","decl":{"start":{"line":138,"column":32},"end":{"line":138,"column":33}},"loc":{"start":{"line":138,"column":40},"end":{"line":138,"column":53}},"line":138},"13":{"name":"(anonymous_13)","decl":{"start":{"line":138,"column":59},"end":{"line":138,"column":60}},"loc":{"start":{"line":138,"column":91},"end":{"line":149,"column":3}},"line":138},"14":{"name":"(anonymous_14)","decl":{"start":{"line":139,"column":52},"end":{"line":139,"column":53}},"loc":{"start":{"line":139,"column":63},"end":{"line":139,"column":93}},"line":139},"15":{"name":"(anonymous_15)","decl":{"start":{"line":150,"column":48},"end":{"line":150,"column":49}},"loc":{"start":{"line":150,"column":66},"end":{"line":150,"column":100}},"line":150}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":92}},"type":"cond-expr","locations":[{"start":{"line":11,"column":70},"end":{"line":11,"column":73}},{"start":{"line":11,"column":76},"end":{"line":11,"column":92}}],"line":11},"1":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":67}},"type":"binary-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":49}},{"start":{"line":11,"column":53},"end":{"line":11,"column":67}}],"line":11},"2":{"loc":{"start":{"line":12,"column":75},"end":{"line":12,"column":326}},"type":"if","locations":[{"start":{"line":12,"column":75},"end":{"line":12,"column":326}},{"start":{"line":12,"column":75},"end":{"line":12,"column":326}}],"line":12},"3":{"loc":{"start":{"line":12,"column":163},"end":{"line":12,"column":291}},"type":"binary-expr","locations":[{"start":{"line":12,"column":163},"end":{"line":12,"column":177}},{"start":{"line":12,"column":182},"end":{"line":12,"column":290}}],"line":12},"4":{"loc":{"start":{"line":13,"column":91},"end":{"line":13,"column":131}},"type":"cond-expr","locations":[{"start":{"line":13,"column":114},"end":{"line":13,"column":126}},{"start":{"line":13,"column":129},"end":{"line":13,"column":131}}],"line":13},"5":{"loc":{"start":{"line":13,"column":133},"end":{"line":13,"column":486}},"type":"cond-expr","locations":[{"start":{"line":13,"column":141},"end":{"line":13,"column":239}},{"start":{"line":13,"column":242},"end":{"line":13,"column":486}}],"line":13},"6":{"loc":{"start":{"line":13,"column":242},"end":{"line":13,"column":486}},"type":"cond-expr","locations":[{"start":{"line":13,"column":277},"end":{"line":13,"column":350}},{"start":{"line":13,"column":353},"end":{"line":13,"column":486}}],"line":13},"7":{"loc":{"start":{"line":14,"column":71},"end":{"line":14,"column":222}},"type":"if","locations":[{"start":{"line":14,"column":71},"end":{"line":14,"column":222}},{"start":{"line":14,"column":71},"end":{"line":14,"column":222}}],"line":14},"8":{"loc":{"start":{"line":15,"column":77},"end":{"line":15,"column":120}},"type":"cond-expr","locations":[{"start":{"line":15,"column":103},"end":{"line":15,"column":106}},{"start":{"line":15,"column":109},"end":{"line":15,"column":120}}],"line":15},"9":{"loc":{"start":{"line":16,"column":37},"end":{"line":16,"column":99}},"type":"if","locations":[{"start":{"line":16,"column":37},"end":{"line":16,"column":99}},{"start":{"line":16,"column":37},"end":{"line":16,"column":99}}],"line":16},"10":{"loc":{"start":{"line":16,"column":41},"end":{"line":16,"column":84}},"type":"binary-expr","locations":[{"start":{"line":16,"column":41},"end":{"line":16,"column":66}},{"start":{"line":16,"column":70},"end":{"line":16,"column":84}}],"line":16},"11":{"loc":{"start":{"line":16,"column":138},"end":{"line":16,"column":322}},"type":"if","locations":[{"start":{"line":16,"column":138},"end":{"line":16,"column":322}},{"start":{"line":16,"column":138},"end":{"line":16,"column":322}}],"line":16},"12":{"loc":{"start":{"line":16,"column":191},"end":{"line":16,"column":208}},"type":"binary-expr","locations":[{"start":{"line":16,"column":191},"end":{"line":16,"column":195}},{"start":{"line":16,"column":199},"end":{"line":16,"column":208}}],"line":16},"13":{"loc":{"start":{"line":16,"column":211},"end":{"line":16,"column":251}},"type":"if","locations":[{"start":{"line":16,"column":211},"end":{"line":16,"column":251}},{"start":{"line":16,"column":211},"end":{"line":16,"column":251}}],"line":16},"14":{"loc":{"start":{"line":16,"column":331},"end":{"line":16,"column":366}},"type":"cond-expr","locations":[{"start":{"line":16,"column":351},"end":{"line":16,"column":357}},{"start":{"line":16,"column":360},"end":{"line":16,"column":366}}],"line":16},"15":{"loc":{"start":{"line":26,"column":2},"end":{"line":48,"column":3}},"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":48,"column":3}},{"start":{"line":26,"column":2},"end":{"line":48,"column":3}}],"line":26},"16":{"loc":{"start":{"line":30,"column":6},"end":{"line":35,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":6},"end":{"line":35,"column":9}},{"start":{"line":30,"column":6},"end":{"line":35,"column":9}}],"line":30},"17":{"loc":{"start":{"line":42,"column":4},"end":{"line":47,"column":5}},"type":"if","locations":[{"start":{"line":42,"column":4},"end":{"line":47,"column":5}},{"start":{"line":42,"column":4},"end":{"line":47,"column":5}}],"line":42},"18":{"loc":{"start":{"line":42,"column":8},"end":{"line":42,"column":54}},"type":"binary-expr","locations":[{"start":{"line":42,"column":8},"end":{"line":42,"column":27}},{"start":{"line":42,"column":31},"end":{"line":42,"column":54}}],"line":42},"19":{"loc":{"start":{"line":96,"column":2},"end":{"line":99,"column":5}},"type":"if","locations":[{"start":{"line":96,"column":2},"end":{"line":99,"column":5}},{"start":{"line":96,"column":2},"end":{"line":99,"column":5}}],"line":96},"20":{"loc":{"start":{"line":111,"column":2},"end":{"line":116,"column":3}},"type":"if","locations":[{"start":{"line":111,"column":2},"end":{"line":116,"column":3}},{"start":{"line":111,"column":2},"end":{"line":116,"column":3}}],"line":111},"21":{"loc":{"start":{"line":121,"column":2},"end":{"line":126,"column":3}},"type":"if","locations":[{"start":{"line":121,"column":2},"end":{"line":126,"column":3}},{"start":{"line":121,"column":2},"end":{"line":126,"column":3}}],"line":121},"22":{"loc":{"start":{"line":127,"column":2},"end":{"line":132,"column":3}},"type":"if","locations":[{"start":{"line":127,"column":2},"end":{"line":132,"column":3}},{"start":{"line":127,"column":2},"end":{"line":132,"column":3}}],"line":127},"23":{"loc":{"start":{"line":140,"column":4},"end":{"line":148,"column":5}},"type":"if","locations":[{"start":{"line":140,"column":4},"end":{"line":148,"column":5}},{"start":{"line":140,"column":4},"end":{"line":148,"column":5}}],"line":140}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":2,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1,"56":0,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":1,"86":1},"f":{"0":2,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"b":{"0":[1,1],"1":[2,2],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_handlingTryCatchBlocks","_handlingEmptyFields","_generateRandomString","obj","__esModule","default","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","create","asyncWrapper","req","checkEmptyFields","productAttributeIds","body","productAttributes","data","vendorId","user","id","db","Coupon","code","generateCouponCode","element","ProductAttribute","findByPk","status","json","t","message","givenDate","Date","expire_at","currentDate","nextDay","setDate","getDate","CouponProduct","couponId","prodcutAttributeId","coupons","include","model","attributes","exclude","index","findAll","where","applyCoupon","buyer","couponCode","coupon","findOne","expireAt","toUTCString","max_usage","usage","cart","shoppingCarts","discountedCart","map","item","toJSON","elementIndex","arr","productAttId","CouponProducts","product","totalpriceDiscounted","totalpricePerProduct","discount_rate","discountedTotal","reduce","acc","current","update","Math","floor","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\coupon\\","sources":["couponCotroller.js"],"sourcesContent":["import db from '../../database/models';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport { checkEmptyFields } from '../../utils/validations/handlingEmptyFields';\r\nimport generateCouponCode from '../../utils/generateRandomString';\r\n\r\nconst create = asyncWrapper(async (req, res) => {\r\n  checkEmptyFields(req, res);\r\n  const productAttributeIds = req.body.productAttributes;\r\n\r\n  let data;\r\n\r\n  const vendorId = req.user.id;\r\n\r\n  data = await db.Coupon.create({\r\n    ...req.body,\r\n    vendorId,\r\n    code: generateCouponCode(8),\r\n  });\r\n\r\n  if (data) {\r\n    // check if the product attribute id exists\r\n    for (let element of productAttributeIds) {\r\n      let productAttributes = await db.ProductAttribute.findByPk(element);\r\n\r\n      if (!productAttributes)\r\n        return res.status(404).json({\r\n          status: req.t('fail'),\r\n          message: req.t('related_product_attributte_not_found', { element }),\r\n        });\r\n    }\r\n\r\n    // check if the coupon expiration date is valid it should be next to 1 day form the time of creation\r\n    const givenDate = new Date(req.body.expire_at);\r\n    let currentDate = new Date();\r\n    \r\n    const nextDay = new Date(currentDate.setDate(currentDate.getDate() + 1));\r\n\r\n    if (givenDate < nextDay || givenDate < currentDate) {\r\n      return res.status(400).json({\r\n        status: req.t('fail'),\r\n        message: req.t('coupon_expiration_error'),\r\n      });\r\n    }\r\n  }\r\n\r\n  for (let element of productAttributeIds) {\r\n    await db.CouponProduct.create({\r\n      couponId: data.id,\r\n      prodcutAttributeId: element,\r\n    });\r\n  }\r\n\r\n  const coupons = await db.Coupon.findByPk(data.id, {\r\n    include: [\r\n      {\r\n        model: db.CouponProduct,\r\n        attributes: { exclude: ['createdAt', 'updatedAt'] },\r\n      },\r\n    ],\r\n  });\r\n  return res.status(201).json({\r\n    status: req.t('success'),\r\n    message: req.t('coupon_code_created'),\r\n    data: coupons,\r\n  });\r\n});\r\n\r\nconst index = asyncWrapper(async (req, res) => {\r\n  const vendorId = req.user.id;\r\n  const data = await db.Coupon.findAll({\r\n    include: [\r\n      {\r\n        model: db.CouponProduct,\r\n        include: [\r\n          {\r\n            model: db.ProductAttribute,\r\n            attributes: { exclude: ['createdAt', 'updatedAt'] },\r\n          },\r\n        ],\r\n        attributes: { exclude: ['createdAt', 'updatedAt'] },\r\n      },\r\n    ],\r\n    where: {\r\n      vendorId,\r\n    },\r\n  });\r\n\r\n  return res.status(200).json({ status: req.t('success'), data });\r\n});\r\n\r\nconst applyCoupon = asyncWrapper(async (req, res) => {\r\n  const buyer = req.user.id;\r\n  const couponCode = req.body?.couponCode;\r\n\r\n  if (!couponCode)\r\n    return res\r\n      .status(400)\r\n      .json({ status: req.t('fail'), message: req.t('coupon_code_required') });\r\n\r\n  const coupon = await db.Coupon.findOne({\r\n    where: { code: couponCode },\r\n    include: [\r\n      {\r\n        model: db.CouponProduct,\r\n        attributes: { exclude: ['createdAt', 'updatedAt'] },\r\n      },\r\n    ],\r\n  });\r\n\r\n  if (!coupon) {\r\n    return res\r\n      .status(404)\r\n      .json({ status: req.t('fail'), message: req.t('coupon_not_exist') });\r\n  }\r\n\r\n  // check if the coupon expiration date is valid it should be next to 1 day form the time of creation\r\n  const expireAt = new Date(coupon.expire_at);\r\n  let currentDate = new Date().toUTCString();\r\n\r\n  if (expireAt < currentDate) {\r\n    return res.status(400).json({\r\n      status: req.t('fail'),\r\n      message: req.t('coupon_expiration_error'),\r\n    });\r\n  }\r\n\r\n  if (coupon.max_usage <= coupon.usage) {\r\n    return res.status(400).json({\r\n      status: req.t('fail'),\r\n      message: req.t('coupon_maximum_usage_error'),\r\n    });\r\n  }\r\n\r\n  const cart = await db.shoppingCarts.findAll({ where: { buyer } });\r\n\r\n  let discountedCart = cart\r\n    .map((item) => item.toJSON())\r\n    .map((element, elementIndex, arr) => {\r\n      let productAttId = coupon.CouponProducts.filter(\r\n        (product) => product.id === element.product\r\n      );\r\n      if (productAttId) {\r\n        return {\r\n          ...element,\r\n          totalpriceDiscounted:\r\n            element.totalpricePerProduct -\r\n            (element.totalpricePerProduct * coupon.discount_rate) / 100,\r\n        };\r\n      } else {\r\n        return {\r\n          ...element,\r\n          totalpriceDiscounted: element.totalpricePerProduct,\r\n        };\r\n      }\r\n    });\r\n  const discountedTotal = discountedCart.reduce(\r\n    (acc, current) => acc + current.totalpriceDiscounted,\r\n    0\r\n  );\r\n  await db.shoppingCarts.update(\r\n    { totalpricePerProduct: `${Math.floor(discountedTotal)}` },\r\n    { where: { buyer } }\r\n  );\r\n\r\n  return res.status(200).json({\r\n    status: req.t('success'),\r\n    data: { discountedCart, discountedTotal },\r\n    message: req.t('new_discounted_cart'),\r\n  });\r\n});\r\n\r\nexport default { create, index, applyCoupon };\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6760a66e0055d57bd54caf06517d0486693f1430","contentHash":"a9a3f8b1719420b9b628837dfaa6316996b5e7bc6efe2b13ed67d16c2981ab4a"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\generateRandomString.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\generateRandomString.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":27},"end":{"line":14,"column":1}},"3":{"start":{"line":8,"column":21},"end":{"line":8,"column":59}},"4":{"start":{"line":9,"column":19},"end":{"line":9,"column":21}},"5":{"start":{"line":10,"column":2},"end":{"line":12,"column":3}},"6":{"start":{"line":10,"column":15},"end":{"line":10,"column":16}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":83}},"8":{"start":{"line":13,"column":2},"end":{"line":13,"column":20}},"9":{"start":{"line":15,"column":15},"end":{"line":15,"column":33}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":27}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":27},"end":{"line":7,"column":28}},"loc":{"start":{"line":7,"column":37},"end":{"line":14,"column":1}},"line":7}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1,"10":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"names":["generateCouponCode","length","characters","couponCode","i","charAt","Math","floor","random","_default","exports","default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\","sources":["generateRandomString.js"],"sourcesContent":["const generateCouponCode = (length) => {\r\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n    let couponCode = '';\r\n    for (let i = 0; i < length; i++) {\r\n      couponCode += characters.charAt(Math.floor(Math.random() * characters.length));\r\n    }\r\n    return couponCode;\r\n  }\r\n\r\n  export default generateCouponCode"],"mappings":";;;;;;AAAA,MAAMA,kBAAkB,GAAIC,MAAM,IAAK;EACnC,MAAMC,UAAU,GAAG,sCAAsC;EACzD,IAAIC,UAAU,GAAG,EAAE;EACnB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,MAAM,EAAEG,CAAC,EAAE,EAAE;IAC/BD,UAAU,IAAID,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGN,UAAU,CAACD,MAAM,CAAC,CAAC;EAChF;EACA,OAAOE,UAAU;AACnB,CAAC;AAAA,IAAAM,QAAA,GAEcT,kBAAkB;AAAAU,OAAA,CAAAC,OAAA,GAAAF,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"050d7aa61bae17c5f2fda91826f8408565bab9b2","contentHash":"ac2440beb5105eebc597aac0f5492d646984d81e6f362f694750f3ba2765012e"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\index.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":24},"end":{"line":7,"column":77}},"3":{"start":{"line":8,"column":12},"end":{"line":8,"column":53}},"4":{"start":{"line":9,"column":14},"end":{"line":9,"column":57}},"5":{"start":{"line":10,"column":13},"end":{"line":10,"column":55}},"6":{"start":{"line":11,"column":16},"end":{"line":11,"column":61}},"7":{"start":{"line":12,"column":13},"end":{"line":12,"column":55}},"8":{"start":{"line":13,"column":18},"end":{"line":13,"column":65}},"9":{"start":{"line":14,"column":12},"end":{"line":14,"column":53}},"10":{"start":{"line":15,"column":19},"end":{"line":15,"column":67}},"11":{"start":{"line":16,"column":16},"end":{"line":16,"column":61}},"12":{"start":{"line":17,"column":15},"end":{"line":17,"column":59}},"13":{"start":{"line":18,"column":16},"end":{"line":18,"column":61}},"14":{"start":{"line":19,"column":27},"end":{"line":19,"column":83}},"15":{"start":{"line":20,"column":26},"end":{"line":20,"column":81}},"16":{"start":{"line":21,"column":23},"end":{"line":21,"column":75}},"17":{"start":{"line":22,"column":12},"end":{"line":22,"column":53}},"18":{"start":{"line":23,"column":13},"end":{"line":23,"column":55}},"19":{"start":{"line":24,"column":15},"end":{"line":24,"column":33}},"20":{"start":{"line":25,"column":13},"end":{"line":25,"column":55}},"21":{"start":{"line":26,"column":14},"end":{"line":26,"column":57}},"22":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"23":{"start":{"line":28,"column":39},"end":{"line":28,"column":93}},"24":{"start":{"line":29,"column":54},"end":{"line":29,"column":73}},"25":{"start":{"line":29,"column":75},"end":{"line":29,"column":326}},"26":{"start":{"line":29,"column":125},"end":{"line":29,"column":161}},"27":{"start":{"line":29,"column":163},"end":{"line":29,"column":324}},"28":{"start":{"line":29,"column":224},"end":{"line":29,"column":287}},"29":{"start":{"line":29,"column":327},"end":{"line":29,"column":339}},"30":{"start":{"line":30,"column":33},"end":{"line":30,"column":489}},"31":{"start":{"line":30,"column":46},"end":{"line":30,"column":47}},"32":{"start":{"line":30,"column":91},"end":{"line":30,"column":131}},"33":{"start":{"line":30,"column":133},"end":{"line":30,"column":487}},"34":{"start":{"line":30,"column":194},"end":{"line":30,"column":236}},"35":{"start":{"line":30,"column":402},"end":{"line":30,"column":483}},"36":{"start":{"line":30,"column":490},"end":{"line":30,"column":504}},"37":{"start":{"line":31,"column":44},"end":{"line":31,"column":70}},"38":{"start":{"line":31,"column":71},"end":{"line":31,"column":222}},"39":{"start":{"line":31,"column":89},"end":{"line":31,"column":193}},"40":{"start":{"line":31,"column":203},"end":{"line":31,"column":220}},"41":{"start":{"line":31,"column":223},"end":{"line":31,"column":234}},"42":{"start":{"line":32,"column":41},"end":{"line":32,"column":68}},"43":{"start":{"line":32,"column":70},"end":{"line":32,"column":121}},"44":{"start":{"line":33,"column":37},"end":{"line":33,"column":99}},"45":{"start":{"line":33,"column":86},"end":{"line":33,"column":99}},"46":{"start":{"line":33,"column":111},"end":{"line":33,"column":136}},"47":{"start":{"line":33,"column":138},"end":{"line":33,"column":322}},"48":{"start":{"line":33,"column":174},"end":{"line":33,"column":209}},"49":{"start":{"line":33,"column":211},"end":{"line":33,"column":251}},"50":{"start":{"line":33,"column":240},"end":{"line":33,"column":251}},"51":{"start":{"line":33,"column":252},"end":{"line":33,"column":320}},"52":{"start":{"line":33,"column":323},"end":{"line":33,"column":375}},"53":{"start":{"line":37,"column":4},"end":{"line":37,"column":29}},"54":{"start":{"line":38,"column":25},"end":{"line":38,"column":47}},"55":{"start":{"line":39,"column":16},"end":{"line":86,"column":1}},"56":{"start":{"line":87,"column":0},"end":{"line":87,"column":53}},"57":{"start":{"line":88,"column":15},"end":{"line":88,"column":31}},"58":{"start":{"line":89,"column":0},"end":{"line":89,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":31}},"loc":{"start":{"line":28,"column":37},"end":{"line":28,"column":95}},"line":28},"1":{"name":"ownKeys","decl":{"start":{"line":29,"column":9},"end":{"line":29,"column":16}},"loc":{"start":{"line":29,"column":41},"end":{"line":29,"column":341}},"line":29},"2":{"name":"(anonymous_2)","decl":{"start":{"line":29,"column":207},"end":{"line":29,"column":208}},"loc":{"start":{"line":29,"column":222},"end":{"line":29,"column":289}},"line":29},"3":{"name":"_objectSpread","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":22}},"loc":{"start":{"line":30,"column":31},"end":{"line":30,"column":506}},"line":30},"4":{"name":"(anonymous_4)","decl":{"start":{"line":30,"column":177},"end":{"line":30,"column":178}},"loc":{"start":{"line":30,"column":192},"end":{"line":30,"column":238}},"line":30},"5":{"name":"(anonymous_5)","decl":{"start":{"line":30,"column":385},"end":{"line":30,"column":386}},"loc":{"start":{"line":30,"column":400},"end":{"line":30,"column":485}},"line":30},"6":{"name":"_defineProperty","decl":{"start":{"line":31,"column":9},"end":{"line":31,"column":24}},"loc":{"start":{"line":31,"column":42},"end":{"line":31,"column":236}},"line":31},"7":{"name":"_toPropertyKey","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":23}},"loc":{"start":{"line":32,"column":29},"end":{"line":32,"column":123}},"line":32},"8":{"name":"_toPrimitive","decl":{"start":{"line":33,"column":9},"end":{"line":33,"column":21}},"loc":{"start":{"line":33,"column":35},"end":{"line":33,"column":377}},"line":33}},"branchMap":{"0":{"loc":{"start":{"line":28,"column":46},"end":{"line":28,"column":92}},"type":"cond-expr","locations":[{"start":{"line":28,"column":70},"end":{"line":28,"column":73}},{"start":{"line":28,"column":76},"end":{"line":28,"column":92}}],"line":28},"1":{"loc":{"start":{"line":28,"column":46},"end":{"line":28,"column":67}},"type":"binary-expr","locations":[{"start":{"line":28,"column":46},"end":{"line":28,"column":49}},{"start":{"line":28,"column":53},"end":{"line":28,"column":67}}],"line":28},"2":{"loc":{"start":{"line":29,"column":75},"end":{"line":29,"column":326}},"type":"if","locations":[{"start":{"line":29,"column":75},"end":{"line":29,"column":326}},{"start":{"line":29,"column":75},"end":{"line":29,"column":326}}],"line":29},"3":{"loc":{"start":{"line":29,"column":163},"end":{"line":29,"column":291}},"type":"binary-expr","locations":[{"start":{"line":29,"column":163},"end":{"line":29,"column":177}},{"start":{"line":29,"column":182},"end":{"line":29,"column":290}}],"line":29},"4":{"loc":{"start":{"line":30,"column":91},"end":{"line":30,"column":131}},"type":"cond-expr","locations":[{"start":{"line":30,"column":114},"end":{"line":30,"column":126}},{"start":{"line":30,"column":129},"end":{"line":30,"column":131}}],"line":30},"5":{"loc":{"start":{"line":30,"column":133},"end":{"line":30,"column":486}},"type":"cond-expr","locations":[{"start":{"line":30,"column":141},"end":{"line":30,"column":239}},{"start":{"line":30,"column":242},"end":{"line":30,"column":486}}],"line":30},"6":{"loc":{"start":{"line":30,"column":242},"end":{"line":30,"column":486}},"type":"cond-expr","locations":[{"start":{"line":30,"column":277},"end":{"line":30,"column":350}},{"start":{"line":30,"column":353},"end":{"line":30,"column":486}}],"line":30},"7":{"loc":{"start":{"line":31,"column":71},"end":{"line":31,"column":222}},"type":"if","locations":[{"start":{"line":31,"column":71},"end":{"line":31,"column":222}},{"start":{"line":31,"column":71},"end":{"line":31,"column":222}}],"line":31},"8":{"loc":{"start":{"line":32,"column":77},"end":{"line":32,"column":120}},"type":"cond-expr","locations":[{"start":{"line":32,"column":103},"end":{"line":32,"column":106}},{"start":{"line":32,"column":109},"end":{"line":32,"column":120}}],"line":32},"9":{"loc":{"start":{"line":33,"column":37},"end":{"line":33,"column":99}},"type":"if","locations":[{"start":{"line":33,"column":37},"end":{"line":33,"column":99}},{"start":{"line":33,"column":37},"end":{"line":33,"column":99}}],"line":33},"10":{"loc":{"start":{"line":33,"column":41},"end":{"line":33,"column":84}},"type":"binary-expr","locations":[{"start":{"line":33,"column":41},"end":{"line":33,"column":66}},{"start":{"line":33,"column":70},"end":{"line":33,"column":84}}],"line":33},"11":{"loc":{"start":{"line":33,"column":138},"end":{"line":33,"column":322}},"type":"if","locations":[{"start":{"line":33,"column":138},"end":{"line":33,"column":322}},{"start":{"line":33,"column":138},"end":{"line":33,"column":322}}],"line":33},"12":{"loc":{"start":{"line":33,"column":191},"end":{"line":33,"column":208}},"type":"binary-expr","locations":[{"start":{"line":33,"column":191},"end":{"line":33,"column":195}},{"start":{"line":33,"column":199},"end":{"line":33,"column":208}}],"line":33},"13":{"loc":{"start":{"line":33,"column":211},"end":{"line":33,"column":251}},"type":"if","locations":[{"start":{"line":33,"column":211},"end":{"line":33,"column":251}},{"start":{"line":33,"column":211},"end":{"line":33,"column":251}}],"line":33},"14":{"loc":{"start":{"line":33,"column":331},"end":{"line":33,"column":366}},"type":"cond-expr","locations":[{"start":{"line":33,"column":351},"end":{"line":33,"column":357}},{"start":{"line":33,"column":360},"end":{"line":33,"column":366}}],"line":33},"15":{"loc":{"start":{"line":46,"column":27},"end":{"line":46,"column":51}},"type":"binary-expr","locations":[{"start":{"line":46,"column":27},"end":{"line":46,"column":43}},{"start":{"line":46,"column":47},"end":{"line":46,"column":51}}],"line":46}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":20,"24":18,"25":18,"26":18,"27":18,"28":0,"29":18,"30":18,"31":18,"32":18,"33":18,"34":45,"35":0,"36":18,"37":45,"38":45,"39":0,"40":45,"41":45,"42":45,"43":45,"44":45,"45":45,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1},"f":{"0":20,"1":18,"2":0,"3":18,"4":45,"5":0,"6":45,"7":45,"8":45},"b":{"0":[19,1],"1":[20,20],"2":[18,0],"3":[18,18],"4":[18,0],"5":[18,0],"6":[0,0],"7":[0,45],"8":[0,45],"9":[45,0],"10":[45,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[1,1]},"inputSourceMap":{"version":3,"names":["_swaggerUiExpress","_interopRequireDefault","require","_home","_schema","_admin","_register","_login","_verifyCode","_user","_user_status","_category","_product","_wishlist","_buyerViewSingleProd","_recommendedProduct","_paymentCheckout","_Cart","_oauth","_express","_items","_coupon","_viewOrderDetails","obj","__esModule","default","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","serve","setup","swagger","swaggerDocRouter","Router","options","openapi","info","title","version","description","api","process","env","PORT","security","bearerAuth","components","schemas","securitySchemes","type","scheme","bearerFormat","google_auth","flows","authorizationCode","authorizationUrl","tokenUrl","scopes","clientSecret","in","name","tags","paths","home","admin","register","login","oauth","verifyCode","user","user_status","product","category","wishlist","buyerViewSingleProd","recommendedProduct","items","Cart","coupon","paymentCheckout","viewOrderDetails","use","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["index.js"],"sourcesContent":["import swagger from 'swagger-ui-express';\r\nimport home from './home';\r\nimport schemas from './schema';\r\nimport admin from './admin';\r\nimport register from './register';\r\nimport login from './login';\r\nimport verifyCode from './verifyCode';\r\nimport user from './user';\r\nimport user_status from './user_status';\r\nimport category from './category';\r\nimport product from './product';\r\nimport wishlist from './wishlist';\r\nimport buyerViewSingleProd from './buyerViewSingleProd';\r\nimport recommendedProduct from './recommendedProduct';\r\nimport paymentCheckout from './paymentCheckout';\r\nimport Cart from './Cart';\r\nimport oauth from './oauth';\r\nimport { Router } from 'express';\r\nimport items from './items';\r\nimport coupon from './coupon';\r\nimport viewOrderDetails from './viewOrderDetails';\r\nconst { serve, setup } = swagger;\r\n\r\nconst swaggerDocRouter = Router();\r\n\r\nconst options = {\r\n  openapi: '3.0.3',\r\n  info: {\r\n    title: 'ecommerce-app-legends-bn-',\r\n    version: '1.0.0',\r\n    description:\r\n      'The API documentation of all end-points ecommerce-app-legends-bn-',\r\n  },\r\n  api: `http://localhost:${process.env.PORT || 4000}/`,\r\n  security: [\r\n    {\r\n      bearerAuth: [],\r\n    }],\r\n  components: {\r\n    schemas,\r\n    securitySchemes: {\r\n      bearerAuth: {\r\n        type: 'http',\r\n        scheme: 'bearer',\r\n        bearerFormat: 'JWT',\r\n      },\r\n      google_auth: {\r\n        type: 'oauth2',\r\n        flows: {\r\n          authorizationCode: {\r\n            authorizationUrl: 'https://accounts.google.com/o/oauth2/auth',\r\n            tokenUrl: 'https://oauth2.googleapis.com/token',\r\n           \r\n              scopes: {\r\n                'https://www.googleapis.com/auth/userinfo.email': 'View your email address',\r\n              'https://www.googleapis.com/auth/userinfo.profile': 'View your basic profile info',\r\n                              },\r\n         \r\n            clientSecret: {\r\n              type: 'apiKey',\r\n              in: 'header',\r\n              name: 'Authorization',\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n  tags: [\r\n    { name: 'home', description: 'home' },\r\n    {\r\n      name: 'admin',\r\n      description: 'endpoints that offer special priviledge functions to admin',\r\n    },\r\n  ],\r\n  paths: { \r\n    ...home,\r\n    ...admin, \r\n    ...register, \r\n    ...login,\r\n    ...oauth,\r\n    ...verifyCode,\r\n    ...user,\r\n    ...user_status,\r\n    ...product,\r\n    ...category,\r\n    ...wishlist,\r\n    ...buyerViewSingleProd,\r\n    ...recommendedProduct,\r\n    ...items,\r\n    ...Cart,\r\n    ...coupon,\r\n    ...paymentCheckout,\r\n    ...viewOrderDetails\r\n\r\n   },\r\n \r\n};\r\n\r\nswaggerDocRouter.use('/docs', serve, setup(options));\r\n\r\nexport default swaggerDocRouter;\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c192f723505dd1d1beadb1652745fb720a51df37","contentHash":"30c523afaaba3bf606ef706d06a7b3b0048698c447cc968eda87afdfaba03e02"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\home.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\home.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":36,"column":1}},"3":{"start":{"line":37,"column":0},"end":{"line":37,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["get","tags","description","parameters","requestBody","responses","content","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["home.js"],"sourcesContent":["export default {\r\n\r\n  '/': {\r\n    get: {\r\n      tags: ['home'],\r\n      description: 'Home',\r\n      parameters: [],\r\n      requestBody: {},\r\n      responses: {\r\n        200: {\r\n          description: 'route success',\r\n        },\r\n      },\r\n    },\r\n  },\r\n  '/error': {\r\n    get: {\r\n      tags: ['error page'],\r\n      description: '404',\r\n      parameters: [],\r\n      requestBody: {\r\n        content: {},\r\n      },\r\n      responses: {\r\n        401: {\r\n          description: 'Not found',\r\n        },\r\n      },\r\n    },\r\n  },\r\n\r\n};\r\n"],"mappings":";;;;;;eAAe;EAEb,GAAG,EAAE;IACHA,GAAG,EAAE;MACHC,IAAI,EAAE,CAAC,MAAM,CAAC;MACdC,WAAW,EAAE,MAAM;MACnBC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE,CAAC,CAAC;MACfC,SAAS,EAAE;QACT,GAAG,EAAE;UACHH,WAAW,EAAE;QACf;MACF;IACF;EACF,CAAC;EACD,QAAQ,EAAE;IACRF,GAAG,EAAE;MACHC,IAAI,EAAE,CAAC,YAAY,CAAC;MACpBC,WAAW,EAAE,KAAK;MAClBC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE;QACXE,OAAO,EAAE,CAAC;MACZ,CAAC;MACDD,SAAS,EAAE;QACT,GAAG,EAAE;UACHH,WAAW,EAAE;QACf;MACF;IACF;EACF;AAEF,CAAC;AAAAK,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"544135ac73501aac42b24944b6c43430ba57ae05","contentHash":"ce27eea24c46a7dd1d40f127f37ed74ceba63e1258680e81efca5b49ec5c4a3f"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\schema.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\schema.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":204,"column":1}},"3":{"start":{"line":205,"column":0},"end":{"line":205,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["User","type","properties","id","description","names","status","password","role","phone","permissions","Category","name","Product","image","format","keyword","model","categoryId","expiryDate","ProductAttribute","price","size","color","productId","attrImage","quantity","ProductImage","prodImage","items","shoppingCart","Coupon","discount_rate","minimum","maximum","expire_at","max_usage","usage","productAttributes","default","ProductRating","rating","comment","example","exports","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["schema.js"],"sourcesContent":["export default {\r\n  User: {\r\n    type: 'object',\r\n\r\n    properties: {\r\n      id: {\r\n        type: 'uuid',\r\n        description: 'The auto-generated id ',\r\n      },\r\n      names: {\r\n        type: 'string',\r\n        description: 'name name',\r\n      },\r\n      status: {\r\n        type: 'string',\r\n        description: 'user email',\r\n      },\r\n      password: {\r\n        type: 'string',\r\n        description: 'user password //hidden',\r\n      },\r\n      role: { type: 'string', description: 'user role in dbs' },\r\n      phone: {\r\n        type: 'string',\r\n        description: 'user phone number',\r\n      },\r\n      permissions: {\r\n        type: 'Array(string)',\r\n        description: 'describes the permissions ceratain users have',\r\n      },\r\n    },\r\n  },\r\n  Category: {\r\n    type: 'object',\r\n    properties: {\r\n      name: {\r\n        type: 'string',\r\n        description: 'name of the category',\r\n      },\r\n    },\r\n  },\r\n  Product: {\r\n    type: 'object',\r\n    properties: {\r\n      name: {\r\n        type: 'string',\r\n        description: 'name of the product',\r\n      },\r\n      image: {\r\n        type: 'string',\r\n        description: 'Product image',\r\n        format: 'binary',\r\n      },\r\n      description: {\r\n        type: 'string',\r\n        description: ' Product description',\r\n      },\r\n      keyword: {\r\n        type: 'string',\r\n        description: ' keywords for product easy seachability',\r\n      },\r\n      model: {\r\n        type: 'string',\r\n        description: 'Product Model',\r\n      },\r\n      status: {\r\n        type: 'string',\r\n        description: ' status for product ',\r\n      },\r\n      categoryId: {\r\n        type: 'integer',\r\n        description: ' category that product belongs to',\r\n      },\r\n      expiryDate: {\r\n        type: 'string',\r\n        format: 'date-time',\r\n        description: 'Expiration date of the product'\r\n      }\r\n    },\r\n  },\r\n  \r\n\r\n  ProductAttribute: {\r\n    type: 'object',\r\n    properties: {\r\n      price: {\r\n        type: 'integer',\r\n        description: ' product price',\r\n      },\r\n      size: {\r\n        type: 'string',\r\n        description: ' product size',\r\n      },\r\n\r\n      color: {\r\n        type: 'string',\r\n        description: ' product color value',\r\n      },\r\n      productId: {\r\n        type: 'string',\r\n        description: ' product identifier',\r\n      },\r\n      attrImage: {\r\n        type: 'string',\r\n        description: 'products attribute image',\r\n        format: 'binary',\r\n      },\r\n      quantity: {\r\n        type: 'integer',\r\n        description: 'product quantity',\r\n      },\r\n    },\r\n  },\r\n\r\n  ProductImage: {\r\n    type: 'object',\r\n    properties: {\r\n      prodImage: {\r\n        type: 'array',\r\n        items: {\r\n          type: 'string',\r\n          format: 'binary',\r\n        },\r\n        description: 'Product images in binary format',\r\n      },\r\n      productId: {\r\n        type: 'string',\r\n        description: 'product Id',\r\n      },\r\n      status: {\r\n        type: 'string',\r\n        description: 'image status',\r\n      },\r\n    },\r\n  },\r\n  shoppingCart: {\r\n    type: 'object',\r\n    properties: {\r\n      productId: {\r\n        type: 'string',\r\n        description: 'product attribute Id',\r\n      },\r\n    },\r\n  },\r\n\r\n  Coupon: {\r\n    type: 'object',\r\n    properties: {\r\n      discount_rate: {\r\n        type: 'integer',\r\n        description: ' Discount rate ',\r\n        minimum: 1,\r\n        maximum: 100\r\n      },\r\n      expire_at: {\r\n        type: 'string',\r\n        description: 'Will be valueing until ',\r\n        format: 'date-time',\r\n      },\r\n      max_usage: {\r\n        type: 'integer',\r\n        description: 'Maximum number usage possible',\r\n      },\r\n      usage: {\r\n        type: 'integer',\r\n        description: 'Maximum used',\r\n      },\r\n      productAttributes: {\r\n        type: 'Array(integer)',\r\n        description: 'Array of product attributes',\r\n        default: ['1']\r\n      },\r\n      status: {\r\n        type: 'string',\r\n        \"enum\": [\"ACTIVE\", \"INACTIVE\"],\r\n        description: ' status for product ',\r\n      }\r\n    },\r\n  },\r\n  \r\n  ProductRating: {\r\n    type: 'object',\r\n    properties: {\r\n      rating: {\r\n        type: 'integer',\r\n        description: ' rating for product ',\r\n        minimum: 1,\r\n        maximum: 5,\r\n        default: 3\r\n      },\r\n      comment: {\r\n        type: 'string',\r\n        description: ' comment for product ',\r\n      },\r\n      productId: {\r\n        type : 'uuid',\r\n        description: ' product id for product being reted',\r\n        example: 'product',\r\n      }\r\n    }\r\n  }\r\n};"],"mappings":";;;;;;eAAe;EACbA,IAAI,EAAE;IACJC,IAAI,EAAE,QAAQ;IAEdC,UAAU,EAAE;MACVC,EAAE,EAAE;QACFF,IAAI,EAAE,MAAM;QACZG,WAAW,EAAE;MACf,CAAC;MACDC,KAAK,EAAE;QACLJ,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDE,MAAM,EAAE;QACNL,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDG,QAAQ,EAAE;QACRN,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDI,IAAI,EAAE;QAAEP,IAAI,EAAE,QAAQ;QAAEG,WAAW,EAAE;MAAmB,CAAC;MACzDK,KAAK,EAAE;QACLR,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDM,WAAW,EAAE;QACXT,IAAI,EAAE,eAAe;QACrBG,WAAW,EAAE;MACf;IACF;EACF,CAAC;EACDO,QAAQ,EAAE;IACRV,IAAI,EAAE,QAAQ;IACdC,UAAU,EAAE;MACVU,IAAI,EAAE;QACJX,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf;IACF;EACF,CAAC;EACDS,OAAO,EAAE;IACPZ,IAAI,EAAE,QAAQ;IACdC,UAAU,EAAE;MACVU,IAAI,EAAE;QACJX,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDU,KAAK,EAAE;QACLb,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE,eAAe;QAC5BW,MAAM,EAAE;MACV,CAAC;MACDX,WAAW,EAAE;QACXH,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDY,OAAO,EAAE;QACPf,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDa,KAAK,EAAE;QACLhB,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDE,MAAM,EAAE;QACNL,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDc,UAAU,EAAE;QACVjB,IAAI,EAAE,SAAS;QACfG,WAAW,EAAE;MACf,CAAC;MACDe,UAAU,EAAE;QACVlB,IAAI,EAAE,QAAQ;QACdc,MAAM,EAAE,WAAW;QACnBX,WAAW,EAAE;MACf;IACF;EACF,CAAC;EAGDgB,gBAAgB,EAAE;IAChBnB,IAAI,EAAE,QAAQ;IACdC,UAAU,EAAE;MACVmB,KAAK,EAAE;QACLpB,IAAI,EAAE,SAAS;QACfG,WAAW,EAAE;MACf,CAAC;MACDkB,IAAI,EAAE;QACJrB,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MAEDmB,KAAK,EAAE;QACLtB,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDoB,SAAS,EAAE;QACTvB,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDqB,SAAS,EAAE;QACTxB,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE,0BAA0B;QACvCW,MAAM,EAAE;MACV,CAAC;MACDW,QAAQ,EAAE;QACRzB,IAAI,EAAE,SAAS;QACfG,WAAW,EAAE;MACf;IACF;EACF,CAAC;EAEDuB,YAAY,EAAE;IACZ1B,IAAI,EAAE,QAAQ;IACdC,UAAU,EAAE;MACV0B,SAAS,EAAE;QACT3B,IAAI,EAAE,OAAO;QACb4B,KAAK,EAAE;UACL5B,IAAI,EAAE,QAAQ;UACdc,MAAM,EAAE;QACV,CAAC;QACDX,WAAW,EAAE;MACf,CAAC;MACDoB,SAAS,EAAE;QACTvB,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDE,MAAM,EAAE;QACNL,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf;IACF;EACF,CAAC;EACD0B,YAAY,EAAE;IACZ7B,IAAI,EAAE,QAAQ;IACdC,UAAU,EAAE;MACVsB,SAAS,EAAE;QACTvB,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf;IACF;EACF,CAAC;EAED2B,MAAM,EAAE;IACN9B,IAAI,EAAE,QAAQ;IACdC,UAAU,EAAE;MACV8B,aAAa,EAAE;QACb/B,IAAI,EAAE,SAAS;QACfG,WAAW,EAAE,iBAAiB;QAC9B6B,OAAO,EAAE,CAAC;QACVC,OAAO,EAAE;MACX,CAAC;MACDC,SAAS,EAAE;QACTlC,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE,yBAAyB;QACtCW,MAAM,EAAE;MACV,CAAC;MACDqB,SAAS,EAAE;QACTnC,IAAI,EAAE,SAAS;QACfG,WAAW,EAAE;MACf,CAAC;MACDiC,KAAK,EAAE;QACLpC,IAAI,EAAE,SAAS;QACfG,WAAW,EAAE;MACf,CAAC;MACDkC,iBAAiB,EAAE;QACjBrC,IAAI,EAAE,gBAAgB;QACtBG,WAAW,EAAE,6BAA6B;QAC1CmC,OAAO,EAAE,CAAC,GAAG;MACf,CAAC;MACDjC,MAAM,EAAE;QACNL,IAAI,EAAE,QAAQ;QACd,MAAM,EAAE,CAAC,QAAQ,EAAE,UAAU,CAAC;QAC9BG,WAAW,EAAE;MACf;IACF;EACF,CAAC;EAEDoC,aAAa,EAAE;IACbvC,IAAI,EAAE,QAAQ;IACdC,UAAU,EAAE;MACVuC,MAAM,EAAE;QACNxC,IAAI,EAAE,SAAS;QACfG,WAAW,EAAE,sBAAsB;QACnC6B,OAAO,EAAE,CAAC;QACVC,OAAO,EAAE,CAAC;QACVK,OAAO,EAAE;MACX,CAAC;MACDG,OAAO,EAAE;QACPzC,IAAI,EAAE,QAAQ;QACdG,WAAW,EAAE;MACf,CAAC;MACDoB,SAAS,EAAE;QACTvB,IAAI,EAAG,MAAM;QACbG,WAAW,EAAE,qCAAqC;QAClDuC,OAAO,EAAE;MACX;IACF;EACF;AACF,CAAC;AAAAC,OAAA,CAAAL,OAAA,GAAAM,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8c782dae2b739e00f2e15b2f1eb73a53786c3469","contentHash":"61c51e35805e9a0c3c7933d2dd5e8147f216ea5c5e2e2d8559190d78c7aeaf61"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\admin.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\admin.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":13},"end":{"line":14,"column":1}},"3":{"start":{"line":15,"column":15},"end":{"line":375,"column":1}},"4":{"start":{"line":376,"column":0},"end":{"line":376,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["user","firstname","lastname","email","password","phone","permissions","_default","get","tags","description","parameters","responses","content","schema","type","example","post","requestBody","properties","message","status","name","in","required","constent","delete","put","security","bearerAuth","exports","default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["admin.js"],"sourcesContent":["const user = {\r\n  firstname: 'kevchecho',\r\n  lastname: 'idow',\r\n  email: 'hsdggd@bff.com',\r\n  password: 'pasmegaround',\r\n  phone: '0787882105',\r\n  permissions: [\r\n    'add product',\r\n    'add vendor',\r\n    'add buyer',\r\n    'remove vendor',\r\n    'remove product',\r\n  ],\r\n};\r\nexport default {\r\n  '/api/admin/users': {\r\n    get: {\r\n      tags: ['admin'],\r\n      description:\r\n        'this endpoint is defined with the get HTTP method and returns a list of all users in the database. The endpoint is tagged as being only accessible to admin users and has no parameters. The response contains an HTTP status code of 200 with a JSON content-type and an array schema that defines the shape of the returned user data.',\r\n\r\n      parameters: [],\r\n      responses: {\r\n        200: {\r\n          description: 'ok',\r\n          content: {\r\n            'application/json': {\r\n              schema: {\r\n                type: 'Object',\r\n                example: [user],\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    post: {\r\n      tags: ['admin'],\r\n      description:\r\n        \"this endpoint is defined with the post HTTP method and allows the creation of a new admin. The endpoint is also tagged as being only accessible to admin users and requires a request body with the user's details, such as first name, last name, email, password, phone, and permissions. The request body schema is defined using an object with properties that match the user details, each with its own type, description, and example value\",\r\n      parameters: [],\r\n      requestBody: {\r\n        content: {\r\n          'application/json': {\r\n            schema: {\r\n              type: 'object',\r\n              properties: {\r\n                firstname: {\r\n                  type: 'string',\r\n                  description: 'firstname',\r\n                  example: 'kevchecho',\r\n                },\r\n                lastname: {\r\n                  type: 'string',\r\n                  description: 'lastname',\r\n                  example: 'rustage',\r\n                },\r\n                email: {\r\n                  type: 'string',\r\n                  description: 'email',\r\n                  example: 'hsdggd@bff.com ',\r\n                },\r\n                password: {\r\n                  type: 'string',\r\n                  description: 'password',\r\n                  example: 'pasword ',\r\n                },\r\n                phone: {\r\n                  type: 'string',\r\n                  description: 'phone',\r\n                  example: '250787882105',\r\n                },\r\n                permissions: {\r\n                  type: 'string',\r\n                  description: 'title',\r\n                  example: [\r\n                    'add product',\r\n                    'add vendor',\r\n                    'add buyer',\r\n                    'remove vendor',\r\n                    'remove product',\r\n                  ],\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n      responses: {\r\n        201: {\r\n          description: 'ok',\r\n          content: {\r\n            'application/json': {\r\n              schema: {\r\n                type: 'object',\r\n                example: {\r\n                  message: 'admin added',\r\n                  status: 'success',\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n  '/api/admin/users/{id}': {\r\n    get: {\r\n      tags: ['admin'],\r\n      parameters: [\r\n        {\r\n          name: 'id',\r\n          in: 'path',\r\n          description: 'user id',\r\n          required: true,\r\n          type: 'string',\r\n          example: '3e7b7d4f-d9d0-4ee2-8413-5df9c4ec6491',\r\n        },\r\n      ],\r\n      responses: {\r\n        200: {\r\n          description: 'OK',\r\n          constent: {\r\n            'application/json': {\r\n              schema: {\r\n                type: 'object',\r\n                example: user,\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    delete: {\r\n      tags: ['admin'],\r\n      parameters: [\r\n        {\r\n          name: 'id',\r\n          in: 'path',\r\n          description: 'user id',\r\n          required: true,\r\n          type: 'string',\r\n          example: '3e7b7d4f-d9d0-4ee2-8413-5df9c4ec6491',\r\n        },\r\n      ],\r\n      responses: {\r\n        204: {\r\n          description: 'OK',\r\n        },\r\n        500: {\r\n          description: 'Internal Server Error',\r\n        },\r\n\r\n        401: {\r\n          description: 'Not Authorized',\r\n        },\r\n        403: {\r\n          description: 'Forbidden Access',\r\n        },\r\n      },\r\n    },\r\n  },\r\n  '/api/v1/vendors/register': {\r\n    post: {\r\n      tags: ['admin'],\r\n      description:\r\n        \"this endpoint is defined with the post HTTP method and allows the creation of a new Vendor. The endpoint is also tagged as being only accessible to admin users and requires a request body with the user's details, such as first name, last name, email, password, phone, and permissions. The request body schema is defined using an object with properties that match the user details, each with its own type, description, and example value\",\r\n      parameters: [],\r\n      requestBody: {\r\n        content: {\r\n          'application/json': {\r\n            schema: {\r\n              type: 'object',\r\n              properties: {\r\n                firstname: {\r\n                  type: 'string',\r\n                  description: 'firstname',\r\n                  example: 'kevchecho',\r\n                },\r\n                lastname: {\r\n                  type: 'string',\r\n                  description: 'lastname',\r\n                  example: 'rustage',\r\n                },\r\n                email: {\r\n                  type: 'string',\r\n                  description: 'email',\r\n                  example: 'koksa@gmail.com ',\r\n                },\r\n                password: {\r\n                  type: 'string',\r\n                  description: 'password',\r\n                  example: 'pasword ',\r\n                },\r\n                phone: {\r\n                  type: 'string',\r\n                  description: 'phone',\r\n                  example: '250787882105',\r\n                },\r\n                permissions: {\r\n                  type: 'string',\r\n                  description: 'title',\r\n                  example: [\r\n                    'add product',\r\n                    'add vendor',\r\n                    'add buyer',\r\n                    'remove vendor',\r\n                    'remove product',\r\n                  ],\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n      responses: {\r\n        201: {\r\n          description: 'success',\r\n        },\r\n        500: {\r\n          description: 'Internal Server Error',\r\n        },\r\n        401: {\r\n          description: 'Not Authorized',\r\n        },\r\n        403: {\r\n          description: 'Forbidden Access',\r\n        },\r\n      },\r\n    },\r\n  },\r\n\r\n  '/api/v1/users': {\r\n    put: {\r\n      tags: ['user'],\r\n      description:\r\n        \"This endpoint allows the authenticated user to update their own profile. The request body should include any fields that the user wishes to update. The 'id' parameter should match the ID of the authenticated user. The timestamp associated with the user's profile will be automatically updated upon each update.\",\r\n      requestBody: {\r\n        content: {\r\n          'application/json': {\r\n            schema: {\r\n              type: 'object',\r\n              properties: {\r\n                firstname: {\r\n                  type: 'string',\r\n                  description: 'First name',\r\n                  example: 'John',\r\n                },\r\n                lastname: {\r\n                  type: 'string',\r\n                  description: 'Last name',\r\n                  example: 'Doe',\r\n                },\r\n                email: {\r\n                  type: 'string',\r\n                  description: 'Email address',\r\n                  example: 'johndoe@example.com',\r\n                },\r\n                password: {\r\n                  type: 'string',\r\n                  description: 'Password',\r\n                  example: 'newpassword',\r\n                },\r\n                phone: {\r\n                  type: 'string',\r\n                  description: 'Phone number',\r\n                  example: '+1 (123) 456-7890',\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n      security: [\r\n        {\r\n          bearerAuth: [],\r\n        },\r\n      ],\r\n      responses: {\r\n        200: {\r\n          description: 'User profile updated successfully',\r\n          content: {\r\n            'application/json': {\r\n              schema: {\r\n                type: 'object',\r\n                properties: {\r\n                  message: {\r\n                    type: 'string',\r\n                    description: 'Success message',\r\n                    example: 'User profile updated successfully',\r\n                  },\r\n                  status: {\r\n                    type: 'string',\r\n                    description: 'Status of the operation',\r\n                    example: 'success',\r\n                  },\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n        401: {\r\n          description: 'Unauthorized',\r\n          content: {\r\n            'application/json': {\r\n              schema: {\r\n                type: 'object',\r\n                properties: {\r\n                  message: {\r\n                    type: 'string',\r\n                    description: 'Error message',\r\n                    example: 'Authentication failed',\r\n                  },\r\n                  status: {\r\n                    type: 'string',\r\n                    description: 'Status of the operation',\r\n                    example: 'error',\r\n                  },\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n        404: {\r\n          description: 'User not found',\r\n          content: {\r\n            'application/json': {\r\n              schema: {\r\n                type: 'object',\r\n                properties: {\r\n                  message: {\r\n                    type: 'string',\r\n                    description: 'Error message',\r\n                    example: 'User not found',\r\n                  },\r\n                  status: {\r\n                    type: 'string',\r\n                    description: 'Status of the operation',\r\n                    example: 'error',\r\n                  },\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n  'application/json': {\r\n    schema: {\r\n      type: 'object',\r\n      properties: {\r\n        firstname: {\r\n          type: 'string',\r\n          description: 'firstname',\r\n          example: 'kevchecho',\r\n        },\r\n        lastname: {\r\n          type: 'string',\r\n          description: 'lastname',\r\n          example: 'rustage',\r\n        },\r\n        email: {\r\n          type: 'string',\r\n          description: 'email',\r\n          example: 'koksa@gmail.com ',\r\n        },\r\n        password: {\r\n          type: 'string',\r\n          description: 'password',\r\n          example: 'pasword ',\r\n        },\r\n        phone: {\r\n          type: 'string',\r\n          description: 'phone',\r\n          example: '250787882105',\r\n        },\r\n        permissions: {\r\n          type: 'string',\r\n          description: 'title',\r\n          example: [\r\n            'add product',\r\n            'add vendor',\r\n            'add buyer',\r\n            'remove vendor',\r\n            'remove product',\r\n          ],\r\n        },\r\n\r\n        responses: {\r\n          201: {\r\n            description: 'success',\r\n          },\r\n\r\n          500: {\r\n            description: 'Internal Server Error',\r\n          },\r\n\r\n          401: {\r\n            description: 'Not Authorized',\r\n          },\r\n          403: {\r\n            description: 'Forbidden Access',\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n};\r\n"],"mappings":";;;;;;AAAA,MAAMA,IAAI,GAAG;EACXC,SAAS,EAAE,WAAW;EACtBC,QAAQ,EAAE,MAAM;EAChBC,KAAK,EAAE,gBAAgB;EACvBC,QAAQ,EAAE,cAAc;EACxBC,KAAK,EAAE,YAAY;EACnBC,WAAW,EAAE,CACX,aAAa,EACb,YAAY,EACZ,WAAW,EACX,eAAe,EACf,gBAAgB;AAEpB,CAAC;AAAC,IAAAC,QAAA,GACa;EACb,kBAAkB,EAAE;IAClBC,GAAG,EAAE;MACHC,IAAI,EAAE,CAAC,OAAO,CAAC;MACfC,WAAW,EACT,0UAA0U;MAE5UC,UAAU,EAAE,EAAE;MACdC,SAAS,EAAE;QACT,GAAG,EAAE;UACHF,WAAW,EAAE,IAAI;UACjBG,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBC,MAAM,EAAE;gBACNC,IAAI,EAAE,QAAQ;gBACdC,OAAO,EAAE,CAAChB,IAAI;cAChB;YACF;UACF;QACF;MACF;IACF,CAAC;IACDiB,IAAI,EAAE;MACJR,IAAI,EAAE,CAAC,OAAO,CAAC;MACfC,WAAW,EACT,obAAob;MACtbC,UAAU,EAAE,EAAE;MACdO,WAAW,EAAE;QACXL,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE,QAAQ;cACdI,UAAU,EAAE;gBACVlB,SAAS,EAAE;kBACTc,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,WAAW;kBACxBM,OAAO,EAAE;gBACX,CAAC;gBACDd,QAAQ,EAAE;kBACRa,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,UAAU;kBACvBM,OAAO,EAAE;gBACX,CAAC;gBACDb,KAAK,EAAE;kBACLY,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,OAAO;kBACpBM,OAAO,EAAE;gBACX,CAAC;gBACDZ,QAAQ,EAAE;kBACRW,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,UAAU;kBACvBM,OAAO,EAAE;gBACX,CAAC;gBACDX,KAAK,EAAE;kBACLU,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,OAAO;kBACpBM,OAAO,EAAE;gBACX,CAAC;gBACDV,WAAW,EAAE;kBACXS,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,OAAO;kBACpBM,OAAO,EAAE,CACP,aAAa,EACb,YAAY,EACZ,WAAW,EACX,eAAe,EACf,gBAAgB;gBAEpB;cACF;YACF;UACF;QACF;MACF,CAAC;MACDJ,SAAS,EAAE;QACT,GAAG,EAAE;UACHF,WAAW,EAAE,IAAI;UACjBG,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBC,MAAM,EAAE;gBACNC,IAAI,EAAE,QAAQ;gBACdC,OAAO,EAAE;kBACPI,OAAO,EAAE,aAAa;kBACtBC,MAAM,EAAE;gBACV;cACF;YACF;UACF;QACF;MACF;IACF;EACF,CAAC;EACD,uBAAuB,EAAE;IACvBb,GAAG,EAAE;MACHC,IAAI,EAAE,CAAC,OAAO,CAAC;MACfE,UAAU,EAAE,CACV;QACEW,IAAI,EAAE,IAAI;QACVC,EAAE,EAAE,MAAM;QACVb,WAAW,EAAE,SAAS;QACtBc,QAAQ,EAAE,IAAI;QACdT,IAAI,EAAE,QAAQ;QACdC,OAAO,EAAE;MACX,CAAC,CACF;MACDJ,SAAS,EAAE;QACT,GAAG,EAAE;UACHF,WAAW,EAAE,IAAI;UACjBe,QAAQ,EAAE;YACR,kBAAkB,EAAE;cAClBX,MAAM,EAAE;gBACNC,IAAI,EAAE,QAAQ;gBACdC,OAAO,EAAEhB;cACX;YACF;UACF;QACF;MACF;IACF,CAAC;IACD0B,MAAM,EAAE;MACNjB,IAAI,EAAE,CAAC,OAAO,CAAC;MACfE,UAAU,EAAE,CACV;QACEW,IAAI,EAAE,IAAI;QACVC,EAAE,EAAE,MAAM;QACVb,WAAW,EAAE,SAAS;QACtBc,QAAQ,EAAE,IAAI;QACdT,IAAI,EAAE,QAAQ;QACdC,OAAO,EAAE;MACX,CAAC,CACF;MACDJ,SAAS,EAAE;QACT,GAAG,EAAE;UACHF,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QAED,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf;MACF;IACF;EACF,CAAC;EACD,0BAA0B,EAAE;IAC1BO,IAAI,EAAE;MACJR,IAAI,EAAE,CAAC,OAAO,CAAC;MACfC,WAAW,EACT,qbAAqb;MACvbC,UAAU,EAAE,EAAE;MACdO,WAAW,EAAE;QACXL,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE,QAAQ;cACdI,UAAU,EAAE;gBACVlB,SAAS,EAAE;kBACTc,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,WAAW;kBACxBM,OAAO,EAAE;gBACX,CAAC;gBACDd,QAAQ,EAAE;kBACRa,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,UAAU;kBACvBM,OAAO,EAAE;gBACX,CAAC;gBACDb,KAAK,EAAE;kBACLY,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,OAAO;kBACpBM,OAAO,EAAE;gBACX,CAAC;gBACDZ,QAAQ,EAAE;kBACRW,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,UAAU;kBACvBM,OAAO,EAAE;gBACX,CAAC;gBACDX,KAAK,EAAE;kBACLU,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,OAAO;kBACpBM,OAAO,EAAE;gBACX,CAAC;gBACDV,WAAW,EAAE;kBACXS,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,OAAO;kBACpBM,OAAO,EAAE,CACP,aAAa,EACb,YAAY,EACZ,WAAW,EACX,eAAe,EACf,gBAAgB;gBAEpB;cACF;YACF;UACF;QACF;MACF,CAAC;MACDJ,SAAS,EAAE;QACT,GAAG,EAAE;UACHF,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf;MACF;IACF;EACF,CAAC;EAED,eAAe,EAAE;IACfiB,GAAG,EAAE;MACHlB,IAAI,EAAE,CAAC,MAAM,CAAC;MACdC,WAAW,EACT,wTAAwT;MAC1TQ,WAAW,EAAE;QACXL,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE,QAAQ;cACdI,UAAU,EAAE;gBACVlB,SAAS,EAAE;kBACTc,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,YAAY;kBACzBM,OAAO,EAAE;gBACX,CAAC;gBACDd,QAAQ,EAAE;kBACRa,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,WAAW;kBACxBM,OAAO,EAAE;gBACX,CAAC;gBACDb,KAAK,EAAE;kBACLY,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,eAAe;kBAC5BM,OAAO,EAAE;gBACX,CAAC;gBACDZ,QAAQ,EAAE;kBACRW,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,UAAU;kBACvBM,OAAO,EAAE;gBACX,CAAC;gBACDX,KAAK,EAAE;kBACLU,IAAI,EAAE,QAAQ;kBACdL,WAAW,EAAE,cAAc;kBAC3BM,OAAO,EAAE;gBACX;cACF;YACF;UACF;QACF;MACF,CAAC;MACDY,QAAQ,EAAE,CACR;QACEC,UAAU,EAAE;MACd,CAAC,CACF;MACDjB,SAAS,EAAE;QACT,GAAG,EAAE;UACHF,WAAW,EAAE,mCAAmC;UAChDG,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBC,MAAM,EAAE;gBACNC,IAAI,EAAE,QAAQ;gBACdI,UAAU,EAAE;kBACVC,OAAO,EAAE;oBACPL,IAAI,EAAE,QAAQ;oBACdL,WAAW,EAAE,iBAAiB;oBAC9BM,OAAO,EAAE;kBACX,CAAC;kBACDK,MAAM,EAAE;oBACNN,IAAI,EAAE,QAAQ;oBACdL,WAAW,EAAE,yBAAyB;oBACtCM,OAAO,EAAE;kBACX;gBACF;cACF;YACF;UACF;QACF,CAAC;QACD,GAAG,EAAE;UACHN,WAAW,EAAE,cAAc;UAC3BG,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBC,MAAM,EAAE;gBACNC,IAAI,EAAE,QAAQ;gBACdI,UAAU,EAAE;kBACVC,OAAO,EAAE;oBACPL,IAAI,EAAE,QAAQ;oBACdL,WAAW,EAAE,eAAe;oBAC5BM,OAAO,EAAE;kBACX,CAAC;kBACDK,MAAM,EAAE;oBACNN,IAAI,EAAE,QAAQ;oBACdL,WAAW,EAAE,yBAAyB;oBACtCM,OAAO,EAAE;kBACX;gBACF;cACF;YACF;UACF;QACF,CAAC;QACD,GAAG,EAAE;UACHN,WAAW,EAAE,gBAAgB;UAC7BG,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBC,MAAM,EAAE;gBACNC,IAAI,EAAE,QAAQ;gBACdI,UAAU,EAAE;kBACVC,OAAO,EAAE;oBACPL,IAAI,EAAE,QAAQ;oBACdL,WAAW,EAAE,eAAe;oBAC5BM,OAAO,EAAE;kBACX,CAAC;kBACDK,MAAM,EAAE;oBACNN,IAAI,EAAE,QAAQ;oBACdL,WAAW,EAAE,yBAAyB;oBACtCM,OAAO,EAAE;kBACX;gBACF;cACF;YACF;UACF;QACF;MACF;IACF;EACF,CAAC;EACD,kBAAkB,EAAE;IAClBF,MAAM,EAAE;MACNC,IAAI,EAAE,QAAQ;MACdI,UAAU,EAAE;QACVlB,SAAS,EAAE;UACTc,IAAI,EAAE,QAAQ;UACdL,WAAW,EAAE,WAAW;UACxBM,OAAO,EAAE;QACX,CAAC;QACDd,QAAQ,EAAE;UACRa,IAAI,EAAE,QAAQ;UACdL,WAAW,EAAE,UAAU;UACvBM,OAAO,EAAE;QACX,CAAC;QACDb,KAAK,EAAE;UACLY,IAAI,EAAE,QAAQ;UACdL,WAAW,EAAE,OAAO;UACpBM,OAAO,EAAE;QACX,CAAC;QACDZ,QAAQ,EAAE;UACRW,IAAI,EAAE,QAAQ;UACdL,WAAW,EAAE,UAAU;UACvBM,OAAO,EAAE;QACX,CAAC;QACDX,KAAK,EAAE;UACLU,IAAI,EAAE,QAAQ;UACdL,WAAW,EAAE,OAAO;UACpBM,OAAO,EAAE;QACX,CAAC;QACDV,WAAW,EAAE;UACXS,IAAI,EAAE,QAAQ;UACdL,WAAW,EAAE,OAAO;UACpBM,OAAO,EAAE,CACP,aAAa,EACb,YAAY,EACZ,WAAW,EACX,eAAe,EACf,gBAAgB;QAEpB,CAAC;QAEDJ,SAAS,EAAE;UACT,GAAG,EAAE;YACHF,WAAW,EAAE;UACf,CAAC;UAED,GAAG,EAAE;YACHA,WAAW,EAAE;UACf,CAAC;UAED,GAAG,EAAE;YACHA,WAAW,EAAE;UACf,CAAC;UACD,GAAG,EAAE;YACHA,WAAW,EAAE;UACf;QACF;MACF;IACF;EACF;AACF,CAAC;AAAAoB,OAAA,CAAAC,OAAA,GAAAxB,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a2f9a9f9b11dde7940e5075c06ca5d0945490ea1","contentHash":"be087ee644bc7230a4b427e411b307cc63944fa3cd951b45b33561a0d191b8ce"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\register.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\register.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":46,"column":1}},"3":{"start":{"line":47,"column":0},"end":{"line":47,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["post","tags","description","security","parameters","requestBody","content","schema","$ref","example","firstname","lastname","phone","email","password","required","responses","message","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["register.js"],"sourcesContent":["export default {\r\n    \"/api/v1/register\" : {\r\n        post: {\r\n          tags: [\"Auth\"],\r\n          description: \"User registeration\",\r\n          security: [],\r\n          parameters: [],\r\n          requestBody: {\r\n            content: {\r\n              \"application/json\": {\r\n                schema: {\r\n                  $ref: \"#/components/schemas/User\",\r\n                },\r\n                example: {\r\n                  firstname: \"Ana10 user\",\r\n                  lastname: \"Ana10 user\",\r\n                  phone: \"1234567890\",\r\n                  email: \"example@gmail.com\",\r\n                  password: \"12345678\",\r\n                },\r\n              },\r\n            },\r\n            required: true,\r\n          },\r\n          responses: {\r\n            201: {\r\n              description: \"New User was created successfully\",\r\n            },\r\n            409: {\r\n              description: {message: \"User already exists\"},\r\n            },\r\n            400: {\r\n              description: \"Bad Request, both fields are required\",\r\n            }\r\n          },\r\n        },\r\n      },\r\n    }"],"mappings":";;;;;;eAAe;EACX,kBAAkB,EAAG;IACjBA,IAAI,EAAE;MACJC,IAAI,EAAE,CAAC,MAAM,CAAC;MACdC,WAAW,EAAE,oBAAoB;MACjCC,QAAQ,EAAE,EAAE;MACZC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE;QACXC,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE;YACR,CAAC;YACDC,OAAO,EAAE;cACPC,SAAS,EAAE,YAAY;cACvBC,QAAQ,EAAE,YAAY;cACtBC,KAAK,EAAE,YAAY;cACnBC,KAAK,EAAE,mBAAmB;cAC1BC,QAAQ,EAAE;YACZ;UACF;QACF,CAAC;QACDC,QAAQ,EAAE;MACZ,CAAC;MACDC,SAAS,EAAE;QACT,GAAG,EAAE;UACHd,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;YAACe,OAAO,EAAE;UAAqB;QAC9C,CAAC;QACD,GAAG,EAAE;UACHf,WAAW,EAAE;QACf;MACF;IACF;EACF;AACF,CAAC;AAAAgB,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"431a0e508d14c49d77bb68dfdbddb11ba7487ebd","contentHash":"4d5a8446faa5521984ac4a96ecb4ad66a57065eb901188a941c4efedfbdb162a"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\verifyCode.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\verifyCode.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":39,"column":1}},"3":{"start":{"line":40,"column":0},"end":{"line":40,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["post","tags","description","parameters","requestBody","content","schema","$ref","example","verificationCode","required","responses","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["verifyCode.js"],"sourcesContent":["export default {\r\n    '/api/vendor/verify': {\r\n      post: {\r\n        tags: ['Auth'],\r\n        description: 'vendor account verification',\r\n        parameters: [],\r\n        requestBody: {\r\n          content: {\r\n            'application/json': {\r\n              schema: {\r\n                $ref: '#/components/schemas/User',\r\n              },\r\n              example: {\r\n                verificationCode: 'six digits here',\r\n              },\r\n            },\r\n          },\r\n          required: true,\r\n        },\r\n        responses: {\r\n          200: {\r\n            description: 'verified...! welcome',\r\n          },\r\n          403: {\r\n            description: 'please login first' ,\r\n          },\r\n          500:{\r\n            description:'internal server error' \r\n          }\r\n        },\r\n      },\r\n    },\r\n  };"],"mappings":";;;;;;eAAe;EACX,oBAAoB,EAAE;IACpBA,IAAI,EAAE;MACJC,IAAI,EAAE,CAAC,MAAM,CAAC;MACdC,WAAW,EAAE,6BAA6B;MAC1CC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE;QACXC,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE;YACR,CAAC;YACDC,OAAO,EAAE;cACPC,gBAAgB,EAAE;YACpB;UACF;QACF,CAAC;QACDC,QAAQ,EAAE;MACZ,CAAC;MACDC,SAAS,EAAE;QACT,GAAG,EAAE;UACHT,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAC;UACFA,WAAW,EAAC;QACd;MACF;IACF;EACF;AACF,CAAC;AAAAU,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5214fc88d2b950b8a7581e052712efec66119b5e","contentHash":"8ca6d85c30d1908a9dfc18a42b95f28c9ea69be81c1f491b288440745f21b476"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\user.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\user.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":172,"column":1}},"3":{"start":{"line":173,"column":0},"end":{"line":173,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["post","tags","summary","security","parameters","requestBody","content","schema","$ref","example","email","required","responses","description","message","password","put","bearerAuth","type","properties","status","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["user.js"],"sourcesContent":["export default {\r\n    \"/api/v1/email\" : {\r\n        post: {\r\n          tags: [\"Auth\"],\r\n          summary: \"User email verification for password reset\",\r\n          security: [],\r\n          parameters: [],\r\n          requestBody: {\r\n            content: {\r\n              \"application/json\": {\r\n                schema: {\r\n                  $ref: \"#/components/schemas/User\",\r\n                },\r\n                example: {\r\n                  email: \"example@gmail.com\", \r\n                },\r\n              },\r\n            },\r\n            required: true,\r\n          },\r\n          responses: {\r\n            201: {\r\n              description: \"New User was created successfully\",\r\n            },\r\n            409: {\r\n              description: {message: \"User already exists\"},\r\n            },\r\n            400: {\r\n              description: \"Bad Request, both fields are required\",\r\n            }\r\n          },\r\n        },\r\n      },\r\n      \"/api/v1/password/{token}\" : {\r\n        post: {\r\n          tags: [\"Auth\"],\r\n          summary: \" password reset\",\r\n          parameters: [\r\n            {\r\n               \"in\": \"path\",\r\n             \"name\": \"token\",\r\n              required: true,\r\n            }\r\n          ],\r\n          requestBody: {\r\n            content: {\r\n              \"application/json\": {\r\n                schema: {\r\n                  $ref: \"#/components/schemas/User\",\r\n                },\r\n                example: {\r\n                  \r\n                  password: \"example\",\r\n                  \r\n                },\r\n              },\r\n            },\r\n            required: true,\r\n          },\r\n          responses: {\r\n            201: {\r\n              description: \"New User was created successfully\",\r\n            },\r\n            409: {\r\n              description: {message: \"User already exists\"},\r\n            },\r\n            400: {\r\n              description: \"Bad Request, both fields are required\",\r\n            }\r\n          },\r\n        },\r\n      },\r\n    \r\n\r\n      \"/api/v1/users/password/update\": {\r\n        put: {\r\n          tags: [\"Auth\"],\r\n          summary: \"Update user password\",\r\n          description: \"This endpoint allows a logged-in user to update their password.\",\r\n          security: [\r\n            {\r\n              bearerAuth: [],\r\n            }\r\n          ],\r\n          parameters: [],\r\n          requestBody: {\r\n            content: {\r\n              \"application/json\": {\r\n                schema: {\r\n                  $ref: \"#/components/schemas/User\",\r\n                },\r\n                example: {\r\n                  \"existingPassword\": \"oldPassword123\",\r\n                  \"newPassword\": \"newPassword456\" \r\n                },\r\n              },\r\n            },\r\n            required: true,\r\n          },\r\n          responses: {\r\n            200: {\r\n              description: \"The password was successfully updated.\",\r\n              content: {\r\n                \"application/json\": {\r\n                  schema: {\r\n                    type: \"object\",\r\n                    properties: {\r\n                      status: {\r\n                        type: \"string\",\r\n                        description: \"The status of the response.\",\r\n                        example: \"success\"\r\n                      },\r\n                      message: {\r\n                        type: \"string\",\r\n                        description: \"A message indicating the password was updated successfully.\",\r\n                        example: \"Password updated successfully.\"\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            400: {\r\n              description: \"The request was invalid.\",\r\n              content: {\r\n                \"application/json\": {\r\n                  schema: {\r\n                    type: \"object\",\r\n                    properties: {\r\n                      status: {\r\n                        type: \"string\",\r\n                        description: \"The status of the response.\",\r\n                        example: \"fail\"\r\n                      },\r\n                      message: {\r\n                        type: \"string\",\r\n                        description: \"A message indicating the reason for the failure.\",\r\n                        example: \"The request was invalid.\"\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            401: {\r\n              description: \"The user is not authorized to perform this action.\",\r\n              content: {\r\n                \"application/json\": {\r\n                  schema: {\r\n                    type: \"object\",\r\n                    properties: {\r\n                      status: {\r\n                        type: \"string\",\r\n                        description: \"The status of the response.\",\r\n                        example: \"fail\"\r\n                      },\r\n                      message: {\r\n                        type: \"string\",\r\n                        description: \"A message indicating the reason for the authorization failure.\",\r\n                        example: \"You are not authorized to perform this action.\"\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    "],"mappings":";;;;;;eAAe;EACX,eAAe,EAAG;IACdA,IAAI,EAAE;MACJC,IAAI,EAAE,CAAC,MAAM,CAAC;MACdC,OAAO,EAAE,4CAA4C;MACrDC,QAAQ,EAAE,EAAE;MACZC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE;QACXC,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE;YACR,CAAC;YACDC,OAAO,EAAE;cACPC,KAAK,EAAE;YACT;UACF;QACF,CAAC;QACDC,QAAQ,EAAE;MACZ,CAAC;MACDC,SAAS,EAAE;QACT,GAAG,EAAE;UACHC,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;YAACC,OAAO,EAAE;UAAqB;QAC9C,CAAC;QACD,GAAG,EAAE;UACHD,WAAW,EAAE;QACf;MACF;IACF;EACF,CAAC;EACD,0BAA0B,EAAG;IAC3Bb,IAAI,EAAE;MACJC,IAAI,EAAE,CAAC,MAAM,CAAC;MACdC,OAAO,EAAE,iBAAiB;MAC1BE,UAAU,EAAE,CACV;QACG,IAAI,EAAE,MAAM;QACd,MAAM,EAAE,OAAO;QACdO,QAAQ,EAAE;MACZ,CAAC,CACF;MACDN,WAAW,EAAE;QACXC,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE;YACR,CAAC;YACDC,OAAO,EAAE;cAEPM,QAAQ,EAAE;YAEZ;UACF;QACF,CAAC;QACDJ,QAAQ,EAAE;MACZ,CAAC;MACDC,SAAS,EAAE;QACT,GAAG,EAAE;UACHC,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;YAACC,OAAO,EAAE;UAAqB;QAC9C,CAAC;QACD,GAAG,EAAE;UACHD,WAAW,EAAE;QACf;MACF;IACF;EACF,CAAC;EAGD,+BAA+B,EAAE;IAC/BG,GAAG,EAAE;MACHf,IAAI,EAAE,CAAC,MAAM,CAAC;MACdC,OAAO,EAAE,sBAAsB;MAC/BW,WAAW,EAAE,iEAAiE;MAC9EV,QAAQ,EAAE,CACR;QACEc,UAAU,EAAE;MACd,CAAC,CACF;MACDb,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE;QACXC,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE;YACR,CAAC;YACDC,OAAO,EAAE;cACP,kBAAkB,EAAE,gBAAgB;cACpC,aAAa,EAAE;YACjB;UACF;QACF,CAAC;QACDE,QAAQ,EAAE;MACZ,CAAC;MACDC,SAAS,EAAE;QACT,GAAG,EAAE;UACHC,WAAW,EAAE,wCAAwC;UACrDP,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBC,MAAM,EAAE;gBACNW,IAAI,EAAE,QAAQ;gBACdC,UAAU,EAAE;kBACVC,MAAM,EAAE;oBACNF,IAAI,EAAE,QAAQ;oBACdL,WAAW,EAAE,6BAA6B;oBAC1CJ,OAAO,EAAE;kBACX,CAAC;kBACDK,OAAO,EAAE;oBACPI,IAAI,EAAE,QAAQ;oBACdL,WAAW,EAAE,6DAA6D;oBAC1EJ,OAAO,EAAE;kBACX;gBACF;cACF;YACF;UACF;QACF,CAAC;QACD,GAAG,EAAE;UACHI,WAAW,EAAE,0BAA0B;UACvCP,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBC,MAAM,EAAE;gBACNW,IAAI,EAAE,QAAQ;gBACdC,UAAU,EAAE;kBACVC,MAAM,EAAE;oBACNF,IAAI,EAAE,QAAQ;oBACdL,WAAW,EAAE,6BAA6B;oBAC1CJ,OAAO,EAAE;kBACX,CAAC;kBACDK,OAAO,EAAE;oBACPI,IAAI,EAAE,QAAQ;oBACdL,WAAW,EAAE,kDAAkD;oBAC/DJ,OAAO,EAAE;kBACX;gBACF;cACF;YACF;UACF;QACF,CAAC;QACD,GAAG,EAAE;UACHI,WAAW,EAAE,oDAAoD;UACjEP,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBC,MAAM,EAAE;gBACNW,IAAI,EAAE,QAAQ;gBACdC,UAAU,EAAE;kBACVC,MAAM,EAAE;oBACNF,IAAI,EAAE,QAAQ;oBACdL,WAAW,EAAE,6BAA6B;oBAC1CJ,OAAO,EAAE;kBACX,CAAC;kBACDK,OAAO,EAAE;oBACPI,IAAI,EAAE,QAAQ;oBACdL,WAAW,EAAE,gEAAgE;oBAC7EJ,OAAO,EAAE;kBACX;gBACF;cACF;YACF;UACF;QACF;MACF;IACF;EACF;AACF,CAAC;AAAAY,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c84810528c27efc48dcb69a6d90c85e964ce0ba0","contentHash":"dc8117ea947d134902b0816f3b20b313365b33c40f6c77a39373b92ffd93d8e6"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\user_status.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\user_status.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":196,"column":1}},"3":{"start":{"line":197,"column":0},"end":{"line":197,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["user_status.js"],"sourcesContent":["export default {\r\n    \"/api/v1/users/{id}/disable\": {\r\n        \"put\": {\r\n          \"tags\": [\r\n            \"admin\"\r\n          ],\r\n          \"summary\": \"Disable a user account\",\r\n          \"description\": \"This endpoint disables the user account by setting their status to inactive and sending them an email notification.\",\r\n          \"parameters\": [\r\n            {\r\n              \"name\": \"id\",\r\n              \"in\": \"path\",\r\n              \"description\": \"ID of the user to disable\",\r\n              \"required\": true,\r\n              \"type\": \"integer\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"User account successfully disabled\",\r\n              \"schema\": {\r\n                \"type\": \"object\",\r\n                \"properties\": {\r\n                  \"status\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"success\"\r\n                  },\r\n                  \"message\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"User disabled\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            \"401\": {\r\n              \"description\": \"Unauthorized\",\r\n              \"schema\": {\r\n                \"type\": \"object\",\r\n                \"properties\": {\r\n                  \"status\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"fail\"\r\n                  },\r\n                  \"message\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"Not authorized\"\r\n                  }\r\n                }\r\n              },\r\n\r\n              \"description\": \"Access denied\",\r\n              \"schema\": {\r\n                \"type\": \"object\",\r\n                \"properties\": {\r\n                  \"status\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"fail\"\r\n                  },\r\n                  \"message\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"Access denied, dmin role required\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n           \r\n            \"403\": {\r\n              \"description\": \"user already desabled\",\r\n              \"schema\": {\r\n                \"type\": \"object\",\r\n                \"properties\": {\r\n                  \"status\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"fail\"\r\n                  },\r\n                  \"message\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"user already desabled\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n\r\n            \"404\": {\r\n              \"description\": \"User not found\",\r\n              \"schema\": {\r\n                \"type\": \"object\",\r\n                \"properties\": {\r\n                  \"status\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"fail\"\r\n                  },\r\n                  \"message\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"User not found\"\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n\r\n\r\n      \"/api/v1/users/{id}/enable\": {\r\n        \"put\": {\r\n          \"tags\": [\r\n            \"admin\"\r\n          ],\r\n          \"summary\": \"Enable the user account\",\r\n          \"description\": \"This endpoint enable the user account by setting their status to active and sending them an email notification.\",\r\n          \"parameters\": [\r\n            {\r\n              \"name\": \"id\",\r\n              \"in\": \"path\",\r\n              \"description\": \"ID of the user to enable\",\r\n              \"required\": true,\r\n              \"type\": \"integer\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"User account successfully enabled\",\r\n              \"schema\": {\r\n                \"type\": \"object\",\r\n                \"properties\": {\r\n                  \"status\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"success\"\r\n                  },\r\n                  \"message\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"User enabled\"\r\n                  }\r\n                }\r\n              }\r\n            }, \"401\": {\r\n              \"description\": \"Unauthorized\",\r\n              \"schema\": {\r\n                \"type\": \"object\",\r\n                \"properties\": {\r\n                  \"status\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"fail\"\r\n                  },\r\n                  \"message\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"Not authorized\"\r\n                  }\r\n                }\r\n              },\r\n\r\n              \"description\": \"Access denied\",\r\n              \"schema\": {\r\n                \"type\": \"object\",\r\n                \"properties\": {\r\n                  \"status\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"fail\"\r\n                  },\r\n                  \"message\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"Access denied, dmin role required\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n           \r\n            \"403\": {\r\n              \"description\": \"user already inabled\",\r\n              \"schema\": {\r\n                \"type\": \"object\",\r\n                \"properties\": {\r\n                  \"status\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"fail\"\r\n                  },\r\n                  \"message\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"user already inabled\"\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            \"404\": {\r\n              \"description\": \"User not found\",\r\n              \"schema\": {\r\n                \"type\": \"object\",\r\n                \"properties\": {\r\n                  \"status\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"fail\"\r\n                  },\r\n                  \"message\": {\r\n                    \"type\": \"string\",\r\n                    \"example\": \"User not found\"\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n\r\n}"],"mappings":";;;;;;eAAe;EACX,4BAA4B,EAAE;IAC1B,KAAK,EAAE;MACL,MAAM,EAAE,CACN,OAAO,CACR;MACD,SAAS,EAAE,wBAAwB;MACnC,aAAa,EAAE,qHAAqH;MACpI,YAAY,EAAE,CACZ;QACE,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,MAAM;QACZ,aAAa,EAAE,2BAA2B;QAC1C,UAAU,EAAE,IAAI;QAChB,MAAM,EAAE;MACV,CAAC,CACF;MACD,WAAW,EAAE;QACX,KAAK,EAAE;UACL,aAAa,EAAE,oCAAoC;UACnD,QAAQ,EAAE;YACR,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;cACZ,QAAQ,EAAE;gBACR,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb,CAAC;cACD,SAAS,EAAE;gBACT,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb;YACF;UACF;QACF,CAAC;QACD,KAAK,EAAE;UACL,aAAa,EAAE,cAAc;UAC7B,QAAQ,EAAE;YACR,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;cACZ,QAAQ,EAAE;gBACR,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb,CAAC;cACD,SAAS,EAAE;gBACT,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb;YACF;UACF,CAAC;UAED,aAAa,EAAE,eAAe;UAC9B,QAAQ,EAAE;YACR,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;cACZ,QAAQ,EAAE;gBACR,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb,CAAC;cACD,SAAS,EAAE;gBACT,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb;YACF;UACF;QACF,CAAC;QAED,KAAK,EAAE;UACL,aAAa,EAAE,uBAAuB;UACtC,QAAQ,EAAE;YACR,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;cACZ,QAAQ,EAAE;gBACR,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb,CAAC;cACD,SAAS,EAAE;gBACT,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb;YACF;UACF;QACF,CAAC;QAED,KAAK,EAAE;UACL,aAAa,EAAE,gBAAgB;UAC/B,QAAQ,EAAE;YACR,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;cACZ,QAAQ,EAAE;gBACR,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb,CAAC;cACD,SAAS,EAAE;gBACT,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb;YACF;UACF;QACF;MACF;IACF;EACF,CAAC;EAGD,2BAA2B,EAAE;IAC3B,KAAK,EAAE;MACL,MAAM,EAAE,CACN,OAAO,CACR;MACD,SAAS,EAAE,yBAAyB;MACpC,aAAa,EAAE,iHAAiH;MAChI,YAAY,EAAE,CACZ;QACE,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,MAAM;QACZ,aAAa,EAAE,0BAA0B;QACzC,UAAU,EAAE,IAAI;QAChB,MAAM,EAAE;MACV,CAAC,CACF;MACD,WAAW,EAAE;QACX,KAAK,EAAE;UACL,aAAa,EAAE,mCAAmC;UAClD,QAAQ,EAAE;YACR,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;cACZ,QAAQ,EAAE;gBACR,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb,CAAC;cACD,SAAS,EAAE;gBACT,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb;YACF;UACF;QACF,CAAC;QAAE,KAAK,EAAE;UACR,aAAa,EAAE,cAAc;UAC7B,QAAQ,EAAE;YACR,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;cACZ,QAAQ,EAAE;gBACR,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb,CAAC;cACD,SAAS,EAAE;gBACT,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb;YACF;UACF,CAAC;UAED,aAAa,EAAE,eAAe;UAC9B,QAAQ,EAAE;YACR,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;cACZ,QAAQ,EAAE;gBACR,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb,CAAC;cACD,SAAS,EAAE;gBACT,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb;YACF;UACF;QACF,CAAC;QAED,KAAK,EAAE;UACL,aAAa,EAAE,sBAAsB;UACrC,QAAQ,EAAE;YACR,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;cACZ,QAAQ,EAAE;gBACR,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb,CAAC;cACD,SAAS,EAAE;gBACT,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb;YACF;UACF;QACF,CAAC;QACD,KAAK,EAAE;UACL,aAAa,EAAE,gBAAgB;UAC/B,QAAQ,EAAE;YACR,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;cACZ,QAAQ,EAAE;gBACR,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb,CAAC;cACD,SAAS,EAAE;gBACT,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE;cACb;YACF;UACF;QACF;MACF;IACF;EACF;AAEN,CAAC;AAAAA,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9fb2c452984bf6f605b3746dfbc69eb484b2d2ab","contentHash":"ca44cd486eae84887685aa5db09ab78e751ebc0f0134decc08dd8b4f3895143c"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\category.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\category.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":70,"column":1}},"3":{"start":{"line":71,"column":0},"end":{"line":71,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["post","tags","description","security","bearerAuth","parameters","requestBody","content","schema","$ref","responses","get","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["category.js"],"sourcesContent":["export default {\r\n    \"/api/v1/category/add\" : {\r\n        post: {\r\n          tags: [\"Category\"],\r\n          description: \"Category\",\r\n          security: [\r\n            {\r\n              bearerAuth: [],\r\n            },\r\n          ],\r\n          parameters: [],\r\n          requestBody: {\r\n            content: {\r\n              \"application/json\": {\r\n                schema: {\r\n                  $ref: \"#/components/schemas/Category\",\r\n                },\r\n              },\r\n            },\r\n          },\r\n          responses: {\r\n            200: {\r\n              description: \"successfully\",\r\n            },\r\n            204: {\r\n              description: \"No Content related to the ID provided\",\r\n            },\r\n            401: {\r\n              description: \"User Not Authorized\",\r\n            },\r\n            404: {\r\n              description: \"Product doesn't exist!\",\r\n            },\r\n            500: {\r\n              description: \"Internal Server Error\",\r\n            },\r\n          },\r\n        },\r\n      },\r\n\r\n    \"/api/v1/category/all\" : {\r\n        get: {\r\n          tags: [\"Category\"],\r\n          description: \"Category\",\r\n          security: [],\r\n          parameters: [],\r\n          requestBody: {},\r\n          responses: {\r\n            200: {\r\n              description: \"successfully\",\r\n            },\r\n            204: {\r\n              description: \"No Content related to the ID provided\",\r\n            },\r\n            401: {\r\n              description: \"User Not Authorized\",\r\n            },\r\n            404: {\r\n              description: \"Product doesn't exist!\",\r\n            },\r\n            500: {\r\n              description: \"Internal Server Error\",\r\n            },\r\n          },\r\n        },\r\n      },\r\n    }\r\n\r\n\r\n"],"mappings":";;;;;;eAAe;EACX,sBAAsB,EAAG;IACrBA,IAAI,EAAE;MACJC,IAAI,EAAE,CAAC,UAAU,CAAC;MAClBC,WAAW,EAAE,UAAU;MACvBC,QAAQ,EAAE,CACR;QACEC,UAAU,EAAE;MACd,CAAC,CACF;MACDC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE;QACXC,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE;YACR;UACF;QACF;MACF,CAAC;MACDC,SAAS,EAAE;QACT,GAAG,EAAE;UACHR,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf;MACF;IACF;EACF,CAAC;EAEH,sBAAsB,EAAG;IACrBS,GAAG,EAAE;MACHV,IAAI,EAAE,CAAC,UAAU,CAAC;MAClBC,WAAW,EAAE,UAAU;MACvBC,QAAQ,EAAE,EAAE;MACZE,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE,CAAC,CAAC;MACfI,SAAS,EAAE;QACT,GAAG,EAAE;UACHR,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf;MACF;IACF;EACF;AACF,CAAC;AAAAU,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d00d05ddd340ea1456c2b933db0df7d4ff18d514","contentHash":"5618add948f0347a06ce76e499dec173181f33c1f43f2e87d74658d7582883fd"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\product.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\product.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":21},"end":{"line":23,"column":1}},"3":{"start":{"line":24,"column":24},"end":{"line":40,"column":1}},"4":{"start":{"line":41,"column":15},"end":{"line":282,"column":1}},"5":{"start":{"line":283,"column":0},"end":{"line":283,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["addResponses","description","updateResponses","_default","post","tags","security","bearerAuth","parameters","requestBody","content","schema","$ref","responses","get","summary","required","delete","name","in","type","example","put","default","id","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["product.js"],"sourcesContent":["const addResponses = {\r\n  201: {\r\n    description: 'successfully',\r\n  },\r\n  204: {\r\n    description: 'No Content related to the ID provided',\r\n  },\r\n  401: {\r\n    description: 'User Not Authorized',\r\n  },\r\n  404: {\r\n    description: \"doesn't exist!\",\r\n  },\r\n  500: {\r\n    description: 'Internal Server Error',\r\n  },\r\n};\r\n\r\nconst updateResponses = {\r\n  200: {\r\n    description: 'successfully',\r\n  },\r\n  204: {\r\n    description: 'No Content related to the ID provided',\r\n  },\r\n  401: {\r\n    description: 'User Not Authorized',\r\n  },\r\n  404: {\r\n    description: \" doesn't exist!\",\r\n  },\r\n  500: {\r\n    description: 'Internal Server Error',\r\n  },\r\n};\r\n\r\n\r\nexport default {\r\n    \"/api/v1/products/add\" : {\r\n        post: {\r\n          tags: [\"Product\"],\r\n          description: \" Product \",\r\n          security: [\r\n            {\r\n              bearerAuth: [],\r\n            },\r\n          ],\r\n          parameters: [],\r\n          requestBody: {\r\n            content: {\r\n              \"multipart/form-data\": {\r\n                schema: {\r\n                  $ref: \"#/components/schemas/Product\",\r\n                },\r\n              },\r\n            },\r\n          },\r\n          responses: addResponses\r\n        },\r\n      },\r\n\r\n    \"/api/v1/product/images/add\" : {\r\n      post: {\r\n        tags: [\"Product Images\"],\r\n        description: \" Product attr \",\r\n        security: [\r\n          {\r\n            bearerAuth: [],\r\n          },\r\n        ],\r\n        parameters: [],\r\n        requestBody: {\r\n          content: {\r\n            \"multipart/form-data\": {\r\n              schema: {\r\n                $ref: \"#/components/schemas/ProductImage\",\r\n              },\r\n            },\r\n          },\r\n        },\r\n        responses: addResponses\r\n      },\r\n    },\r\n\r\n\r\n    \"/api/v1/product/variation/add\" : {\r\n      post: {\r\n        tags: [\"Product Attributes\"],\r\n        description: \"Product attr\",\r\n        security: [\r\n          {\r\n            bearerAuth: [],\r\n          },\r\n        ],\r\n        parameters: [],\r\n        requestBody: {\r\n          content: {\r\n            \"multipart/form-data\": {\r\n              schema: {\r\n                $ref: \"#/components/schemas/ProductAttribute\",\r\n              },\r\n            },\r\n          },\r\n        },\r\n        responses: addResponses\r\n      },\r\n    },\r\n\r\n    \"/api/v1/product\" : {\r\n      get: {\r\n        tags: [\"Product\"],\r\n        summary: \"search product\",\r\n        security: [\r\n          {\r\n            bearerAuth: [],\r\n          },\r\n        ],\r\n        parameters: [\r\n          {\r\n            \"in\": \"query\",\r\n          \"name\": \"q\",\r\n           required: true,\r\n         }\r\n        ],\r\n        responses: addResponses\r\n      },\r\n    },\r\n\r\n    \"/api/v1/product/images/add\" : {\r\n      post: {\r\n        tags: [\"Product Images\"],\r\n        description: \" Product attr \",\r\n        security: [\r\n          {\r\n            bearerAuth: [],\r\n          },\r\n        ],\r\n        parameters: [],\r\n        requestBody: {\r\n          content: {\r\n            \"multipart/form-data\": {\r\n              schema: {\r\n                $ref: \"#/components/schemas/ProductImage\",\r\n              },\r\n            },\r\n          },\r\n        },\r\n        responses: addResponses\r\n      },\r\n    },\r\n\r\n\r\n    \"/api/v1/product/variation/add\" : {\r\n      post: {\r\n        tags: [\"Product Attributes\"],\r\n        description: \"Product attr\",\r\n        security: [\r\n          {\r\n            bearerAuth: [],\r\n          },\r\n        ],\r\n        parameters: [],\r\n        requestBody: {\r\n          content: {\r\n            \"multipart/form-data\": {\r\n              schema: {\r\n                $ref: \"#/components/schemas/ProductAttribute\",\r\n              },\r\n            },\r\n          },\r\n        },\r\n        responses: addResponses\r\n      },\r\n    },\r\n\r\n    \"/api/v1/product/rating\" : {\r\n      post: {\r\n        tags: [\"Product\"],\r\n        description: \" Product rating \",\r\n        security: [\r\n          {\r\n            bearerAuth: [],\r\n          },\r\n        ],\r\n        parameters: [],\r\n        requestBody: {\r\n          content: {\r\n            \"application/json\": {\r\n              schema: {\r\n                $ref: \"#/components/schemas/ProductRating\",\r\n              },\r\n            },\r\n          },\r\n        },\r\n        responses: addResponses\r\n      },\r\n    },\r\n\r\n    '/api/v1/products/delete/{id}': {\r\n      delete: {\r\n        tags: ['Product'],\r\n        parameters: [\r\n          {\r\n            name: 'id',\r\n            in: 'path',\r\n            description: 'product id',\r\n            required: true,\r\n            type: 'string',\r\n            example: '3e7b7d4f-d9d0-4ee2-8413-5df9c4ec6491',\r\n          },\r\n        ],\r\n        responses: {\r\n          200: {\r\n            description: 'OK',\r\n          },\r\n          500: {\r\n            description: 'Internal Server Error',\r\n          },\r\n          404: {\r\n            description: 'not found',\r\n          },\r\n          401: {\r\n            description: \"Not Authorized\",\r\n          },\r\n          403: {\r\n            description: \"Forbidden Access\",\r\n          },\r\n        },\r\n      },\r\n    },\r\n\r\n    '/api/v1/products/update/{id}': {\r\n      put: {\r\n        tags: ['Product'],\r\n        description: ' Product ',\r\n        security: [\r\n          {\r\n            bearerAuth: [],\r\n          },\r\n        ],\r\n        parameters: [\r\n          {\r\n            in: 'path',\r\n            name: 'id',\r\n            required: true,\r\n          },\r\n        ],\r\n        requestBody: {\r\n          content: {\r\n            'multipart/form-data': {\r\n              schema: {\r\n                $ref: '#/components/schemas/Product',\r\n              },\r\n            },\r\n          },\r\n        },\r\n        responses: updateResponses,\r\n      },\r\n    },\r\n\r\n\r\n  '/api/v1/product/images/update/{id}': {\r\n    put: {\r\n      tags: ['Product Images'],\r\n      description: ' Product Images ',\r\n      security: [\r\n        {\r\n          bearerAuth: [],\r\n        },\r\n      ],\r\n      parameters: [\r\n        {\r\n          in: 'path',\r\n          name: 'id',\r\n          required: true,\r\n        },\r\n      ],\r\n      requestBody: {\r\n        content: {\r\n          'multipart/form-data': {\r\n            schema: {\r\n              $ref: '#/components/schemas/ProductImage',\r\n            },\r\n          },\r\n        },\r\n      },\r\n      responses: updateResponses,\r\n    },\r\n  },\r\n\r\n\r\n  '/api/v1/product/variation/update/{id}': {\r\n    put: {\r\n      tags: ['Product Attributes'],\r\n      description: 'Product attr',\r\n      security: [\r\n        {\r\n          bearerAuth: [],\r\n        },\r\n      ],\r\n      parameters: [\r\n        {\r\n          in: 'path',\r\n          name: 'id',\r\n          required: true,\r\n        },\r\n      ],\r\n      requestBody: {\r\n        content: {\r\n          'multipart/form-data': {\r\n            schema: {\r\n              $ref: '#/components/schemas/ProductAttribute',\r\n            },\r\n            default: {\r\n              id: '1',\r\n            },\r\n          },\r\n        },\r\n      },\r\n      responses: updateResponses,\r\n    },\r\n  },\r\n    }\r\n\r\n    "],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6136e60388273c275c235fd6970184c532bd8a0b","contentHash":"4db3f37867a7c9106bb0ff5888c13098a928882a00de4607e53e44b9de911f64"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\wishlist.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\wishlist.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":155,"column":1}},"3":{"start":{"line":156,"column":0},"end":{"line":156,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["post","tags","description","security","bearerAuth","requestBody","content","schema","type","required","properties","productId","responses","example","message","status","get","id","name","slug","model","image","keyword","categoryId","userId","createdAt","updatedAt","Category","delete","parameters","in","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["wishlist.js"],"sourcesContent":["export default {\r\n  '/api/v1/product/wishlist': {\r\n    post: {\r\n      tags: ['Product wishlist'],\r\n      description: 'add a Product to wishlist ',\r\n      security: [\r\n        {\r\n          bearerAuth: [],\r\n        },\r\n      ],\r\n      requestBody: {\r\n        content: {\r\n          'application/json': {\r\n            schema: {\r\n              type: 'object',\r\n              required: ['product_id'],\r\n              properties: {\r\n                productId: {\r\n                  type: 'string',\r\n                  description: 'product id',\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n      responses: {\r\n        201: {\r\n          description: 'ok',\r\n          content: {\r\n            'application/json': {\r\n              schema: {\r\n                type: 'object',\r\n                example: {\r\n                  message: 'product added to wishlist',\r\n                  status: 'success',\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n        400: {\r\n          description: 'Product already exists in wishlist',\r\n          content: {\r\n            'application/json': {\r\n              schema: {\r\n                type: 'object',\r\n                example: {\r\n                  message: 'Product already exists in wishlist',\r\n                  status: 'failed',\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n        500: {\r\n          description: 'internal server error',\r\n        },\r\n      },\r\n    },\r\n    get: {\r\n      tags: ['Product wishlist'],\r\n      description: 'get all products in wishlist',\r\n      security: [\r\n        {\r\n          bearerAuth: [],\r\n        },\r\n      ],\r\n      responses: {\r\n        200: {\r\n          description: 'products in wishlist',\r\n          content: {\r\n            'application/json': {\r\n              schema: {\r\n                type: 'array',\r\n                example: {\r\n                  id: 'f7c0bc5c-28f2-4c54-9ada-3d07fcad8e3b',\r\n                  name: '\"chips 101\"',\r\n                  slug: '\"chips-101\"',\r\n                  description: '\"food test\"',\r\n                  model: '\"unhealthy model\"',\r\n                  image:\r\n                    'http://res.cloudinary.com/djxd7l6ve/image/upload/v1679641211/nxxhn78w2wxv3qmkhu6j.jpg',\r\n                  keyword: '\"foody\" ',\r\n                  status: null,\r\n                  categoryId: 2,\r\n                  userId: 'f23b1f62-d719-4774-997e-223b8232214a',\r\n                  createdAt: '2023-03-24T07:00:13.461Z',\r\n                  updatedAt: '2023-03-24T07:00:13.461Z',\r\n                  Category: {\r\n                    id: 2,\r\n                    name: 'unhealthy',\r\n                    status: 'available',\r\n                    createdAt: '2023-03-24T06:59:28.217Z',\r\n                    updatedAt: '2023-03-24T06:59:28.217Z',\r\n                  },\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n  '/api/v1/product/wishlist/{product}': {\r\n    delete: {\r\n      tags: ['Product wishlist'],\r\n      description: 'add a Product to wishlist ',\r\n      security: [\r\n        {\r\n          bearerAuth: [],\r\n        },\r\n      ],\r\n      parameters: [\r\n        {\r\n          name: 'product',\r\n          in: 'path',\r\n          description: 'product id',\r\n          required: true,\r\n          type: 'string',\r\n          example: '3e7b7d4f-d9d0-4ee2-8413-5df9c4ec6491',\r\n        },\r\n      ],\r\n      responses: {\r\n        200: {\r\n          description: 'ok',\r\n          content: {\r\n            'application/json': {\r\n              schema: {\r\n                type: 'object',\r\n                example: { message: 'removed from wishlist' },\r\n              },\r\n            },\r\n          },\r\n        },\r\n        400: {\r\n          description: 'failed',\r\n          content: {\r\n            'application/json': {\r\n              schema: {\r\n                type: 'object',\r\n                example: {\r\n                  message: 'Product does not exists in wishlist',\r\n                  status: 'failed',\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n        500: {\r\n          description: 'internal server error',\r\n        },\r\n      },\r\n    },\r\n  },\r\n};\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9ac74dba7e14f1158497963658e33d0a1966196d","contentHash":"01e60b3f28fab9c24a42cd2b2fa894dd1752e0b027fc74043437a9cc3024691b"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\buyerViewSingleProd.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\buyerViewSingleProd.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":32,"column":1}},"3":{"start":{"line":33,"column":0},"end":{"line":33,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["get","tags","description","security","parameters","name","in","required","type","responses","message","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["buyerViewSingleProd.js"],"sourcesContent":["export default {\r\n  '/api/v1/products/{id}': {\r\n    get: {\r\n      tags: ['Product'],\r\n      description: 'User is able to view single product',\r\n      security:[],\r\n      parameters: [\r\n        {\r\n          name: 'id',\r\n          in: 'path',\r\n          description: 'ID of a product user wants to view',\r\n          required: true,\r\n          type: 'integer',\r\n        },\r\n      ],\r\n      responses: {\r\n        200: {\r\n          description: 'User is able to view single product',\r\n        },\r\n        401: {\r\n          description: { message: 'access dinied' },\r\n        },\r\n      },\r\n    },\r\n  },\r\n};\r\n"],"mappings":";;;;;;eAAe;EACb,uBAAuB,EAAE;IACvBA,GAAG,EAAE;MACHC,IAAI,EAAE,CAAC,SAAS,CAAC;MACjBC,WAAW,EAAE,qCAAqC;MAClDC,QAAQ,EAAC,EAAE;MACXC,UAAU,EAAE,CACV;QACEC,IAAI,EAAE,IAAI;QACVC,EAAE,EAAE,MAAM;QACVJ,WAAW,EAAE,oCAAoC;QACjDK,QAAQ,EAAE,IAAI;QACdC,IAAI,EAAE;MACR,CAAC,CACF;MACDC,SAAS,EAAE;QACT,GAAG,EAAE;UACHP,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;YAAEQ,OAAO,EAAE;UAAgB;QAC1C;MACF;IACF;EACF;AACF,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"00cd6de5392ad6bdd169635dc0ffe15967049782","contentHash":"e0d2cfee5ff5958699fd1de1c30fa752dce12e8894cec2d4f5db7903cb04697a"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\recommendedProduct.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\recommendedProduct.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":25,"column":1}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["get","tags","description","parameters","responses","message","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["recommendedProduct.js"],"sourcesContent":["export default {\r\n  '/api/v1/products/view/recommendations': {\r\n    get: {\r\n      tags: ['Buyers'],\r\n      description: 'User should be able to view recommended products',\r\n      parameters: [],\r\n      responses: {\r\n        200: {\r\n          description: 'User is able to view recommended products',\r\n        },\r\n        401: {\r\n          description: { message: 'access dinied' },\r\n        },\r\n      },\r\n    },\r\n  },\r\n};\r\n"],"mappings":";;;;;;eAAe;EACb,uCAAuC,EAAE;IACvCA,GAAG,EAAE;MACHC,IAAI,EAAE,CAAC,QAAQ,CAAC;MAChBC,WAAW,EAAE,kDAAkD;MAC/DC,UAAU,EAAE,EAAE;MACdC,SAAS,EAAE;QACT,GAAG,EAAE;UACHF,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;YAAEG,OAAO,EAAE;UAAgB;QAC1C;MACF;IACF;EACF;AACF,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cc3c701b4e5a0cf82f2857399979833e99392a96","contentHash":"1c6376dc672b90acf618e44fe6b3dd9828b547aa96101c1e1fd111f60a14cc8b"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\paymentCheckout.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\paymentCheckout.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":84,"column":1}},"3":{"start":{"line":85,"column":0},"end":{"line":85,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["post","tags","summary","security","bearerAuth","parameters","requestBody","content","schema","$ref","example","location","responses","description","cardNumber","exp_month","exp_year","cvcNumber","currency","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["paymentCheckout.js"],"sourcesContent":["export default {\r\n  '/api/v1/checkout': {\r\n    post: {\r\n      tags: ['payment checkout'],\r\n      summary: 'Checkout process',\r\n      security: [\r\n        {\r\n          bearerAuth: [],\r\n        },\r\n      ],\r\n      parameters: [],\r\n      requestBody: {\r\n        content: {\r\n          'application/json': {\r\n            schema: {\r\n              $ref: '#/components/schemas/shoppingCart',\r\n            },\r\n            example: {\r\n              location: 'Rwanda',\r\n            },\r\n          },\r\n        },\r\n      },\r\n      responses: {\r\n        201: {\r\n          description: 'successfully',\r\n        },\r\n        401: {\r\n          description: 'User Not Authorized',\r\n        },\r\n        404: {\r\n          description: \"Product doesn't exist!\",\r\n        },\r\n        500: {\r\n          description: 'Internal Server Error',\r\n        },\r\n      },\r\n    },\r\n  },\r\n  '/api/v1/checkout/payment': {\r\n    post: {\r\n      tags: ['payment checkout'],\r\n      summary: 'Checkout process, paying the order',\r\n      security: [\r\n        {\r\n          bearerAuth: [],\r\n        },\r\n      ],\r\n      parameters: [],\r\n      requestBody: {\r\n        content: {\r\n          'application/json': {\r\n            schema: {\r\n              $ref: '#/components/schemas/shoppingCart',\r\n            },\r\n            example: {\r\n              cardNumber: '4242424242424242',\r\n              exp_month: 12,\r\n              exp_year: 2024,\r\n              cvcNumber: '123',\r\n              currency: 'rwf'\r\n            },\r\n          },\r\n        },\r\n      },\r\n      responses: {\r\n        201: {\r\n          description: 'successfully',\r\n        },\r\n        401: {\r\n          description: 'User Not Authorized',\r\n        },\r\n        404: {\r\n          description: \"Product doesn't exist!\",\r\n        },\r\n        500: {\r\n          description: 'Internal Server Error',\r\n        },\r\n      },\r\n    },\r\n  },\r\n};"],"mappings":";;;;;;eAAe;EACb,kBAAkB,EAAE;IAClBA,IAAI,EAAE;MACJC,IAAI,EAAE,CAAC,kBAAkB,CAAC;MAC1BC,OAAO,EAAE,kBAAkB;MAC3BC,QAAQ,EAAE,CACR;QACEC,UAAU,EAAE;MACd,CAAC,CACF;MACDC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE;QACXC,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE;YACR,CAAC;YACDC,OAAO,EAAE;cACPC,QAAQ,EAAE;YACZ;UACF;QACF;MACF,CAAC;MACDC,SAAS,EAAE;QACT,GAAG,EAAE;UACHC,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf;MACF;IACF;EACF,CAAC;EACD,0BAA0B,EAAE;IAC1Bb,IAAI,EAAE;MACJC,IAAI,EAAE,CAAC,kBAAkB,CAAC;MAC1BC,OAAO,EAAE,oCAAoC;MAC7CC,QAAQ,EAAE,CACR;QACEC,UAAU,EAAE;MACd,CAAC,CACF;MACDC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE;QACXC,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE;YACR,CAAC;YACDC,OAAO,EAAE;cACPI,UAAU,EAAE,kBAAkB;cAC9BC,SAAS,EAAE,EAAE;cACbC,QAAQ,EAAE,IAAI;cACdC,SAAS,EAAE,KAAK;cAChBC,QAAQ,EAAE;YACZ;UACF;QACF;MACF,CAAC;MACDN,SAAS,EAAE;QACT,GAAG,EAAE;UACHC,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf,CAAC;QACD,GAAG,EAAE;UACHA,WAAW,EAAE;QACf;MACF;IACF;EACF;AACF,CAAC;AAAAM,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"048267ef494cd35c9f1b22a24714818075a50812","contentHash":"9f7a5a2ffcca2f75dbaab17d6995004896e8391a5b953811fb0c33d4aa3c012c"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\Cart.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\Cart.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":173,"column":1}},"3":{"start":{"line":174,"column":0},"end":{"line":174,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["post","tags","description","security","bearerAuth","parameters","requestBody","content","schema","$ref","responses","get","patch","example","id","quantity","productId","delete","summary","type","properties","status","data","message","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["Cart.js"],"sourcesContent":["export default {\r\n  '/api/v1/shoppingCart/add': {\r\n    post: {\r\n      tags: ['Shopping Cart'],\r\n      description: 'shopping cart',\r\n      security: [\r\n        {\r\n          bearerAuth: [],\r\n        },\r\n      ],\r\n      parameters: [],\r\n      requestBody: {\r\n        content: {\r\n          'application/json': {\r\n            schema: {\r\n              $ref: '#/components/schemas/shoppingCart',\r\n            },\r\n          },\r\n        },\r\n      },\r\n      responses: {\r\n        201: {\r\n          description: 'successfully',\r\n        },\r\n        401: {\r\n          description: 'User Not Authorized',\r\n        },\r\n        404: {\r\n          description: \"Product doesn't exist!\",\r\n        },\r\n        500: {\r\n          description: 'Internal Server Error',\r\n        },\r\n      },\r\n    },\r\n  },\r\n\r\n  '/api/v1/shoppingCart/view': {\r\n    get: {\r\n      tags: ['Shopping Cart'],\r\n      description: 'Viewing All Carts',\r\n      parameters: [],\r\n      requestBody: {},\r\n      responses: {\r\n        201: {\r\n          description: 'Viewing Cart',\r\n        },\r\n        401: {\r\n          description: 'User Not Authorized',\r\n        },\r\n        404: {\r\n          description: \"Product doesn't exist!\",\r\n        },\r\n        500: {\r\n          description: 'Internal Server Error',\r\n        },\r\n      },\r\n    },\r\n  },\r\n  \r\n  '/api/v1/shoppingCart/update': {\r\n    patch: {\r\n      tags: ['Shopping Cart'],\r\n      description: 'shopping cart',\r\n      security: [\r\n        {\r\n          bearerAuth: [],\r\n        },\r\n      ],\r\n      parameters: [],\r\n      requestBody: {\r\n        content: {\r\n          'application/json': {\r\n            schema: {\r\n              $ref: '#/components/schemas/shoppingCart',\r\n            },\r\n            example: {\r\n              id: '1',\r\n              quantity: '3',\r\n              productId: '1',\r\n            },\r\n          },\r\n        },\r\n      },\r\n      responses: {\r\n        200: {\r\n          description: 'successfully',\r\n        },\r\n        401: {\r\n          description: 'User Not Authorized',\r\n        },\r\n        404: {\r\n          description: \"Product doesn't exist!\",\r\n        },\r\n        500: {\r\n          description: 'Internal Server Error',\r\n        },\r\n      },\r\n    },\r\n  },\r\n\r\n  '/api/v1/shoppingCart/delete': {\r\n    delete: {\r\n      tags: ['Shopping Cart'],\r\n      description: 'shopping cart',\r\n      security: [\r\n        {\r\n          bearerAuth: [],\r\n        },\r\n      ],\r\n      parameters: [],\r\n      requestBody: {\r\n        content: {\r\n          'application/json': {\r\n            schema: {\r\n              $ref: '#/components/schemas/shoppingCart',\r\n            },\r\n            example: {\r\n              id: '1',\r\n            },\r\n          },\r\n        },\r\n      },\r\n      responses: {\r\n        204: {\r\n          description: 'successfully',\r\n        },\r\n        401: {\r\n          description: 'User Not Authorized',\r\n        },\r\n        404: {\r\n          description: \"Product doesn't exist on the cart!\",\r\n        },\r\n        500: {\r\n          description: 'Internal Server Error',\r\n        },\r\n      },\r\n    },\r\n  },\r\n\r\n  '/api/v1/shoppingCart/clear': {\r\n    delete: {\r\n      tags: ['Shopping Cart'],\r\n      summary: \"Clear the buyer's shopping cart\",\r\n      description:\r\n        \"Clears all the items from the buyer's shopping cart and resets the cart total to zero.\",\r\n      security: [\r\n        {\r\n          bearerAuth: [],\r\n        },\r\n      ],\r\n      responses: {\r\n        200: {\r\n          description: 'Success',\r\n          content: {\r\n            'application/json': {\r\n              schema: {\r\n                type: 'object',\r\n                properties: {\r\n                  status: {\r\n                    type: 'string',\r\n                    description: 'Success status message',\r\n                  },\r\n                  data: {\r\n                    type: 'string',\r\n                    description: 'Total price of the cart',\r\n                  },\r\n                  message: {\r\n                    type: 'string',\r\n                    description: 'Success message',\r\n                  },\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n};"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"acb1f5ace7d5d422769616bb4c2f6cede9927798","contentHash":"ef56a5147abe8068d9ca47239a77b5161e60b2c85d1ef55268f955d4af4c5cfe"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\oauth.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\oauth.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":27,"column":1}},"3":{"start":{"line":28,"column":0},"end":{"line":28,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["oauth.js"],"sourcesContent":["export default {\r\n    \"schemes\": [\r\n        \"http\",\r\n        \"https\"\r\n      ],\r\n    \"/auth/google/redirect\": {\r\n      \"get\": {\r\n        \"tags\": [\r\n          \"Auth\"\r\n        ],\r\n        \"summary\": \"Google authentication redirect endpoint\",\r\n        \"produces\": [\r\n          \"application/json\"\r\n        ],\r\n        \"responses\": {\r\n          \"200\": {\r\n            \"description\": \"Redirect to the user's profile page\"\r\n          },\r\n          \"401\": {\r\n            \"description\": \"Unauthorized\"\r\n          }\r\n        },\r\n        \"security\": [\r\n          {\r\n            \"google_auth\": []\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n  "],"mappings":";;;;;;eAAe;EACX,SAAS,EAAE,CACP,MAAM,EACN,OAAO,CACR;EACH,uBAAuB,EAAE;IACvB,KAAK,EAAE;MACL,MAAM,EAAE,CACN,MAAM,CACP;MACD,SAAS,EAAE,yCAAyC;MACpD,UAAU,EAAE,CACV,kBAAkB,CACnB;MACD,WAAW,EAAE;QACX,KAAK,EAAE;UACL,aAAa,EAAE;QACjB,CAAC;QACD,KAAK,EAAE;UACL,aAAa,EAAE;QACjB;MACF,CAAC;MACD,UAAU,EAAE,CACV;QACE,aAAa,EAAE;MACjB,CAAC;IAEL;EACF;AACF,CAAC;AAAAA,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ed63867d0be601bbf7de08837427a9edafb86565","contentHash":"b623805a5d16166f68725274af9fcf48ddec8ed98e69a871f9da11af9a781cb8"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\items.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\items.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":156,"column":1}},"3":{"start":{"line":157,"column":0},"end":{"line":157,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["get","tags","description","security","bearerAuth","parameters","name","in","schema","type","default","responses","content","properties","status","example","message","items","$ref","exports","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["items.js"],"sourcesContent":["export default {\r\n    \"/api/v1/seller/products\": {\r\n      get: {\r\n        tags: [\"Product\"],\r\n        description: \"Retrieve a list of all items in a seller's collection\",\r\n        security: [\r\n          {\r\n            bearerAuth: [],\r\n          },\r\n        ],\r\n        parameters: [\r\n          {\r\n            name: \"page\",\r\n            in: \"query\",\r\n            description: \"The page number to retrieve. Defaults to 1.\",\r\n            schema: {\r\n              type: \"integer\",\r\n              default: 1,\r\n            },\r\n          },\r\n          {\r\n            name: \"limit\",\r\n            in: \"query\",\r\n            description: \"The number of items per page to retrieve. Defaults to 10.\",\r\n            schema: {\r\n              type: \"integer\",\r\n              default: 10,\r\n            },\r\n          },\r\n        ],\r\n        responses: {\r\n          200: {\r\n            description: \"The list of items in the seller's collection\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: {\r\n                  type: \"object\",\r\n                  properties: {\r\n                    status: {\r\n                      type: \"string\",\r\n                      example: \"success\",\r\n                    },\r\n                    message: {\r\n                      type: \"string\",\r\n                      example: \"Items retrieved successfully\",\r\n                    },\r\n                    items: {\r\n                      type: \"array\",\r\n                      items: {\r\n                        $ref: \"#/components/schemas/Product\",\r\n                      },\r\n                    },\r\n                  },\r\n                },\r\n              },\r\n            },\r\n          },\r\n          400: {\r\n            description: \"Bad request\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: {\r\n                  $ref: \"#/components/schemas/Product\",\r\n                },\r\n              },\r\n            },\r\n          },\r\n          401: {\r\n            description: \"Unauthorized\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: {\r\n                  $ref: \"#/components/schemas/Product\",\r\n                },\r\n              },\r\n            },\r\n          },\r\n          500: {\r\n            description: \"Internal server error\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: {\r\n                  $ref: \"#/components/schemas/Product\",\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  \r\n     \r\n    \"/api/v1/buyer/products\": {\r\n      get: {\r\n        tags: [\"Product\"],\r\n        description: \"Retrieve a list of all items available for purchase\",\r\n        parameters: [\r\n          {\r\n            name: \"page\",\r\n            in: \"query\",\r\n            description: \"The page number to retrieve. Defaults to 1.\",\r\n            schema: {\r\n              type: \"integer\",\r\n              default: 1,\r\n            },\r\n          },\r\n          {\r\n            name: \"limit\",\r\n            in: \"query\",\r\n            description: \"The number of items per page to retrieve. Defaults to 10.\",\r\n            schema: {\r\n              type: \"integer\",\r\n              default: 10,\r\n            },\r\n          },\r\n        ],\r\n        responses: {\r\n          200: {\r\n            description: \"The list of available items\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: {\r\n                  type: \"object\",\r\n                  properties: {\r\n                    status: {\r\n                      type: \"string\",\r\n                      example: \"success\",\r\n                    },\r\n                    message: {\r\n                      type: \"string\",\r\n                      example: \"Items retrieved successfully\",\r\n                    },\r\n                    items: {\r\n                      type: \"array\",\r\n                      items: {\r\n                        $ref: \"#/components/schemas/Product\",\r\n                      },\r\n                    },\r\n                  },\r\n                },\r\n              },\r\n            },\r\n          },\r\n          400: {\r\n            description: \"Bad request\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: {\r\n                  $ref: \"#/components/schemas/Product\",\r\n                },\r\n              },\r\n            },\r\n          },\r\n          500: {\r\n            description: \"Internal server error\",\r\n           \r\n          }  }}}}"],"mappings":";;;;;;eAAe;EACX,yBAAyB,EAAE;IACzBA,GAAG,EAAE;MACHC,IAAI,EAAE,CAAC,SAAS,CAAC;MACjBC,WAAW,EAAE,uDAAuD;MACpEC,QAAQ,EAAE,CACR;QACEC,UAAU,EAAE;MACd,CAAC,CACF;MACDC,UAAU,EAAE,CACV;QACEC,IAAI,EAAE,MAAM;QACZC,EAAE,EAAE,OAAO;QACXL,WAAW,EAAE,6CAA6C;QAC1DM,MAAM,EAAE;UACNC,IAAI,EAAE,SAAS;UACfC,OAAO,EAAE;QACX;MACF,CAAC,EACD;QACEJ,IAAI,EAAE,OAAO;QACbC,EAAE,EAAE,OAAO;QACXL,WAAW,EAAE,2DAA2D;QACxEM,MAAM,EAAE;UACNC,IAAI,EAAE,SAAS;UACfC,OAAO,EAAE;QACX;MACF,CAAC,CACF;MACDC,SAAS,EAAE;QACT,GAAG,EAAE;UACHT,WAAW,EAAE,8CAA8C;UAC3DU,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBJ,MAAM,EAAE;gBACNC,IAAI,EAAE,QAAQ;gBACdI,UAAU,EAAE;kBACVC,MAAM,EAAE;oBACNL,IAAI,EAAE,QAAQ;oBACdM,OAAO,EAAE;kBACX,CAAC;kBACDC,OAAO,EAAE;oBACPP,IAAI,EAAE,QAAQ;oBACdM,OAAO,EAAE;kBACX,CAAC;kBACDE,KAAK,EAAE;oBACLR,IAAI,EAAE,OAAO;oBACbQ,KAAK,EAAE;sBACLC,IAAI,EAAE;oBACR;kBACF;gBACF;cACF;YACF;UACF;QACF,CAAC;QACD,GAAG,EAAE;UACHhB,WAAW,EAAE,aAAa;UAC1BU,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBJ,MAAM,EAAE;gBACNU,IAAI,EAAE;cACR;YACF;UACF;QACF,CAAC;QACD,GAAG,EAAE;UACHhB,WAAW,EAAE,cAAc;UAC3BU,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBJ,MAAM,EAAE;gBACNU,IAAI,EAAE;cACR;YACF;UACF;QACF,CAAC;QACD,GAAG,EAAE;UACHhB,WAAW,EAAE,uBAAuB;UACpCU,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBJ,MAAM,EAAE;gBACNU,IAAI,EAAE;cACR;YACF;UACF;QACF;MACF;IACF;EACF,CAAC;EAGD,wBAAwB,EAAE;IACxBlB,GAAG,EAAE;MACHC,IAAI,EAAE,CAAC,SAAS,CAAC;MACjBC,WAAW,EAAE,qDAAqD;MAClEG,UAAU,EAAE,CACV;QACEC,IAAI,EAAE,MAAM;QACZC,EAAE,EAAE,OAAO;QACXL,WAAW,EAAE,6CAA6C;QAC1DM,MAAM,EAAE;UACNC,IAAI,EAAE,SAAS;UACfC,OAAO,EAAE;QACX;MACF,CAAC,EACD;QACEJ,IAAI,EAAE,OAAO;QACbC,EAAE,EAAE,OAAO;QACXL,WAAW,EAAE,2DAA2D;QACxEM,MAAM,EAAE;UACNC,IAAI,EAAE,SAAS;UACfC,OAAO,EAAE;QACX;MACF,CAAC,CACF;MACDC,SAAS,EAAE;QACT,GAAG,EAAE;UACHT,WAAW,EAAE,6BAA6B;UAC1CU,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBJ,MAAM,EAAE;gBACNC,IAAI,EAAE,QAAQ;gBACdI,UAAU,EAAE;kBACVC,MAAM,EAAE;oBACNL,IAAI,EAAE,QAAQ;oBACdM,OAAO,EAAE;kBACX,CAAC;kBACDC,OAAO,EAAE;oBACPP,IAAI,EAAE,QAAQ;oBACdM,OAAO,EAAE;kBACX,CAAC;kBACDE,KAAK,EAAE;oBACLR,IAAI,EAAE,OAAO;oBACbQ,KAAK,EAAE;sBACLC,IAAI,EAAE;oBACR;kBACF;gBACF;cACF;YACF;UACF;QACF,CAAC;QACD,GAAG,EAAE;UACHhB,WAAW,EAAE,aAAa;UAC1BU,OAAO,EAAE;YACP,kBAAkB,EAAE;cAClBJ,MAAM,EAAE;gBACNU,IAAI,EAAE;cACR;YACF;UACF;QACF,CAAC;QACD,GAAG,EAAE;UACHhB,WAAW,EAAE;QAEf;MAAG;IAAC;EAAC;AAAC,CAAC;AAAAiB,OAAA,CAAAT,OAAA,GAAAU,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"56b7f93d9fa11d89949eb046a8dacde9c9b8b84b","contentHash":"fc4d2bd1cfe4bbe30d80b4246aca3deb25b8643bd3bd9a9353f20d886fb66c3e"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\coupon.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\coupon.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":21},"end":{"line":26,"column":1}},"3":{"start":{"line":27,"column":24},"end":{"line":43,"column":1}},"4":{"start":{"line":44,"column":15},"end":{"line":102,"column":1}},"5":{"start":{"line":103,"column":0},"end":{"line":103,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["addResponses","description","updateResponses","_default","post","tags","security","bearerAuth","parameters","requestBody","content","schema","$ref","responses","type","properties","couponCode","get","exports","default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["coupon.js"],"sourcesContent":["const addResponses = {\r\n    201: {\r\n      description: 'successfully created',\r\n    },\r\n    204: {\r\n      description: 'No Content related to the ID provided',\r\n    },\r\n    401: {\r\n      description: 'User Not Authorized',\r\n    },\r\n    403: {\r\n        description: \" Forbidden\",\r\n    },\r\n    404: {\r\n      description: \"Not found\",\r\n    },\r\n    500: {\r\n      description: 'Internal Server Error',\r\n    },\r\n  };\r\n  \r\n  const updateResponses = {\r\n    200: {\r\n      description: 'ok',\r\n    },\r\n    204: {\r\n      description: 'No Content related to the ID provided',\r\n    },\r\n    401: {\r\n      description: 'User Not Authorized',\r\n    },\r\n    404: {\r\n      description: \"Coupon doesn't exist!\",\r\n    },\r\n    500: {\r\n      description: 'Internal Server Error',\r\n    },\r\n  };\r\n  \r\n  \r\n  export default {\r\n      \"/api/v1/coupons/add\" : {\r\n          post: {\r\n            tags: [\"Coupon\"],\r\n            description: \" Coupon discounts\",\r\n            security: [\r\n              {\r\n                bearerAuth: [],\r\n              },\r\n            ],\r\n            parameters: [],\r\n            requestBody: {\r\n              content: {\r\n                \"application/json\": {\r\n                  schema: {\r\n                    $ref: \"#/components/schemas/Coupon\",\r\n                  },\r\n                },\r\n              },\r\n            },\r\n            responses: addResponses\r\n          },\r\n        },\r\n\r\n    \"/api/v1/coupons/apply/coupon\" : {\r\n        post: {\r\n          tags: [\"Coupon\"],\r\n          description: \" Coupon discounts\",\r\n          security: [\r\n            {\r\n              bearerAuth: [],\r\n            },\r\n          ],\r\n          parameters: [],\r\n          requestBody: {\r\n            content: {\r\n              \"application/json\": {\r\n                schema: {\r\n                  \r\n                    type: 'object',\r\n                    properties: {\r\n                      couponCode : {\r\n                        type: 'string',\r\n                        description: 'Coupon Code',\r\n                      },\r\n                    },\r\n                  \r\n                },\r\n              },\r\n            },\r\n          },\r\n          responses: addResponses\r\n        },\r\n      },\r\n\r\n      \"/api/v1/coupons/all\" : {\r\n        get: {\r\n          tags: [\"Coupon\"],\r\n          description: \" Coupon discounts\",\r\n          security: [\r\n            {\r\n              bearerAuth: [],\r\n            },\r\n          ],\r\n          responses: updateResponses\r\n        },\r\n        description: 'All Coupons',\r\n      }\r\n    }"],"mappings":";;;;;;AAAA,MAAMA,YAAY,GAAG;EACjB,GAAG,EAAE;IACHC,WAAW,EAAE;EACf,CAAC;EACD,GAAG,EAAE;IACHA,WAAW,EAAE;EACf,CAAC;EACD,GAAG,EAAE;IACHA,WAAW,EAAE;EACf,CAAC;EACD,GAAG,EAAE;IACDA,WAAW,EAAE;EACjB,CAAC;EACD,GAAG,EAAE;IACHA,WAAW,EAAE;EACf,CAAC;EACD,GAAG,EAAE;IACHA,WAAW,EAAE;EACf;AACF,CAAC;AAED,MAAMC,eAAe,GAAG;EACtB,GAAG,EAAE;IACHD,WAAW,EAAE;EACf,CAAC;EACD,GAAG,EAAE;IACHA,WAAW,EAAE;EACf,CAAC;EACD,GAAG,EAAE;IACHA,WAAW,EAAE;EACf,CAAC;EACD,GAAG,EAAE;IACHA,WAAW,EAAE;EACf,CAAC;EACD,GAAG,EAAE;IACHA,WAAW,EAAE;EACf;AACF,CAAC;AAAC,IAAAE,QAAA,GAGa;EACX,qBAAqB,EAAG;IACpBC,IAAI,EAAE;MACJC,IAAI,EAAE,CAAC,QAAQ,CAAC;MAChBJ,WAAW,EAAE,mBAAmB;MAChCK,QAAQ,EAAE,CACR;QACEC,UAAU,EAAE;MACd,CAAC,CACF;MACDC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE;QACXC,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cACNC,IAAI,EAAE;YACR;UACF;QACF;MACF,CAAC;MACDC,SAAS,EAAEb;IACb;EACF,CAAC;EAEL,8BAA8B,EAAG;IAC7BI,IAAI,EAAE;MACJC,IAAI,EAAE,CAAC,QAAQ,CAAC;MAChBJ,WAAW,EAAE,mBAAmB;MAChCK,QAAQ,EAAE,CACR;QACEC,UAAU,EAAE;MACd,CAAC,CACF;MACDC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE;QACXC,OAAO,EAAE;UACP,kBAAkB,EAAE;YAClBC,MAAM,EAAE;cAEJG,IAAI,EAAE,QAAQ;cACdC,UAAU,EAAE;gBACVC,UAAU,EAAG;kBACXF,IAAI,EAAE,QAAQ;kBACdb,WAAW,EAAE;gBACf;cACF;YAEJ;UACF;QACF;MACF,CAAC;MACDY,SAAS,EAAEb;IACb;EACF,CAAC;EAED,qBAAqB,EAAG;IACtBiB,GAAG,EAAE;MACHZ,IAAI,EAAE,CAAC,QAAQ,CAAC;MAChBJ,WAAW,EAAE,mBAAmB;MAChCK,QAAQ,EAAE,CACR;QACEC,UAAU,EAAE;MACd,CAAC,CACF;MACDM,SAAS,EAAEX;IACb,CAAC;IACDD,WAAW,EAAE;EACf;AACF,CAAC;AAAAiB,OAAA,CAAAC,OAAA,GAAAhB,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"01069d7476a686addd35d5c52b37a73f6137eeba","contentHash":"fe1015a20192df650cb6a72c62cff1784b0b3cc9d232b20b94540970c6b769d7"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\viewOrderDetails.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\viewOrderDetails.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":75,"column":1}},"3":{"start":{"line":76,"column":0},"end":{"line":76,"column":27}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["get","summary","tags","parameters","in","name","required","description","schema","type","responses","content","properties","data","items","$ref","exports","default","_default"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\docs\\","sources":["viewOrderDetails.js"],"sourcesContent":["export default {\r\n'/api/v1/orderDetails/{trackingId}': {\r\n    get: {\r\n      summary: \"Get order details by tracking number\",\r\n      tags: [\r\n        \"Order Details\"\r\n      ],\r\n      parameters: [\r\n        {\r\n        in: \"path\",\r\n          name: \"trackingId\",\r\n        required: true,\r\n          description: \"Tracking number of the order to retrieve details for\",\r\n          schema: {\r\n            type: \"string\"\r\n          }\r\n        }\r\n      ],\r\n      responses: {\r\n        200: {\r\n          description: 'Order details retrieved successfully',\r\n          content: {\r\n            \"application/json\":{\r\n                schema: {\r\n                    type: \"object\",\r\n                    properties: {\r\n                        data: {\r\n                            type: \"array\",\r\n                            items : {\r\n                                $ref: \"#/components/schemas/OrderDetails\"\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n          }\r\n        },\r\n        404: {\r\n          description: 'Order not found',\r\n          \"content\": {\r\n            \"application/json\": {\r\n                \"schema\": {\r\n                    \"type\": \"object\",\r\n                    \"properties\": {\r\n                        \"message\": {\r\n                            \"type\": \"string\",\r\n                            \"example\": \"Order not found\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }   \r\n        },\r\n        500:{\r\n          description:'internal server error',\r\n          content:{\r\n            \"application/json\": {\r\n                \"schema\": {\r\n                    \"type\": \"object\",\r\n                    \"properties\": {\r\n                        \"message\": {\r\n                            \"type\": \"string\",\r\n                            \"example\": \"Server error\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n          }\r\n        }\r\n      },\r\n    },\r\n  },\r\n};\r\n  \r\n  "],"mappings":";;;;;;eAAe;EACf,mCAAmC,EAAE;IACjCA,GAAG,EAAE;MACHC,OAAO,EAAE,sCAAsC;MAC/CC,IAAI,EAAE,CACJ,eAAe,CAChB;MACDC,UAAU,EAAE,CACV;QACAC,EAAE,EAAE,MAAM;QACRC,IAAI,EAAE,YAAY;QACpBC,QAAQ,EAAE,IAAI;QACZC,WAAW,EAAE,sDAAsD;QACnEC,MAAM,EAAE;UACNC,IAAI,EAAE;QACR;MACF,CAAC,CACF;MACDC,SAAS,EAAE;QACT,GAAG,EAAE;UACHH,WAAW,EAAE,sCAAsC;UACnDI,OAAO,EAAE;YACP,kBAAkB,EAAC;cACfH,MAAM,EAAE;gBACJC,IAAI,EAAE,QAAQ;gBACdG,UAAU,EAAE;kBACRC,IAAI,EAAE;oBACFJ,IAAI,EAAE,OAAO;oBACbK,KAAK,EAAG;sBACJC,IAAI,EAAE;oBACV;kBACJ;gBACJ;cACJ;YACJ;UACF;QACF,CAAC;QACD,GAAG,EAAE;UACHR,WAAW,EAAE,iBAAiB;UAC9B,SAAS,EAAE;YACT,kBAAkB,EAAE;cAChB,QAAQ,EAAE;gBACN,MAAM,EAAE,QAAQ;gBAChB,YAAY,EAAE;kBACV,SAAS,EAAE;oBACP,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE;kBACf;gBACJ;cACJ;YACJ;UACJ;QACA,CAAC;QACD,GAAG,EAAC;UACFA,WAAW,EAAC,uBAAuB;UACnCI,OAAO,EAAC;YACN,kBAAkB,EAAE;cAChB,QAAQ,EAAE;gBACN,MAAM,EAAE,QAAQ;gBAChB,YAAY,EAAE;kBACV,SAAS,EAAE;oBACP,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE;kBACf;gBACJ;cACJ;YACJ;UACF;QACF;MACF;IACF;EACF;AACF,CAAC;AAAAK,OAAA,CAAAC,OAAA,GAAAC,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"199c7f064f09b9bf0a21c5d2afd32e633ca8e162","contentHash":"c82b0cb03af6b61bf9782ecc0bf686068bc4557b71b9cd093c1ede93f796897f"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\shoppingCart\\shoppingCartRoutes.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\shoppingCart\\shoppingCartRoutes.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":57}},"3":{"start":{"line":8,"column":12},"end":{"line":8,"column":44}},"4":{"start":{"line":9,"column":27},"end":{"line":9,"column":98}},"5":{"start":{"line":10,"column":15},"end":{"line":10,"column":74}},"6":{"start":{"line":11,"column":27},"end":{"line":11,"column":98}},"7":{"start":{"line":12,"column":28},"end":{"line":12,"column":100}},"8":{"start":{"line":13,"column":39},"end":{"line":13,"column":93}},"9":{"start":{"line":14,"column":19},"end":{"line":14,"column":44}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":144}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":143}},"12":{"start":{"line":17,"column":0},"end":{"line":17,"column":150}},"13":{"start":{"line":18,"column":0},"end":{"line":18,"column":155}},"14":{"start":{"line":19,"column":0},"end":{"line":19,"column":148}},"15":{"start":{"line":20,"column":0},"end":{"line":20,"column":135}},"16":{"start":{"line":21,"column":0},"end":{"line":21,"column":138}},"17":{"start":{"line":22,"column":0},"end":{"line":22,"column":78}},"18":{"start":{"line":23,"column":15},"end":{"line":23,"column":25}},"19":{"start":{"line":24,"column":0},"end":{"line":24,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":31}},"loc":{"start":{"line":13,"column":37},"end":{"line":13,"column":95}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":92}},"type":"cond-expr","locations":[{"start":{"line":13,"column":70},"end":{"line":13,"column":73}},{"start":{"line":13,"column":76},"end":{"line":13,"column":92}}],"line":13},"1":{"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":67}},"type":"binary-expr","locations":[{"start":{"line":13,"column":46},"end":{"line":13,"column":49}},{"start":{"line":13,"column":53},"end":{"line":13,"column":67}}],"line":13}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1},"f":{"0":1},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"names":["_express","_interopRequireDefault","require","_auth","_clearCartController","_viewing","_addToCartController","_updateCartController","obj","__esModule","default","CartRoutes","express","Router","post","auth","isUserEnabled","addToCart","get","viewCart","patch","updateCart","delete","deleteCartItem","clearCart","checkout","pay","viewOrderDetails","_default","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\routes\\shoppingCart\\","sources":["shoppingCartRoutes.js"],"sourcesContent":["import express from 'express';\r\nimport { auth } from '../../middleware/auth';\r\nimport { clearCart } from '../../controllers/shoppingCartController/clearCartController';\r\nimport { isUserEnabled } from '../../middleware/auth';\r\nimport { viewOrderDetails } from '../../controllers/shoppingCartController/viewing';\r\nimport {\r\n  addToCart,\r\n  viewCart,\r\n  checkout,\r\n  pay\r\n} from '../../controllers/shoppingCartController/addToCartController';\r\nimport {\r\n  updateCart,\r\n  deleteCartItem,\r\n} from '../../controllers/shoppingCartController/updateCartController';\r\nconst CartRoutes = express.Router();\r\nCartRoutes.post(\r\n  '/api/v1/shoppingCart/add',\r\n  auth(['vendor', 'buyer', 'admin']),\r\n  isUserEnabled,\r\n  addToCart\r\n);\r\nCartRoutes.get(\r\n  '/api/v1/shoppingCart/view',\r\n  auth(['vendor', 'buyer', 'admin']),\r\n  isUserEnabled,\r\n  viewCart\r\n);\r\nCartRoutes.patch(\r\n  '/api/v1/shoppingCart/update',\r\n  auth(['vendor', 'buyer', 'admin']),\r\n  isUserEnabled,\r\n  updateCart\r\n);\r\nCartRoutes.delete(\r\n  '/api/v1/shoppingCart/delete',\r\n  auth(['vendor', 'buyer', 'admin']),\r\n  isUserEnabled,\r\n  deleteCartItem\r\n);\r\nCartRoutes.delete(\r\n  '/api/v1/shoppingCart/clear',\r\n  auth(['vendor', 'buyer', 'admin']),\r\n  isUserEnabled,\r\n  clearCart\r\n);\r\nCartRoutes.post(\r\n  '/api/v1/checkout',\r\n  auth(['vendor', 'buyer', 'admin']),\r\n  isUserEnabled,\r\n  checkout\r\n);\r\nCartRoutes.post(\r\n  '/api/v1/checkout/payment',\r\n  auth(['vendor', 'buyer', 'admin']),\r\n  isUserEnabled,\r\n  pay\r\n);\r\nCartRoutes.get(\r\n  '/api/v1/orderDetails/:trackingId',\r\n  viewOrderDetails\r\n)\r\n\r\nexport default CartRoutes;\r\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,oBAAA,GAAAF,OAAA;AAEA,IAAAG,QAAA,GAAAH,OAAA;AACA,IAAAI,oBAAA,GAAAJ,OAAA;AAMA,IAAAK,qBAAA,GAAAL,OAAA;AAGuE,SAAAD,uBAAAO,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AACvE,MAAMG,UAAU,GAAGC,gBAAO,CAACC,MAAM,EAAE;AACnCF,UAAU,CAACG,IAAI,CACb,0BAA0B,EAC1B,IAAAC,UAAI,EAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,EAClCC,mBAAa,EACbC,8BAAS,CACV;AACDN,UAAU,CAACO,GAAG,CACZ,2BAA2B,EAC3B,IAAAH,UAAI,EAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,EAClCC,mBAAa,EACbG,6BAAQ,CACT;AACDR,UAAU,CAACS,KAAK,CACd,6BAA6B,EAC7B,IAAAL,UAAI,EAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,EAClCC,mBAAa,EACbK,gCAAU,CACX;AACDV,UAAU,CAACW,MAAM,CACf,6BAA6B,EAC7B,IAAAP,UAAI,EAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,EAClCC,mBAAa,EACbO,oCAAc,CACf;AACDZ,UAAU,CAACW,MAAM,CACf,4BAA4B,EAC5B,IAAAP,UAAI,EAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,EAClCC,mBAAa,EACbQ,8BAAS,CACV;AACDb,UAAU,CAACG,IAAI,CACb,kBAAkB,EAClB,IAAAC,UAAI,EAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,EAClCC,mBAAa,EACbS,6BAAQ,CACT;AACDd,UAAU,CAACG,IAAI,CACb,0BAA0B,EAC1B,IAAAC,UAAI,EAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,EAClCC,mBAAa,EACbU,wBAAG,CACJ;AACDf,UAAU,CAACO,GAAG,CACZ,kCAAkC,EAClCS,yBAAgB,CACjB;AAAA,IAAAC,QAAA,GAEcjB,UAAU;AAAAkB,OAAA,CAAAnB,OAAA,GAAAkB,QAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d4f1f46736426ae1d980a869756ab88d92343dc3","contentHash":"0961667b4e02fa227e1959d1a266ad0a9a537348950fad502d0d25060b695e82"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\shoppingCartController\\clearCartController.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\shoppingCartController\\clearCartController.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":27}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":30},"end":{"line":8,"column":75}},"4":{"start":{"line":9,"column":39},"end":{"line":9,"column":93}},"5":{"start":{"line":10,"column":18},"end":{"line":36,"column":2}},"6":{"start":{"line":11,"column":18},"end":{"line":11,"column":29}},"7":{"start":{"line":12,"column":20},"end":{"line":17,"column":4}},"8":{"start":{"line":18,"column":21},"end":{"line":22,"column":4}},"9":{"start":{"line":23,"column":2},"end":{"line":28,"column":3}},"10":{"start":{"line":24,"column":4},"end":{"line":27,"column":7}},"11":{"start":{"line":29,"column":2},"end":{"line":35,"column":5}},"12":{"start":{"line":37,"column":0},"end":{"line":37,"column":30}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":31}},"loc":{"start":{"line":9,"column":37},"end":{"line":9,"column":95}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":60},"end":{"line":10,"column":61}},"loc":{"start":{"line":10,"column":80},"end":{"line":36,"column":1}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":92}},"type":"cond-expr","locations":[{"start":{"line":9,"column":70},"end":{"line":9,"column":73}},{"start":{"line":9,"column":76},"end":{"line":9,"column":92}}],"line":9},"1":{"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":67}},"type":"binary-expr","locations":[{"start":{"line":9,"column":46},"end":{"line":9,"column":49}},{"start":{"line":9,"column":53},"end":{"line":9,"column":67}}],"line":9},"2":{"loc":{"start":{"line":23,"column":2},"end":{"line":28,"column":3}},"type":"if","locations":[{"start":{"line":23,"column":2},"end":{"line":28,"column":3}},{"start":{"line":23,"column":2},"end":{"line":28,"column":3}}],"line":23}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1},"f":{"0":1,"1":0},"b":{"0":[0,1],"1":[1,1],"2":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_handlingTryCatchBlocks","obj","__esModule","default","clearCart","asyncWrapper","req","res","buyerId","user","id","cartItems","db","shoppingCarts","destroy","where","buyer","cartStatus","totalPrice","findAll","status","json","t","message","data","totalAmount","length","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\shoppingCartController\\","sources":["clearCartController.js"],"sourcesContent":["import db from '../../database/models';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\n\r\nexport const clearCart = asyncWrapper(async (req, res) => {\r\n    const buyerId = req.user.id;\r\n    const cartItems =  await db.shoppingCarts.destroy({\r\n        where: {\r\n          buyer: buyerId,\r\n          cartStatus: 'active'\r\n        }\r\n      });\r\n\r\n      const totalPrice =  await db.shoppingCarts.findAll({\r\n        where: {\r\n          buyer: buyerId\r\n        }\r\n      });\r\n    \r\n      if (cartItems === 0) {\r\n        return res.status(200).json({\r\n          status: req.t('success'),\r\n          message: req.t('cart_already_empty')\r\n        });\r\n      }\r\n\r\n    return res.status(200).json({\r\n    status: req.t('success'),\r\n    message: req.t('cart_cleared'),\r\n    data: req.t('total_price', { totalAmount: totalPrice.length }),\r\n  });\r\n  });\r\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,uBAAA,GAAAD,OAAA;AAAkE,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE3D,MAAMG,SAAS,GAAG,IAAAC,oCAAY,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtD,MAAMC,OAAO,GAAGF,GAAG,CAACG,IAAI,CAACC,EAAE;EAC3B,MAAMC,SAAS,GAAI,MAAMC,eAAE,CAACC,aAAa,CAACC,OAAO,CAAC;IAC9CC,KAAK,EAAE;MACLC,KAAK,EAAER,OAAO;MACdS,UAAU,EAAE;IACd;EACF,CAAC,CAAC;EAEF,MAAMC,UAAU,GAAI,MAAMN,eAAE,CAACC,aAAa,CAACM,OAAO,CAAC;IACjDJ,KAAK,EAAE;MACLC,KAAK,EAAER;IACT;EACF,CAAC,CAAC;EAEF,IAAIG,SAAS,KAAK,CAAC,EAAE;IACnB,OAAOJ,GAAG,CAACa,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAC1BD,MAAM,EAAEd,GAAG,CAACgB,CAAC,CAAC,SAAS,CAAC;MACxBC,OAAO,EAAEjB,GAAG,CAACgB,CAAC,CAAC,oBAAoB;IACrC,CAAC,CAAC;EACJ;EAEF,OAAOf,GAAG,CAACa,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAC5BD,MAAM,EAAEd,GAAG,CAACgB,CAAC,CAAC,SAAS,CAAC;IACxBC,OAAO,EAAEjB,GAAG,CAACgB,CAAC,CAAC,cAAc,CAAC;IAC9BE,IAAI,EAAElB,GAAG,CAACgB,CAAC,CAAC,aAAa,EAAE;MAAEG,WAAW,EAAEP,UAAU,CAACQ;IAAO,CAAC;EAC/D,CAAC,CAAC;AACF,CAAC,CAAC;AAACC,OAAA,CAAAvB,SAAA,GAAAA,SAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"79851641ba6baf1d5a02c4a59719425bc1138e66","contentHash":"7bc5244ca1df8b62c378690f5d6c74e5ceaa537d3db6cd28547f99ffc96f77f6"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\shoppingCartController\\viewing.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\shoppingCartController\\viewing.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":34}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":55}},"3":{"start":{"line":8,"column":14},"end":{"line":8,"column":70}},"4":{"start":{"line":9,"column":30},"end":{"line":9,"column":75}},"5":{"start":{"line":10,"column":17},"end":{"line":10,"column":37}},"6":{"start":{"line":11,"column":39},"end":{"line":11,"column":93}},"7":{"start":{"line":12,"column":25},"end":{"line":31,"column":2}},"8":{"start":{"line":13,"column":25},"end":{"line":13,"column":46}},"9":{"start":{"line":14,"column":16},"end":{"line":18,"column":4}},"10":{"start":{"line":19,"column":18},"end":{"line":25,"column":4}},"11":{"start":{"line":26,"column":2},"end":{"line":30,"column":5}},"12":{"start":{"line":32,"column":0},"end":{"line":32,"column":44}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":37},"end":{"line":11,"column":95}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":67},"end":{"line":12,"column":68}},"loc":{"start":{"line":12,"column":87},"end":{"line":31,"column":1}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":92}},"type":"cond-expr","locations":[{"start":{"line":11,"column":70},"end":{"line":11,"column":73}},{"start":{"line":11,"column":76},"end":{"line":11,"column":92}}],"line":11},"1":{"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":67}},"type":"binary-expr","locations":[{"start":{"line":11,"column":46},"end":{"line":11,"column":49}},{"start":{"line":11,"column":53},"end":{"line":11,"column":67}}],"line":11}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":2,"7":1,"8":0,"9":0,"10":0,"11":0,"12":1},"f":{"0":2,"1":0},"b":{"0":[0,2],"1":[2,2]},"inputSourceMap":{"version":3,"names":["_stripe","_interopRequireDefault","require","_models","_handlingTryCatchBlocks","_sequelize","obj","__esModule","default","viewOrderDetails","asyncWrapper","req","res","trackingnumber","params","trackingId","order","db","Order","findOne","where","trackingNumber","details","OrderDetails","findAll","id","Op","in","products","status","json","t","message","data","exports"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\shoppingCartController\\","sources":["viewing.js"],"sourcesContent":["import Stripe from 'stripe';\r\nimport db from '../../database/models';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport { Op } from 'sequelize';\r\n\r\nexport const viewOrderDetails = asyncWrapper(async(req,res) =>{\r\n  const trackingnumber = req.params.trackingId;\r\n  const order = await db.Order.findOne({\r\n    where: {\r\n        trackingNumber : trackingnumber\r\n    }\r\n  })\r\n  const details = await db.OrderDetails.findAll({\r\n    where: { id: { [Op.in]: order.products } },\r\n  });\r\n  res.status(200).json({\r\n    status: req.t('success'),\r\n    message:req.t('Order_details_has_been_retrieved_successfully'),\r\n    data: details,\r\n\r\n  })\r\n})\r\n\r\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,uBAAA,GAAAF,OAAA;AACA,IAAAG,UAAA,GAAAH,OAAA;AAA+B,SAAAD,uBAAAK,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAExB,MAAMG,gBAAgB,GAAG,IAAAC,oCAAY,EAAC,OAAMC,GAAG,EAACC,GAAG,KAAI;EAC5D,MAAMC,cAAc,GAAGF,GAAG,CAACG,MAAM,CAACC,UAAU;EAC5C,MAAMC,KAAK,GAAG,MAAMC,eAAE,CAACC,KAAK,CAACC,OAAO,CAAC;IACnCC,KAAK,EAAE;MACHC,cAAc,EAAGR;IACrB;EACF,CAAC,CAAC;EACF,MAAMS,OAAO,GAAG,MAAML,eAAE,CAACM,YAAY,CAACC,OAAO,CAAC;IAC5CJ,KAAK,EAAE;MAAEK,EAAE,EAAE;QAAE,CAACC,aAAE,CAACC,EAAE,GAAGX,KAAK,CAACY;MAAS;IAAE;EAC3C,CAAC,CAAC;EACFhB,GAAG,CAACiB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IACnBD,MAAM,EAAElB,GAAG,CAACoB,CAAC,CAAC,SAAS,CAAC;IACxBC,OAAO,EAACrB,GAAG,CAACoB,CAAC,CAAC,+CAA+C,CAAC;IAC9DE,IAAI,EAAEX;EAER,CAAC,CAAC;AACJ,CAAC,CAAC;AAAAY,OAAA,CAAAzB,gBAAA,GAAAA,gBAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"597a61b1ca2a7c9254a5b37e2ef581dc5b8fa045","contentHash":"4cc4d69d763352522448454c78ee551a122266b8347ca3eac487416b5d786014"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\shoppingCartController\\addToCartController.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\shoppingCartController\\addToCartController.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":130}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":55}},"3":{"start":{"line":8,"column":14},"end":{"line":8,"column":70}},"4":{"start":{"line":9,"column":30},"end":{"line":9,"column":75}},"5":{"start":{"line":10,"column":17},"end":{"line":10,"column":73}},"6":{"start":{"line":11,"column":17},"end":{"line":11,"column":37}},"7":{"start":{"line":12,"column":21},"end":{"line":12,"column":82}},"8":{"start":{"line":13,"column":39},"end":{"line":13,"column":93}},"9":{"start":{"line":15,"column":18},"end":{"line":83,"column":2}},"10":{"start":{"line":19,"column":6},"end":{"line":19,"column":14}},"11":{"start":{"line":20,"column":18},"end":{"line":20,"column":29}},"12":{"start":{"line":22,"column":27},"end":{"line":29,"column":4}},"13":{"start":{"line":30,"column":2},"end":{"line":33,"column":5}},"14":{"start":{"line":30,"column":25},"end":{"line":33,"column":5}},"15":{"start":{"line":34,"column":28},"end":{"line":34,"column":54}},"16":{"start":{"line":36,"column":30},"end":{"line":41,"column":4}},"17":{"start":{"line":42,"column":2},"end":{"line":45,"column":5}},"18":{"start":{"line":42,"column":28},"end":{"line":45,"column":5}},"19":{"start":{"line":47,"column":27},"end":{"line":47,"column":49}},"20":{"start":{"line":51,"column":18},"end":{"line":55,"column":4}},"21":{"start":{"line":56,"column":2},"end":{"line":73,"column":3}},"22":{"start":{"line":57,"column":4},"end":{"line":57,"column":44}},"23":{"start":{"line":58,"column":4},"end":{"line":58,"column":71}},"24":{"start":{"line":59,"column":4},"end":{"line":59,"column":41}},"25":{"start":{"line":60,"column":4},"end":{"line":60,"column":32}},"26":{"start":{"line":61,"column":4},"end":{"line":61,"column":26}},"27":{"start":{"line":63,"column":4},"end":{"line":63,"column":17}},"28":{"start":{"line":64,"column":22},"end":{"line":64,"column":49}},"29":{"start":{"line":66,"column":4},"end":{"line":72,"column":7}},"30":{"start":{"line":75,"column":2},"end":{"line":82,"column":3}},"31":{"start":{"line":76,"column":17},"end":{"line":76,"column":44}},"32":{"start":{"line":77,"column":4},"end":{"line":81,"column":7}},"33":{"start":{"line":84,"column":0},"end":{"line":84,"column":30}},"34":{"start":{"line":85,"column":21},"end":{"line":131,"column":1}},"35":{"start":{"line":86,"column":26},"end":{"line":86,"column":73}},"36":{"start":{"line":88,"column":2},"end":{"line":93,"column":5}},"37":{"start":{"line":89,"column":25},"end":{"line":89,"column":52}},"38":{"start":{"line":90,"column":4},"end":{"line":92,"column":5}},"39":{"start":{"line":91,"column":6},"end":{"line":91,"column":38}},"40":{"start":{"line":95,"column":24},"end":{"line":100,"column":4}},"41":{"start":{"line":101,"column":15},"end":{"line":124,"column":5}},"42":{"start":{"line":102,"column":22},"end":{"line":102,"column":42}},"43":{"start":{"line":103,"column":29},"end":{"line":103,"column":87}},"44":{"start":{"line":104,"column":30},"end":{"line":104,"column":56}},"45":{"start":{"line":106,"column":32},"end":{"line":111,"column":6}},"46":{"start":{"line":112,"column":29},"end":{"line":112,"column":51}},"47":{"start":{"line":113,"column":22},"end":{"line":113,"column":62}},"48":{"start":{"line":114,"column":24},"end":{"line":122,"column":5}},"49":{"start":{"line":123,"column":4},"end":{"line":123,"column":23}},"50":{"start":{"line":125,"column":22},"end":{"line":125,"column":78}},"51":{"start":{"line":125,"column":37},"end":{"line":125,"column":50}},"52":{"start":{"line":125,"column":69},"end":{"line":125,"column":74}},"53":{"start":{"line":126,"column":15},"end":{"line":129,"column":3}},"54":{"start":{"line":130,"column":2},"end":{"line":130,"column":14}},"55":{"start":{"line":134,"column":17},"end":{"line":148,"column":2}},"56":{"start":{"line":135,"column":15},"end":{"line":135,"column":26}},"57":{"start":{"line":136,"column":15},"end":{"line":136,"column":39}},"58":{"start":{"line":137,"column":2},"end":{"line":142,"column":3}},"59":{"start":{"line":138,"column":4},"end":{"line":141,"column":7}},"60":{"start":{"line":143,"column":2},"end":{"line":147,"column":5}},"61":{"start":{"line":149,"column":0},"end":{"line":149,"column":28}},"62":{"start":{"line":150,"column":12},"end":{"line":200,"column":2}},"63":{"start":{"line":151,"column":15},"end":{"line":151,"column":26}},"64":{"start":{"line":158,"column":6},"end":{"line":158,"column":14}},"65":{"start":{"line":159,"column":17},"end":{"line":159,"column":68}},"66":{"start":{"line":160,"column":20},"end":{"line":160,"column":48}},"67":{"start":{"line":161,"column":21},"end":{"line":161,"column":42}},"68":{"start":{"line":162,"column":24},"end":{"line":166,"column":4}},"69":{"start":{"line":167,"column":15},"end":{"line":172,"column":3}},"70":{"start":{"line":173,"column":2},"end":{"line":173,"column":20}},"71":{"start":{"line":174,"column":24},"end":{"line":180,"column":4}},"72":{"start":{"line":183,"column":30},"end":{"line":185,"column":4}},"73":{"start":{"line":188,"column":36},"end":{"line":188,"column":89}},"74":{"start":{"line":189,"column":30},"end":{"line":189,"column":62}},"75":{"start":{"line":190,"column":15},"end":{"line":198,"column":4}},"76":{"start":{"line":196,"column":4},"end":{"line":196,"column":26}},"77":{"start":{"line":197,"column":4},"end":{"line":197,"column":24}},"78":{"start":{"line":199,"column":2},"end":{"line":199,"column":52}},"79":{"start":{"line":201,"column":0},"end":{"line":201,"column":18}},"80":{"start":{"line":202,"column":17},"end":{"line":251,"column":2}},"81":{"start":{"line":203,"column":18},"end":{"line":203,"column":29}},"82":{"start":{"line":206,"column":6},"end":{"line":206,"column":14}},"83":{"start":{"line":207,"column":12},"end":{"line":207,"column":14}},"84":{"start":{"line":209,"column":15},"end":{"line":209,"column":43}},"85":{"start":{"line":210,"column":22},"end":{"line":210,"column":38}},"86":{"start":{"line":211,"column":16},"end":{"line":211,"column":17}},"87":{"start":{"line":212,"column":17},"end":{"line":217,"column":4}},"88":{"start":{"line":218,"column":2},"end":{"line":224,"column":3}},"89":{"start":{"line":219,"column":4},"end":{"line":223,"column":7}},"90":{"start":{"line":225,"column":2},"end":{"line":250,"column":5}},"91":{"start":{"line":226,"column":4},"end":{"line":234,"column":7}},"92":{"start":{"line":233,"column":6},"end":{"line":233,"column":35}},"93":{"start":{"line":235,"column":4},"end":{"line":235,"column":14}},"94":{"start":{"line":236,"column":4},"end":{"line":249,"column":5}},"95":{"start":{"line":237,"column":6},"end":{"line":243,"column":9}},"96":{"start":{"line":244,"column":6},"end":{"line":248,"column":9}},"97":{"start":{"line":252,"column":0},"end":{"line":252,"column":28}},"98":{"start":{"line":253,"column":21},"end":{"line":322,"column":2}},"99":{"start":{"line":254,"column":15},"end":{"line":254,"column":43}},"100":{"start":{"line":255,"column":16},"end":{"line":255,"column":17}},"101":{"start":{"line":256,"column":2},"end":{"line":261,"column":3}},"102":{"start":{"line":257,"column":4},"end":{"line":260,"column":7}},"103":{"start":{"line":263,"column":18},"end":{"line":263,"column":29}},"104":{"start":{"line":264,"column":16},"end":{"line":264,"column":30}},"105":{"start":{"line":265,"column":2},"end":{"line":270,"column":5}},"106":{"start":{"line":271,"column":2},"end":{"line":321,"column":5}},"107":{"start":{"line":272,"column":4},"end":{"line":280,"column":7}},"108":{"start":{"line":277,"column":21},"end":{"line":277,"column":34}},"109":{"start":{"line":278,"column":6},"end":{"line":278,"column":53}},"110":{"start":{"line":279,"column":6},"end":{"line":279,"column":28}},"111":{"start":{"line":281,"column":4},"end":{"line":281,"column":14}},"112":{"start":{"line":282,"column":4},"end":{"line":320,"column":5}},"113":{"start":{"line":283,"column":20},"end":{"line":283,"column":22}},"114":{"start":{"line":284,"column":21},"end":{"line":284,"column":22}},"115":{"start":{"line":285,"column":25},"end":{"line":290,"column":8}},"116":{"start":{"line":291,"column":6},"end":{"line":319,"column":9}},"117":{"start":{"line":292,"column":23},"end":{"line":297,"column":10}},"118":{"start":{"line":298,"column":8},"end":{"line":298,"column":29}},"119":{"start":{"line":301,"column":8},"end":{"line":301,"column":19}},"120":{"start":{"line":302,"column":8},"end":{"line":318,"column":9}},"121":{"start":{"line":303,"column":10},"end":{"line":311,"column":13}},"122":{"start":{"line":309,"column":12},"end":{"line":309,"column":38}},"123":{"start":{"line":310,"column":12},"end":{"line":310,"column":32}},"124":{"start":{"line":312,"column":10},"end":{"line":312,"column":67}},"125":{"start":{"line":313,"column":10},"end":{"line":317,"column":13}},"126":{"start":{"line":324,"column":0},"end":{"line":324,"column":36}},"127":{"start":{"line":325,"column":20},"end":{"line":332,"column":1}},"128":{"start":{"line":326,"column":24},"end":{"line":326,"column":43}},"129":{"start":{"line":327,"column":22},"end":{"line":327,"column":32}},"130":{"start":{"line":328,"column":23},"end":{"line":328,"column":70}},"131":{"start":{"line":329,"column":25},"end":{"line":329,"column":61}},"132":{"start":{"line":330,"column":35},"end":{"line":330,"column":55}},"133":{"start":{"line":331,"column":2},"end":{"line":331,"column":34}},"134":{"start":{"line":333,"column":21},"end":{"line":343,"column":1}},"135":{"start":{"line":334,"column":15},"end":{"line":334,"column":26}},"136":{"start":{"line":335,"column":15},"end":{"line":335,"column":39}},"137":{"start":{"line":336,"column":2},"end":{"line":341,"column":3}},"138":{"start":{"line":337,"column":4},"end":{"line":340,"column":7}},"139":{"start":{"line":342,"column":2},"end":{"line":342,"column":14}},"140":{"start":{"line":347,"column":26},"end":{"line":400,"column":1}},"141":{"start":{"line":348,"column":18},"end":{"line":352,"column":4}},"142":{"start":{"line":354,"column":2},"end":{"line":358,"column":3}},"143":{"start":{"line":355,"column":4},"end":{"line":357,"column":7}},"144":{"start":{"line":359,"column":23},"end":{"line":359,"column":27}},"145":{"start":{"line":360,"column":26},"end":{"line":360,"column":56}},"146":{"start":{"line":361,"column":2},"end":{"line":363,"column":3}},"147":{"start":{"line":361,"column":15},"end":{"line":361,"column":16}},"148":{"start":{"line":362,"column":4},"end":{"line":362,"column":90}},"149":{"start":{"line":365,"column":22},"end":{"line":370,"column":4}},"150":{"start":{"line":371,"column":2},"end":{"line":371,"column":46}},"151":{"start":{"line":372,"column":2},"end":{"line":372,"column":27}},"152":{"start":{"line":373,"column":17},"end":{"line":373,"column":35}},"153":{"start":{"line":376,"column":20},"end":{"line":397,"column":3}},"154":{"start":{"line":399,"column":2},"end":{"line":399,"column":43}},"155":{"start":{"line":401,"column":0},"end":{"line":401,"column":46}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":31}},"loc":{"start":{"line":13,"column":37},"end":{"line":13,"column":95}},"line":13},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":60},"end":{"line":15,"column":61}},"loc":{"start":{"line":15,"column":80},"end":{"line":83,"column":1}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":85,"column":21},"end":{"line":85,"column":22}},"loc":{"start":{"line":85,"column":36},"end":{"line":131,"column":1}},"line":85},"3":{"name":"(anonymous_3)","decl":{"start":{"line":88,"column":26},"end":{"line":88,"column":27}},"loc":{"start":{"line":88,"column":34},"end":{"line":93,"column":3}},"line":88},"4":{"name":"(anonymous_4)","decl":{"start":{"line":101,"column":51},"end":{"line":101,"column":52}},"loc":{"start":{"line":101,"column":73},"end":{"line":124,"column":3}},"line":101},"5":{"name":"(anonymous_5)","decl":{"start":{"line":125,"column":31},"end":{"line":125,"column":32}},"loc":{"start":{"line":125,"column":37},"end":{"line":125,"column":50}},"line":125},"6":{"name":"(anonymous_6)","decl":{"start":{"line":125,"column":59},"end":{"line":125,"column":60}},"loc":{"start":{"line":125,"column":69},"end":{"line":125,"column":74}},"line":125},"7":{"name":"(anonymous_7)","decl":{"start":{"line":134,"column":59},"end":{"line":134,"column":60}},"loc":{"start":{"line":134,"column":79},"end":{"line":148,"column":1}},"line":134},"8":{"name":"(anonymous_8)","decl":{"start":{"line":150,"column":54},"end":{"line":150,"column":55}},"loc":{"start":{"line":150,"column":74},"end":{"line":200,"column":1}},"line":150},"9":{"name":"(anonymous_9)","decl":{"start":{"line":195,"column":10},"end":{"line":195,"column":11}},"loc":{"start":{"line":195,"column":25},"end":{"line":198,"column":3}},"line":195},"10":{"name":"(anonymous_10)","decl":{"start":{"line":202,"column":59},"end":{"line":202,"column":60}},"loc":{"start":{"line":202,"column":79},"end":{"line":251,"column":1}},"line":202},"11":{"name":"(anonymous_11)","decl":{"start":{"line":225,"column":26},"end":{"line":225,"column":27}},"loc":{"start":{"line":225,"column":40},"end":{"line":250,"column":3}},"line":225},"12":{"name":"(anonymous_12)","decl":{"start":{"line":232,"column":12},"end":{"line":232,"column":13}},"loc":{"start":{"line":232,"column":20},"end":{"line":234,"column":5}},"line":232},"13":{"name":"(anonymous_13)","decl":{"start":{"line":253,"column":63},"end":{"line":253,"column":64}},"loc":{"start":{"line":253,"column":89},"end":{"line":322,"column":1}},"line":253},"14":{"name":"(anonymous_14)","decl":{"start":{"line":271,"column":20},"end":{"line":271,"column":21}},"loc":{"start":{"line":271,"column":34},"end":{"line":321,"column":3}},"line":271},"15":{"name":"(anonymous_15)","decl":{"start":{"line":276,"column":12},"end":{"line":276,"column":13}},"loc":{"start":{"line":276,"column":29},"end":{"line":280,"column":5}},"line":276},"16":{"name":"(anonymous_16)","decl":{"start":{"line":291,"column":34},"end":{"line":291,"column":35}},"loc":{"start":{"line":291,"column":51},"end":{"line":319,"column":7}},"line":291},"17":{"name":"(anonymous_17)","decl":{"start":{"line":308,"column":18},"end":{"line":308,"column":19}},"loc":{"start":{"line":308,"column":33},"end":{"line":311,"column":11}},"line":308},"18":{"name":"(anonymous_18)","decl":{"start":{"line":325,"column":20},"end":{"line":325,"column":21}},"loc":{"start":{"line":325,"column":33},"end":{"line":332,"column":1}},"line":325},"19":{"name":"(anonymous_19)","decl":{"start":{"line":333,"column":21},"end":{"line":333,"column":22}},"loc":{"start":{"line":333,"column":41},"end":{"line":343,"column":1}},"line":333},"20":{"name":"(anonymous_20)","decl":{"start":{"line":347,"column":26},"end":{"line":347,"column":27}},"loc":{"start":{"line":347,"column":57},"end":{"line":400,"column":1}},"line":347}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":92}},"type":"cond-expr","locations":[{"start":{"line":13,"column":70},"end":{"line":13,"column":73}},{"start":{"line":13,"column":76},"end":{"line":13,"column":92}}],"line":13},"1":{"loc":{"start":{"line":13,"column":46},"end":{"line":13,"column":67}},"type":"binary-expr","locations":[{"start":{"line":13,"column":46},"end":{"line":13,"column":49}},{"start":{"line":13,"column":53},"end":{"line":13,"column":67}}],"line":13},"2":{"loc":{"start":{"line":30,"column":2},"end":{"line":33,"column":5}},"type":"if","locations":[{"start":{"line":30,"column":2},"end":{"line":33,"column":5}},{"start":{"line":30,"column":2},"end":{"line":33,"column":5}}],"line":30},"3":{"loc":{"start":{"line":42,"column":2},"end":{"line":45,"column":5}},"type":"if","locations":[{"start":{"line":42,"column":2},"end":{"line":45,"column":5}},{"start":{"line":42,"column":2},"end":{"line":45,"column":5}}],"line":42},"4":{"loc":{"start":{"line":56,"column":2},"end":{"line":73,"column":3}},"type":"if","locations":[{"start":{"line":56,"column":2},"end":{"line":73,"column":3}},{"start":{"line":56,"column":2},"end":{"line":73,"column":3}}],"line":56},"5":{"loc":{"start":{"line":75,"column":2},"end":{"line":82,"column":3}},"type":"if","locations":[{"start":{"line":75,"column":2},"end":{"line":82,"column":3}},{"start":{"line":75,"column":2},"end":{"line":82,"column":3}}],"line":75},"6":{"loc":{"start":{"line":90,"column":4},"end":{"line":92,"column":5}},"type":"if","locations":[{"start":{"line":90,"column":4},"end":{"line":92,"column":5}},{"start":{"line":90,"column":4},"end":{"line":92,"column":5}}],"line":90},"7":{"loc":{"start":{"line":137,"column":2},"end":{"line":142,"column":3}},"type":"if","locations":[{"start":{"line":137,"column":2},"end":{"line":142,"column":3}},{"start":{"line":137,"column":2},"end":{"line":142,"column":3}}],"line":137},"8":{"loc":{"start":{"line":218,"column":2},"end":{"line":224,"column":3}},"type":"if","locations":[{"start":{"line":218,"column":2},"end":{"line":224,"column":3}},{"start":{"line":218,"column":2},"end":{"line":224,"column":3}}],"line":218},"9":{"loc":{"start":{"line":236,"column":4},"end":{"line":249,"column":5}},"type":"if","locations":[{"start":{"line":236,"column":4},"end":{"line":249,"column":5}},{"start":{"line":236,"column":4},"end":{"line":249,"column":5}}],"line":236},"10":{"loc":{"start":{"line":256,"column":2},"end":{"line":261,"column":3}},"type":"if","locations":[{"start":{"line":256,"column":2},"end":{"line":261,"column":3}},{"start":{"line":256,"column":2},"end":{"line":261,"column":3}}],"line":256},"11":{"loc":{"start":{"line":282,"column":4},"end":{"line":320,"column":5}},"type":"if","locations":[{"start":{"line":282,"column":4},"end":{"line":320,"column":5}},{"start":{"line":282,"column":4},"end":{"line":320,"column":5}}],"line":282},"12":{"loc":{"start":{"line":302,"column":8},"end":{"line":318,"column":9}},"type":"if","locations":[{"start":{"line":302,"column":8},"end":{"line":318,"column":9}},{"start":{"line":302,"column":8},"end":{"line":318,"column":9}}],"line":302},"13":{"loc":{"start":{"line":336,"column":2},"end":{"line":341,"column":3}},"type":"if","locations":[{"start":{"line":336,"column":2},"end":{"line":341,"column":3}},{"start":{"line":336,"column":2},"end":{"line":341,"column":3}}],"line":336},"14":{"loc":{"start":{"line":354,"column":2},"end":{"line":358,"column":3}},"type":"if","locations":[{"start":{"line":354,"column":2},"end":{"line":358,"column":3}},{"start":{"line":354,"column":2},"end":{"line":358,"column":3}}],"line":354}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":4,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1,"56":0,"57":0,"58":0,"59":0,"60":0,"61":1,"62":1,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":1,"80":1,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":1,"98":1,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":1,"127":1,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":1,"135":0,"136":0,"137":0,"138":0,"139":0,"140":1,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":1},"f":{"0":4,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"b":{"0":[2,2],"1":[4,4],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"inputSourceMap":{"version":3,"names":["_stripe","_interopRequireDefault","require","_models","_handlingTryCatchBlocks","_sendEmail","_sequelize","_notifications","obj","__esModule","default","addToCart","asyncWrapper","req","res","productId","body","buyerId","user","id","productVariation","db","ProductAttribute","findOne","where","quantity","Op","gt","status","json","t","message","productIdentifier","productAvailability","Product","productUnitPrice","price","productINcart","isAdded","shoppingCarts","product","totalpricePerProduct","save","console","log","totalCost","create","buyer","cartStatus","cart","generateCart","data","exports","availableInCart","findAll","forEach","isCartActive","isAbondoned","createdAt","addedProducts","Promise","all","map","addedProduct","findByPk","productInfo","productName","name","productSize","size","productColor","color","productImage","attrImage","totalPrice","totalAmount","ca","reduce","a","b","viewCart","pay","cvcNumber","cardNumber","exp_month","exp_year","currency","stripe","Stripe","process","env","STRIPE_SECRET_KEY","cartItems","cart_process","paymentIntent","paymentIntents","amount","payment_method_types","card","number","cvc","paymentMethod","paymentMethods","type","billing_details","email","paymentIntentUpdate","update","payment_method","paymentIntentConfirmation","confirm","paymentIntentStatus","Order","userId","then","order","checkout_End","checkout","location","ids","counter","dupArr","item","OrderDetails","push","dataValues","length","products","destroy","invoice","counter2","ordersList","detail","attributes","emitter","emit","createdAtDate","Date","currentDate","timeDiffInMs","getTime","timeDiffInDays","isCreatedInLastSevenDays","orderConfirmation","buyerID","myOrder","trackingNumber","trackingNumbers","i","Math","floor","random","activeOrder","emailData","subject","html","HOST","sendEmail"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\shoppingCartController\\","sources":["addToCartController.js"],"sourcesContent":["import Stripe from 'stripe';\r\nimport db from '../../database/models';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport sendEmail from '../../utils/sendEmail';\r\nimport { Op } from 'sequelize';\r\nimport emitter from '../../events/notifications';\r\n//function to handle product addition to cart\r\nexport const addToCart = asyncWrapper(async (req, res) => {\r\n  //grabbing data from request\r\n  const { productId } = req.body;\r\n  const buyerId = req.user.id;\r\n  // checking if the product has been added in database also well as being available for sale\r\n  const productVariation = await db.ProductAttribute.findOne({\r\n    where: {\r\n      id: productId,\r\n      quantity: {[Op.gt]:0}\r\n    }\r\n  })\r\n  if (!productVariation)\r\n    return res\r\n      .status(404)\r\n      .json({ status: req.t('fail'), message: req.t('not_available_ForSale') });\r\n  const productIdentifier = productVariation.productId;\r\n  //check wether the function is available for sale.\r\n  const productAvailability = await db.Product.findOne({\r\n    where: {\r\n      id: productIdentifier,\r\n      status: 'AVAILABLE',\r\n    },\r\n  });\r\n  if (!productAvailability)\r\n    return res\r\n      .status(404)\r\n      .json({ status: req.t('fail'), message: req.t('not_available_ForSale') });\r\n  //calculating price of quatity of product added to cart\r\n  const productUnitPrice = productVariation.price;\r\n  let quantity;\r\n  let productINcart;\r\n  //check wether the product has already been added\r\n  const isAdded = await db.shoppingCarts.findOne({\r\n    where: {\r\n      product: productId,\r\n    },\r\n  });\r\n  if (isAdded) {\r\n    isAdded.quantity = isAdded.quantity + 1;\r\n    isAdded.totalpricePerProduct = productUnitPrice * isAdded.quantity;\r\n    productINcart = await isAdded.save();\r\n    quantity = isAdded.quantity;\r\n    console.log(quantity);\r\n  } else {\r\n    quantity = 1;\r\n    const totalCost = productUnitPrice * quantity;\r\n    //recodring information related to the cart.\r\n    productINcart = await db.shoppingCarts.create({\r\n      buyer: buyerId,\r\n      product: productId,\r\n      quantity,\r\n      totalpricePerProduct: totalCost,\r\n      cartStatus: 'active',\r\n    });\r\n  }\r\n  //sending response to the the client\r\n  if (productINcart) {\r\n    const cart = await generateCart(buyerId);\r\n    res.status(201).json({\r\n      status: req.t('success'),\r\n      message: req.t('cadded_to_cart'),\r\n      data: cart,\r\n    });\r\n  }\r\n});\r\n\r\nconst generateCart = async (buyer) => {\r\n  const availableInCart = await db.shoppingCarts.findAll({});\r\n  //if the product has spent more than fourteen days on the cart it will not be recorganised as active on that cart\r\n  availableInCart.forEach((cart) => {\r\n    const isCartActive = isAbondoned(cart.createdAt);\r\n    if (isCartActive) {\r\n      cartStatus.status = 'abandoned';\r\n    }\r\n  });\r\n  //non active product will not be available on shopping cart\r\n  const addedProducts = await db.shoppingCarts.findAll({\r\n    where: {\r\n      buyer: buyer,\r\n      cartStatus: 'active',\r\n    },\r\n  });\r\n  const cart = await Promise.all(\r\n    addedProducts.map(async (addedProduct) => {\r\n      const productId = addedProduct.product;\r\n      const productVariation = await db.ProductAttribute.findByPk(productId);\r\n      const productIdentifier = productVariation.productId;\r\n      //check wether the products is available for sale.\r\n      const productAvailability = await db.Product.findOne({\r\n        where: {\r\n          id: productIdentifier,\r\n          status: 'AVAILABLE',\r\n        },\r\n      });\r\n      const productUnitPrice = productVariation.price;\r\n      const totalCost = productUnitPrice * addedProduct.quantity;\r\n      const productInfo = {\r\n        id: productVariation.id,\r\n        productName: productAvailability.name,\r\n        productSize: productVariation.size,\r\n        productColor: productVariation.color,\r\n        productImage: productVariation.attrImage,\r\n        quantity: addedProduct.quantity,\r\n        totalPrice: totalCost,\r\n      };\r\n      return productInfo;\r\n    })\r\n  );\r\n  const totalAmount = cart\r\n    .map((ca) => ca.totalPrice)\r\n    .reduce((a, b) => a + b, 0);\r\n  const data = {\r\n    cart,\r\n    totalAmount,\r\n  };\r\n  return data;\r\n};\r\n//Retrive Cart Items\r\n\r\nexport const viewCart = asyncWrapper(async (req, res) => {\r\n  const user = req.user.id;\r\n  const cart = await generateCart(user);\r\n\r\n  if (!cart) {\r\n    res.status(404).json({\r\n      status: req.t('fail'),\r\n      message: req.t('cart_already_empty'),\r\n    });\r\n  }\r\n  res.status(200).json({\r\n    status: req.t('success'),\r\n    message: req.t('cart_retrieved'),\r\n    data: cart,\r\n  });\r\n});\r\nexport const pay = asyncWrapper(async (req, res) => {\r\n  const user = req.user.id;\r\n  const { cvcNumber, cardNumber, exp_month, exp_year, currency } = req.body;\r\n  const stripe = Stripe(process.env.STRIPE_SECRET_KEY);\r\n  const cartItems = await cart_process(req, res);\r\n  const totalPrice = cartItems.totalAmount;\r\n  const paymentIntent = await stripe.paymentIntents.create({\r\n    amount: totalPrice,\r\n    currency: currency,\r\n    payment_method_types: ['card'],\r\n  });\r\n\r\n  const card = {\r\n    number: cardNumber,\r\n    exp_month: exp_month,\r\n    exp_year: exp_year,\r\n    cvc: cvcNumber,\r\n  };\r\n  console.log(card);\r\n  const paymentMethod = await stripe.paymentMethods.create({\r\n    type: 'card',\r\n    card,\r\n    billing_details: {\r\n      email: user.email,\r\n    },\r\n  });\r\n\r\n  // Update payment intent with payment method\r\n  const paymentIntentUpdate = await stripe.paymentIntents.update(\r\n    paymentIntent.id,\r\n    {\r\n      payment_method: paymentMethod.id,\r\n    }\r\n  );\r\n\r\n  // Confirm payment intent\r\n  const paymentIntentConfirmation = await stripe.paymentIntents.confirm(\r\n    paymentIntent.id\r\n  );\r\n  const paymentIntentStatus = paymentIntentConfirmation.status;\r\n\r\n\r\n  const data = await db.Order.findOne({ where: { userId: user, status: 'pending' } }).then(\r\n    async (order) => {\r\n      order.status = 'paid';\r\n      return order.save();\r\n    }\r\n  );\r\n  await checkout_End(req, res, paymentIntentStatus);\r\n\r\n});\r\nexport const checkout = asyncWrapper(async (req, res) => {\r\n  const buyerId = req.user.id;\r\n  const { location } = req.body;\r\n  let ids = [];\r\n  let order;\r\n  const cart = await cart_process(req, res);\r\n  const totalAmount = cart.totalAmount;\r\n  let counter = 0;\r\n  const dupArr = await db.Order.findOne({\r\n    where: { userId: buyerId, status: 'pending' },\r\n  })\r\n\r\n  if (dupArr) {\r\n    return res.status(200).json({\r\n      status: req.t('fail'),\r\n      message: req.t('checkout-already-started'),\r\n      data: dupArr,\r\n    });\r\n  }\r\n  await cart.cart.forEach(async (item) => {\r\n    await db.OrderDetails.create({\r\n      name: item.productName,\r\n      quantity: item.quantity,\r\n      size: item.productSize,\r\n      color: item.productColor,\r\n      price: item.totalPrice,\r\n    }).then((data) => {\r\n      ids.push(data.dataValues.id);\r\n    });\r\n    counter++;\r\n\r\n    if (counter === cart.cart.length) {\r\n      order = await db.Order.create({\r\n        amount: totalAmount,\r\n        userId: req.user.id,\r\n        status: 'pending',\r\n        location: location,\r\n        products: ids,\r\n      });\r\n      res.status(200).json({\r\n        status: req.t('success'),\r\n        message: req.t('checkout-started'),\r\n        data: order,\r\n      });\r\n    }\r\n  });\r\n});\r\n\r\nexport const checkout_End = asyncWrapper(async (req, res, data) => {\r\n  const cart = await cart_process(req, res);\r\n  let counter = 0;\r\n  if (data !== 'succeeded') {\r\n    return res.status(404).json({\r\n      status: req.t('fail'),\r\n      message: req.t('payment_fail'),\r\n    });\r\n  }\r\n  // delete everything from the cart\r\n  const buyerId = req.user.id;\r\n  const email = req.user.email;\r\n  await db.shoppingCarts.destroy({\r\n    where: {\r\n      buyer: buyerId,\r\n      cartStatus: 'active',\r\n    },\r\n  });\r\n  cart.cart.forEach(async (item) => {\r\n    db.ProductAttribute.findOne({ where: { id: item.id } }).then(\r\n      async (product) => {\r\n        let quantity = item.quantity;\r\n        product.quantity = product.quantity - quantity;\r\n        return product.save();\r\n      }\r\n    );\r\n    counter++;\r\n\r\n    if (counter === cart.cart.length) {\r\n      let invoice = [];\r\n      let counter2 = 0;\r\n      const ordersList = await db.Order.findOne({\r\n        where: {\r\n          userId: req.user.id,\r\n          status: 'paid',\r\n        },\r\n      });\r\n      ordersList.products.forEach(async (product) => {\r\n        const detail = await db.OrderDetails.findOne({\r\n          attributes: [\r\n            'name',\r\n            'size',\r\n            'color',\r\n            'quantity',\r\n            'price',\r\n            'createdAt',\r\n          ],\r\n          where: {\r\n            id: product,\r\n          },\r\n        });\r\n        invoice.push(detail);\r\n        // Getting Total aamount per invoice\r\n       \r\n        counter2++;\r\n        if (counter2 === ordersList.products.length) {\r\n            db.Order.findOne({\r\n              where: { userId: buyerId, status: 'paid' },\r\n            }).then(async (order) => {\r\n              order.status = 'shipping';\r\n              return order.save();\r\n            });\r\n          emitter.emit('productPurchased', invoice);\r\n          res.status(200).json({\r\n            status: req.t('success'),\r\n            message: req.t('payment_succeed'),\r\n            data: invoice,\r\n          });\r\n        }\r\n      });\r\n    }\r\n  });\r\n});\r\n//check whether the cart has been abondoned or not\r\nconst isAbondoned = (createdAt) => {\r\n  const createdAtDate = new Date(createdAt);\r\n  const currentDate = new Date();\r\n  const timeDiffInMs = currentDate.getTime() - createdAtDate.getTime();\r\n  const timeDiffInDays = timeDiffInMs / (24 * 60 * 60 * 1000);\r\n  const isCreatedInLastSevenDays = timeDiffInDays >= 14;\r\n  return isCreatedInLastSevenDays;\r\n};\r\nconst cart_process = async (req, res) => {\r\n  const user = req.user.id;\r\n  const cart = await generateCart(user);\r\n  if (!cart) {\r\n    res.status(404).json({\r\n      status: req.t('fail'),\r\n      message: req.t('cart_already_empty'),\r\n    });\r\n  }\r\n  return cart;\r\n};\r\n\r\n\r\n// Sending order Confirmation email\r\n\r\nexport const orderConfirmation = async (buyerID, email,res) => {\r\n  const myOrder = await db.Order.findOne({\r\n    where: { userId: buyerID }\r\n  });\r\n  // verify payment\r\n  if (myOrder.status !== 'shipping') {\r\n    res.status(409).json({message:'Payment was not successful'});\r\n  }\r\n  let trackingNumber = 'Tr';\r\n  const trackingNumbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];\r\n  for (let i = 0; i <= 5; i++) {\r\n    trackingNumber += trackingNumbers[Math.floor(Math.random() * trackingNumbers.length\r\n    )]\r\n  }\r\n  //Assigning tracking number on product with the same order\r\n  const activeOrder = await db.Order.findOne({\r\n   where: { userId: buyerID },\r\n   order: [['createdAt', 'DESC']]\r\n  });\r\n  activeOrder.trackingNumber = trackingNumber;\r\n  await activeOrder.save();\r\n  const amount = activeOrder.amount\r\n  \r\n  // prepare email message\r\n  const emailData = {\r\n    email,\r\n    subject: 'Order Confirmation',\r\n    html: `<table style=\"border-collapse:collapse;border-spacing:0;width:100%;min-width:100%\" width=\"100%\" height=\"auto\" cellspacing=\"0\" cellpadding=\"0\" bgcolor=\"#F0F0F0\">\r\n      <tbody><tr>\r\n      <td style=\"padding-top:54px;padding-bottom:42px\" align=\"center\">\r\n      <h2 style=\"color:#0090c6;font-size: xx-large;\">E-commerce ATLP-Legends project</h2>\r\n      </td>\r\n      </tr>\r\n      </tbody></table>\r\n      <p class=\"m_73160151937089879size-16\" style=\"Margin-top:0;Margin-bottom:0;font-size:16px;line-height:24px\" lang=\"x-size-16\"><strong><span style=\"color:#000000\">You sent a payment of ${amount} to Legends E-commerce </span></strong></p><p style=\"Margin-top:20px;Margin-bottom:0\"><span style=\"color:#000000\">You are in safe hands.</span></p>\r\n      <p><h4><b>Your tracking number is ${trackingNumber}.<b></h4></p>\r\n      <p style=\"Margin-top:10px;Margin-bottom:0\"><span style=\"color:#000000\">Here is your order details click on view link below!</span></p>\r\n      <p style=\"Margin-top:20px;Margin-bottom:20px\"><span style=\"color:#000000\"> link <a href= \"http://${process.env.HOST}:5000/api/v1/orderDetails/${trackingNumber}\">view</a></span></p>\r\n      \r\n      <p style=\"Margin-top:0px;Margin-bottom:10px\"><span style=\"color:#000000\">Thank you for shopping with us</span></p>\r\n      <div style=\"margin:0%;background:#fcfcfc;padding:1% 2%\">\r\n      <p><h4>We are honored to gain you as Customer and Hope to serve you long time!</h4></p>\r\n      </div>\r\n      <h3>Best regards,</h3>\r\n      <h5><i>E-commerce ATLP-Legends project team</i></h5>`,\r\n  };\r\n  // send email to customer\r\n  await sendEmail(emailData);\r\n};\r\n\r\n\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"55c0546d32af09eb46c5199e5f39266ed3acc52f","contentHash":"3dcd511376f97294ad18f040a1d0bbdcaeeb78c7526ddc8dad4fdf2b35c814f5"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\shoppingCartController\\updateCartController.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\shoppingCartController\\updateCartController.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":53}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":70}},"3":{"start":{"line":8,"column":30},"end":{"line":8,"column":75}},"4":{"start":{"line":9,"column":23},"end":{"line":9,"column":61}},"5":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"6":{"start":{"line":11,"column":19},"end":{"line":55,"column":2}},"7":{"start":{"line":15,"column":6},"end":{"line":15,"column":14}},"8":{"start":{"line":17,"column":18},"end":{"line":17,"column":29}},"9":{"start":{"line":18,"column":15},"end":{"line":18,"column":60}},"10":{"start":{"line":19,"column":2},"end":{"line":22,"column":5}},"11":{"start":{"line":19,"column":13},"end":{"line":22,"column":5}},"12":{"start":{"line":23,"column":19},"end":{"line":25,"column":4}},"13":{"start":{"line":24,"column":4},"end":{"line":24,"column":19}},"14":{"start":{"line":26,"column":23},"end":{"line":28,"column":4}},"15":{"start":{"line":27,"column":4},"end":{"line":27,"column":22}},"16":{"start":{"line":29,"column":2},"end":{"line":29,"column":77}},"17":{"start":{"line":30,"column":19},"end":{"line":30,"column":77}},"18":{"start":{"line":31,"column":27},"end":{"line":31,"column":103}},"19":{"start":{"line":32,"column":2},"end":{"line":32,"column":77}},"20":{"start":{"line":33,"column":2},"end":{"line":38,"column":3}},"21":{"start":{"line":34,"column":4},"end":{"line":37,"column":7}},"22":{"start":{"line":39,"column":22},"end":{"line":39,"column":66}},"23":{"start":{"line":40,"column":22},"end":{"line":43,"column":4}},"24":{"start":{"line":44,"column":18},"end":{"line":44,"column":63}},"25":{"start":{"line":45,"column":21},"end":{"line":45,"column":71}},"26":{"start":{"line":46,"column":2},"end":{"line":46,"column":41}},"27":{"start":{"line":47,"column":2},"end":{"line":54,"column":5}},"28":{"start":{"line":56,"column":0},"end":{"line":56,"column":32}},"29":{"start":{"line":57,"column":23},"end":{"line":89,"column":2}},"30":{"start":{"line":60,"column":6},"end":{"line":60,"column":14}},"31":{"start":{"line":61,"column":18},"end":{"line":61,"column":29}},"32":{"start":{"line":62,"column":15},"end":{"line":62,"column":60}},"33":{"start":{"line":63,"column":2},"end":{"line":66,"column":5}},"34":{"start":{"line":63,"column":13},"end":{"line":66,"column":5}},"35":{"start":{"line":67,"column":19},"end":{"line":69,"column":4}},"36":{"start":{"line":68,"column":4},"end":{"line":68,"column":19}},"37":{"start":{"line":70,"column":23},"end":{"line":72,"column":4}},"38":{"start":{"line":71,"column":4},"end":{"line":71,"column":22}},"39":{"start":{"line":73,"column":19},"end":{"line":73,"column":77}},"40":{"start":{"line":74,"column":2},"end":{"line":77,"column":5}},"41":{"start":{"line":74,"column":17},"end":{"line":77,"column":5}},"42":{"start":{"line":78,"column":22},"end":{"line":78,"column":46}},"43":{"start":{"line":79,"column":18},"end":{"line":79,"column":63}},"44":{"start":{"line":80,"column":21},"end":{"line":80,"column":71}},"45":{"start":{"line":81,"column":2},"end":{"line":88,"column":5}},"46":{"start":{"line":90,"column":0},"end":{"line":90,"column":40}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":61},"end":{"line":11,"column":62}},"loc":{"start":{"line":11,"column":81},"end":{"line":55,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":23,"column":28},"end":{"line":23,"column":29}},"loc":{"start":{"line":23,"column":36},"end":{"line":25,"column":3}},"line":23},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":37},"end":{"line":26,"column":38}},"loc":{"start":{"line":26,"column":45},"end":{"line":28,"column":3}},"line":26},"4":{"name":"(anonymous_4)","decl":{"start":{"line":57,"column":65},"end":{"line":57,"column":66}},"loc":{"start":{"line":57,"column":85},"end":{"line":89,"column":1}},"line":57},"5":{"name":"(anonymous_5)","decl":{"start":{"line":67,"column":28},"end":{"line":67,"column":29}},"loc":{"start":{"line":67,"column":36},"end":{"line":69,"column":3}},"line":67},"6":{"name":"(anonymous_6)","decl":{"start":{"line":70,"column":37},"end":{"line":70,"column":38}},"loc":{"start":{"line":70,"column":45},"end":{"line":72,"column":3}},"line":70}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10},"2":{"loc":{"start":{"line":19,"column":2},"end":{"line":22,"column":5}},"type":"if","locations":[{"start":{"line":19,"column":2},"end":{"line":22,"column":5}},{"start":{"line":19,"column":2},"end":{"line":22,"column":5}}],"line":19},"3":{"loc":{"start":{"line":33,"column":2},"end":{"line":38,"column":3}},"type":"if","locations":[{"start":{"line":33,"column":2},"end":{"line":38,"column":3}},{"start":{"line":33,"column":2},"end":{"line":38,"column":3}}],"line":33},"4":{"loc":{"start":{"line":63,"column":2},"end":{"line":66,"column":5}},"type":"if","locations":[{"start":{"line":63,"column":2},"end":{"line":66,"column":5}},{"start":{"line":63,"column":2},"end":{"line":66,"column":5}}],"line":63},"5":{"loc":{"start":{"line":74,"column":2},"end":{"line":77,"column":5}},"type":"if","locations":[{"start":{"line":74,"column":2},"end":{"line":77,"column":5}},{"start":{"line":74,"column":2},"end":{"line":77,"column":5}}],"line":74}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{"0":[0,1],"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","_handlingTryCatchBlocks","_getCartsHandler","obj","__esModule","default","updateCart","asyncWrapper","req","res","id","quantity","body","buyerId","user","cart","getCarts","status","json","t","message","cartData","map","item","itemToUpdate","find","console","log","cartItem","db","shoppingCarts","findByPk","productVariation","ProductAttribute","dataValues","product","totalAmount","price","updatedCart","update","totalpricePerProduct","newCart","totalPrice","CalculateTotalPrice","data","carts","exports","deleteCartItem","itemToDelete","deletedItem","destroy"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\controllers\\shoppingCartController\\","sources":["updateCartController.js"],"sourcesContent":["import db from '../../database/models';\r\nimport { asyncWrapper } from '../../utils/handlingTryCatchBlocks';\r\nimport { getCarts, CalculateTotalPrice } from '../../utils/getCartsHandler';\r\n\r\nexport const updateCart = asyncWrapper(async (req, res) => {\r\n  const { id, quantity } = req.body;\r\n  // console.log('Hello id',id);\r\n  const buyerId = req.user.id;\r\n  const cart = await getCarts(buyerId)\r\n  if (!cart)\r\n    return res\r\n      .status(404)\r\n      .json({ status: req.t('fail'), message: req.t('not_found') });\r\n  const cartData = cart.map((item) => {\r\n    return item.id;\r\n  });\r\n  const itemToUpdate = cartData.find((item) => {\r\n    return item == id;\r\n  });\r\n  console.log(`====================${cartData}=============${id}==========`);\r\n  const cartItem = await db.shoppingCarts.findByPk(itemToUpdate);\r\n  const productVariation = await db.ProductAttribute.findByPk(\r\n    cartItem.dataValues.product\r\n  );\r\n  console.log(`====================${cartItem}=============${id}==========`);\r\n\r\n  if (productVariation.dataValues.quantity < quantity) {\r\n    return res.status(404).json({\r\n      status: req.t('fail'),\r\n      message: req.t('exceeds_stock'),\r\n    });\r\n  }\r\n  const totalAmount = productVariation.dataValues.price * quantity;\r\n  const updatedCart = await cartItem.update({\r\n    quantity,\r\n    totalpricePerProduct: totalAmount,\r\n  });\r\n    const newCart = await getCarts(buyerId);\r\n  const totalPrice = CalculateTotalPrice(newCart);\r\n  console.log('Hello total', totalPrice);\r\n  res.status(201).json({\r\n    status: req.t('success'),\r\n    message: req.t('cart_item_updated'),\r\n    data: {carts:newCart, totalPrice},\r\n  });\r\n});\r\n\r\nexport const deleteCartItem = asyncWrapper(async (req, res) => {\r\n  const { id } = req.body;\r\n  const buyerId = req.user.id;\r\n  const cart = await getCarts(buyerId);\r\n  if (!cart)\r\n    return res\r\n      .status(404)\r\n      .json({ status: req.t('fail'), message: req.t('not_found') });\r\n  const cartData = cart.map((item) => {\r\n    return item.id;\r\n  });\r\n  const itemToDelete = cartData.find((item) => {\r\n    return item == id;\r\n  });\r\n  const cartItem = await db.shoppingCarts.findByPk(itemToDelete);\r\n  if(!cartItem) return res.status(404).json({status:req.t('fail'), message:req.t('not_found')})\r\n    const deletedItem = await cartItem.destroy();\r\n    const newCart = await getCarts(buyerId);\r\n    const totalPrice = CalculateTotalPrice(newCart);\r\n    res.status(200).json({\r\n    status: req.t('success'),\r\n    message: req.t('cart_item_deleted'),\r\n    data: {carts:newCart, totalPrice},\r\n  });\r\n});\r\n\r\n\r\n"],"mappings":"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"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4b82fd2dd9106060927925a123e8427a96c3ca27","contentHash":"3b73cd923da8fed7289f720aa754c565489bc0be77b67f582f87561997f79a99"},"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\getCartsHandler.js":{"path":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\getCartsHandler.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":56}},"2":{"start":{"line":7,"column":14},"end":{"line":7,"column":67}},"3":{"start":{"line":8,"column":39},"end":{"line":8,"column":93}},"4":{"start":{"line":9,"column":17},"end":{"line":16,"column":1}},"5":{"start":{"line":10,"column":16},"end":{"line":14,"column":4}},"6":{"start":{"line":15,"column":2},"end":{"line":15,"column":15}},"7":{"start":{"line":17,"column":0},"end":{"line":17,"column":28}},"8":{"start":{"line":18,"column":28},"end":{"line":23,"column":1}},"9":{"start":{"line":19,"column":21},"end":{"line":21,"column":31}},"10":{"start":{"line":20,"column":4},"end":{"line":20,"column":37}},"11":{"start":{"line":21,"column":22},"end":{"line":21,"column":27}},"12":{"start":{"line":22,"column":2},"end":{"line":22,"column":20}},"13":{"start":{"line":24,"column":0},"end":{"line":24,"column":50}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":31}},"loc":{"start":{"line":8,"column":37},"end":{"line":8,"column":95}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":17},"end":{"line":9,"column":18}},"loc":{"start":{"line":9,"column":34},"end":{"line":16,"column":1}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":28},"end":{"line":18,"column":29}},"loc":{"start":{"line":18,"column":36},"end":{"line":23,"column":1}},"line":18},"3":{"name":"(anonymous_3)","decl":{"start":{"line":19,"column":30},"end":{"line":19,"column":31}},"loc":{"start":{"line":19,"column":38},"end":{"line":21,"column":3}},"line":19},"4":{"name":"(anonymous_4)","decl":{"start":{"line":21,"column":12},"end":{"line":21,"column":13}},"loc":{"start":{"line":21,"column":22},"end":{"line":21,"column":27}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":46},"end":{"line":8,"column":92}},"type":"cond-expr","locations":[{"start":{"line":8,"column":70},"end":{"line":8,"column":73}},{"start":{"line":8,"column":76},"end":{"line":8,"column":92}}],"line":8},"1":{"loc":{"start":{"line":8,"column":46},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":46},"end":{"line":8,"column":49}},{"start":{"line":8,"column":53},"end":{"line":8,"column":67}}],"line":8}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"names":["_models","_interopRequireDefault","require","obj","__esModule","default","getCarts","buyerId","carts","db","shoppingCarts","findAll","where","buyer","exports","CalculateTotalPrice","cart","totalPrice","map","item","totalpricePerProduct","reduce","a","b"],"sourceRoot":"E:\\ANDELA\\ecommerce-app-legends-bn\\src\\utils\\","sources":["getCartsHandler.js"],"sourcesContent":["import db from '../database/models';\r\nexport const getCarts = async (buyerId) => {\r\n  const carts = await db.shoppingCarts.findAll({ where: { buyer: buyerId } });\r\n  return carts;\r\n};\r\nexport const CalculateTotalPrice = (cart) => {\r\n  const totalPrice = cart\r\n    .map((item) => {\r\n      return item.totalpricePerProduct;\r\n    })\r\n    .reduce((a, b) => a + b, 0);\r\n  return totalPrice;\r\n};"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAoC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAC7B,MAAMG,QAAQ,GAAG,MAAOC,OAAO,IAAK;EACzC,MAAMC,KAAK,GAAG,MAAMC,eAAE,CAACC,aAAa,CAACC,OAAO,CAAC;IAAEC,KAAK,EAAE;MAAEC,KAAK,EAAEN;IAAQ;EAAE,CAAC,CAAC;EAC3E,OAAOC,KAAK;AACd,CAAC;AAACM,OAAA,CAAAR,QAAA,GAAAA,QAAA;AACK,MAAMS,mBAAmB,GAAIC,IAAI,IAAK;EAC3C,MAAMC,UAAU,GAAGD,IAAI,CACpBE,GAAG,CAAEC,IAAI,IAAK;IACb,OAAOA,IAAI,CAACC,oBAAoB;EAClC,CAAC,CAAC,CACDC,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,EAAE,CAAC,CAAC;EAC7B,OAAON,UAAU;AACnB,CAAC;AAACH,OAAA,CAAAC,mBAAA,GAAAA,mBAAA"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"20089803dcd7e6f48963de209bdb490004bb9366","contentHash":"9890170b501ec1da207ab8993e0a482a67d838ca7d420a86d627e91da3280b34"}}